---
id: drupal-warmer-2
language: ru
title: 'Drupal Warmer 2: –ö–µ—à –Ω—É–∂–Ω–æ –ø–æ–¥–∞–≤–∞—Ç—å –≥–æ—Ä—è—á–∏–º!'
created: '2021-09-29T15:31:57'
updated: '2024-05-25T00:00:00'
description: >-
  –£–∑–Ω–∞–π—Ç–µ, –∫–∞–∫ —É—Å–∫–æ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É —Å–∞–π—Ç–∞ –Ω–∞ Drupal —Å Drupal Warmer 2: –ø—Ä–æ–≥—Ä–µ–π—Ç–µ –∫–µ—à
  –∏ –Ω–∞—Å–ª–∞–∂–¥–∞–π—Ç–µ—Å—å –±—ã—Å—Ç—Ä–æ–π –∑–∞–≥—Ä—É–∑–∫–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü!
promo: 'image/pexels-matan-levanon-3372792.jpg'
tags:
  - Drupal
  - 'Drupal 8'
  - 'Drupal 9'
  - –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ
  - 'Plugin API'
---

:: youtube {vid=Y1I7zGn6F-w}

**–ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ** (_–≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ Drupal_) ‚Äî –ø—Ä–æ—Ü–µ—Å—Å, –ø—Ä–∏ –∫–æ—Ç–æ—Ä–æ–º —Å–ª–æ–∂–Ω—ã–µ –∏–ª–∏ –¥–æ–ª–≥–∏–µ
–¥–ª—è –≤—ã—á–∏—Å–ª–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç
—É—Å–∫–æ—Ä–∏—Ç—å –ø–æ–¥–≥–æ—Ç–æ–≤–∫—É –æ—Ç–≤–µ—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –∑–∞ —Å—á—ë—Ç —Ç–æ–≥–æ, —á—Ç–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç —É–∂–µ –∑–∞—Ä–∞–Ω–µ–µ
–∏–∑–≤–µ—Å—Ç–µ–Ω –∏ –Ω–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –µ–≥–æ –≤—ã—á–∏—Å–ª—è—Ç—å –ø–æ–≤—Ç–æ—Ä–Ω–æ.

–ö–µ—à –ø—Ä–∏–Ω—è—Ç–æ –¥–µ–ª–∏—Ç—å –Ω–∞ –¥–≤–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è:

* **–•–æ–ª–æ–¥–Ω—ã–π –∫–µ—à** (–∞–Ω–≥–ª. ¬´Cold Cache¬ª) ‚Äî —ç—Ç–æ –∫–æ–≥–¥–∞ –≤ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç
  –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –Ω–∞–º –¥–∞–Ω–Ω—ã–µ.
* **–ì–æ—Ä—è—á–∏–π –∫–µ—à** (–∞–Ω–≥–ª. ¬´Warm Cache¬ª, –±—É–∫–≤–∞–ª—å–Ω–æ ¬´–¢—ë–ø–ª—ã–π –∫–µ—à¬ª) ‚Äî —ç—Ç–æ –∫–µ—à, –≤
  –∫–æ—Ç–æ—Ä–æ–º –µ—Å—Ç—å –¥–∞–Ω–Ω—ã–µ, –∏ –º—ã –º–æ–∂–µ–º –ø–æ–≤—Ç–æ—Ä–Ω–æ –∏—Ö –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å.

–ï—Å–ª–∏ –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ —à—Ç–∞—Ç–Ω–æ–º —Ä–µ–∂–∏–º–µ –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å —É–º–æ–º (–Ω–µ—Ç —Å–º—ã—Å–ª–∞ –∫–µ—à–∏—Ä–æ–≤–∞—Ç—å
—Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤—ã—á–∏—Å–ª–µ–Ω–∏—è ¬´2 + 2¬ª), —Ç–æ ¬´—Ö–æ–ª–æ–¥–Ω—ã–π –∫–µ—à¬ª –±—É–¥–µ—Ç –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ –º–µ–¥–ª–µ–Ω–Ω–µ–µ
¬´–≥–æ—Ä—è—á–µ–≥–æ¬ª. –ß—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å ¬´–≥–æ—Ä—è—á–∏–π –∫–µ—à¬ª, –Ω—É–∂–Ω–æ –∑–∞–ø—Ä–æ—Å–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –Ω–∞ ¬´—Ö–æ–ª–æ–¥–Ω—ã–π
–∫–µ—à¬ª, –æ–Ω–∏ –±—É–¥—É—Ç –≤—ã—á–∏—Å–ª–µ–Ω—ã, —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ –∫–µ—à –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –ø—Ä–∏ —Å–ª–µ–¥—É—é—â–∏—Ö
–∑–∞–ø—Ä–æ—Å–∞—Ö ‚Äî —ç—Ç–æ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è ¬´–ø—Ä–æ–≥—Ä–µ–≤ –∫–µ—à–∞¬ª (–∞–Ω–≥–ª. ¬´Cache Warming¬ª).

–í—ã—Ö–æ–¥–∏—Ç, —á–µ–º –ª—É—á—à–µ –ø—Ä–æ–≥—Ä–µ—Ç —Å–∞–π—Ç, —Ç–µ–º –æ–Ω –±—ã—Å—Ç—Ä–µ–µ –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–µ–µ. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π
–æ–ø—ã—Ç –±—É–¥–µ—Ç –ª—É—á—à–µ, –µ—Å–ª–∏ –ø–æ—Å–µ—Ç–∏—Ç–µ–ª—å –±—É–¥–µ—Ç –ø–æ–ø–∞–¥–∞—Ç—å –Ω–∞ –≥–æ—Ä—è—á–∏–π –∫–µ—à —Å TTFB < 10 –º—Å,
–Ω–µ–∂–µ–ª–∏ —Ö–æ–ª–æ–¥–Ω—ã–π TTFB 1000 –º—Å (–∫–∞–∫ –ø—Ä–∏–º–µ—Ä). –í –∏–¥–µ–∞–ª–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–æ–ª–∂–µ–Ω –≤—Å–µ–≥–¥–∞
–ø–æ–ø–∞–¥–∞—Ç—å –Ω–∞ –≥–æ—Ä—è—á–∏–π –∫–µ—à, –∞ –Ω–µ –Ω–∞ —Ö–æ–ª–æ–¥–Ω—ã–π.

–ù–æ —Ç–∞–∫ –∫–∞–∫ –≥–æ—Ä—è—á–∏–π –∫–µ—à –Ω–µ –ø–æ—è–≤–∏—Ç—Å—è –¥–æ —Ç–µ—Ö –ø–æ—Ä, –ø–æ–∫–∞ –∫—Ç–æ-—Ç–æ –Ω–µ –∑–∞–π–¥—ë—Ç –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É
–≤ –ø–µ—Ä–≤—ã–π —Ä–∞–∑ –∏ –Ω–µ —Å–ø—Ä–æ–≤–æ—Ü–∏—Ä—É–µ—Ç –ø—Ä–æ–≥—Ä–µ–≤, –ø–æ—è–≤–ª—è–µ—Ç—Å—è –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç—å –≤ —ç—Ç–æ–º —Å–∞–º–æ–º
–ø—Ä–æ–≥—Ä–µ–≤–µ. –û–¥–Ω–æ –¥–µ–ª–æ, –∫–æ–≥–¥–∞ —É —Å–∞–π—Ç–∞ 10 —Å—Ç—Ä–∞–Ω–∏—Ü, –∏ –∏—Ö –º–æ–∂–Ω–æ –ø—Ä–æ–∫–ª–∏–∫–∞—Ç—å —Ä—É–∫–∞–º–∏, —Ç–µ–º
—Å–∞–º—ã–º —Ä–∞–∑–æ–≥—Ä–µ–≤ –∫–µ—à, —Å–æ–≤—Å–µ–º –¥—Ä—É–≥–æ–µ, –∫–æ–≥–¥–∞ —Å—Ç—Ä–∞–Ω–∏—Ü —Ç—ã—Å—è—á–∏.

–°–ø–æ—Å–æ–±–æ–≤ –ø—Ä–æ–≥—Ä–µ–≤–∞ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–æ, –º–æ–∂–Ω–æ –±–∞–Ω–∞–ª—å–Ω–æ –Ω–∞—Ç—Ä–∞–≤–∏—Ç—å –∫–∞–∫–æ–≥–æ-–Ω–∏–±—É–¥—å
SEO-–∫—Ä–∞—É–ª–µ—Ä–∞, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–æ–±–µ–∂–∏—Ç—Å—è –ø–æ –≤—Å–µ–º —Å—Ç—Ä–∞–Ω–∏—á–∫–∞–º, —Ç–µ–º —Å–∞–º—ã–º –ø—Ä–æ–≥—Ä–µ–≤–∞—è –∫–µ—à,
–ª–∏–±–æ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–æ—Ñ—Ç. –í –Ω–∞—à–µ–º –∂–µ —Å–ª—É—á–∞–µ –º—ã —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º —Ä–µ—à–µ–Ω–∏–µ –≤ –≤–∏–¥–µ
–º–æ–¥—É–ª—è –¥–ª—è Drupal ‚Äî Warmer.

## –ú–æ–¥—É–ª—å Warmer

[Warmer](https://www.drupal.org/project/warmer) (`warmer`) ‚Äî —ç—Ç–æ –º–æ–¥—É–ª—å, –∫–æ—Ç–æ—Ä—ã–π
–ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞—Ä–∏–π –¥–ª—è –ø—Ä–æ–≥—Ä–µ–≤–∞ –∫–µ—à–∞. –ï–≥–æ —Ä–∞–±–æ—Ç–∞ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∞
–Ω–∞ [–æ—á–µ—Ä–µ–¥—è—Ö][drupal-8-queue-api] –∏ [–ø–ª–∞–≥–∏–Ω–∞—Ö][drupal-8-how-to-create-custom-plugin-type] `@Warmer`. –¢–∞–∫–∂–µ
–º–æ–¥—É–ª—å –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∫–æ–º–∞–Ω–¥—ã –¥–ª—è Drush –∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å, –≤ –∫–æ—Ç–æ—Ä–æ–º
–º–æ–∂–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å –ø—Ä–æ–≥—Ä–µ–≤ –≤—Ä—É—á–Ω—É—é –∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å –ø–ª–∞–≥–∏–Ω—ã.

–î–∞–Ω–Ω—ã–π –º–æ–¥—É–ª—å –Ω–µ —Ç–æ–ª—å–∫–æ –∑–∞–Ω–∏–º–∞–µ—Ç—Å—è –ø—Ä–æ–≥—Ä–µ–≤–æ–º –ø–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—é, –Ω–æ –∏ —É–º–µ–µ—Ç
–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –µ–≥–æ –≤ –∞–∫—Ç—É–∞–ª—å–Ω–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –ø—Ä–∏ –ø–æ–º–æ—â–∏ —Ä–µ–≥—É–ª—è—Ä–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π.

## –ü–ª–∞–≥–∏–Ω—ã @Warmer

–î–ª—è –ø—Ä–æ–≥—Ä–µ–≤–∞ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è `@Warmer` –ø–ª–∞–≥–∏–Ω—ã. –û–Ω–∏ –æ—Ç–≤–µ—á–∞—é—Ç –∑–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ
–Ω–∞—Å—Ç—Ä–æ–π–∫–∏, —á—Ç–æ –∏ –∫–∞–∫ –ø—Ä–æ–≥—Ä–µ–≤–∞—Ç—å, –∞ —Ç–∞–∫–∂–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å.

### –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –ø–ª–∞–≥–∏–Ω—ã

–ú–æ–¥—É–ª—å Warmer –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Ç–æ–ª—å–∫–æ API, –Ω–æ –≤ –ø–æ—Å—Ç–∞–≤–∫–µ —Ç–∞–∫–∂–µ –∏–º–µ—é—Ç—Å—è –¥–≤–∞
–¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –º–æ–¥—É–ª—è:

* **CDN Warmer** (`warmer_cdn`) ‚Äî –¥–∞–Ω–Ω—ã–π –º–æ–¥—É–ª—å –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å
  –ø—Ä–æ–≥—Ä–µ–≤–∞ –ø—Ä–∏ –ø–æ–º–æ—â–∏ HTTP-–∑–∞–ø—Ä–æ—Å–æ–≤ –∫ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–º —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º. –°–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ,
  –µ—Å–ª–∏ –≤–∞—à —Å–∞–π—Ç –∑–∞–∫—Ä—ã—Ç CDN, –æ–Ω –±—É–¥–µ—Ç —Ä–∞–∑–æ–≥—Ä–µ—Ç, —Ç–∞–∫ –∫–∞–∫ –∑–∞–ø—Ä–æ—Å –ø–æ–ø–∞–¥—ë—Ç –Ω–∞ –Ω–µ–≥–æ. –ê
  –µ—â—ë —Ç–∞–∫ –º–æ–∂–Ω–æ –ø—Ä–æ–≥—Ä–µ–≤–∞—Ç—å —á—É–∂–∏–µ —Å–∞–π—Ç—ã. ü§≠ –ù–æ –ø—É—Å—Ç—å –≤–∞—Å –Ω–µ –ø—É—Ç–∞–µ—Ç –µ–≥–æ –Ω–∞–∑–≤–∞–Ω–∏–µ,
  –µ–≥–æ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏ –¥–ª—è —Å–∞–π—Ç–æ–≤ –±–µ–∑ CDN. –û–Ω –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –¥–≤–∞ –ø–ª–∞–≥–∏–Ω–∞:
  * **CDN via Sitemap** (`sitemap`) ‚Äî –ø–ª–∞–≥–∏–Ω –ø–æ–∑–≤–æ–ª—è–µ—Ç —É–∫–∞–∑–∞—Ç—å –ø—É—Ç–∏ –¥–æ –∫–∞—Ä—Ç
    —Å–∞–π—Ç–∞, –∑–∞—Ç–µ–º –æ–Ω –±—É–¥–µ—Ç –ø–æ–ª—É—á–∞—Ç—å –∞–¥—Ä–µ—Å–∞ –∏–∑ —ç—Ç–∏—Ö –∫–∞—Ä—Ç –∏ –ø—Ä–æ–≥—Ä–µ–≤–∞—Ç—å –∏—Ö. –£–¥–∞—á–Ω–æ–µ
    —Ä–µ—à–µ–Ω–∏–µ –¥–ª—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ –Ω–µ–±–æ–ª—å—à–∏—Ö —Å–∞–π—Ç–æ–≤. –ü–æ —Å–≤–æ–µ–π —Å—É—Ç–∏ –æ–Ω –±—É–¥–µ—Ç –ø—Ä–æ–≥—Ä–µ–≤–∞—Ç—å
    –≤—Å–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã, —á—Ç–æ –≤–∞–∂–Ω—ã –¥–ª—è —Å–∞–π—Ç–∞ (–¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ –∫–∞—Ä—Ç—É —Å–∞–π—Ç–∞).
  * **CDN** (`cdn`) ‚Äî –ø–ª–∞–≥–∏–Ω –¥–ª—è —Ä–∞–∑–æ–≥—Ä–µ–≤–∞ —É–∫–∞–∑–∞–Ω–Ω—ã—Ö URL-–∞–¥—Ä–µ—Å–æ–≤. –í—ã –ø—Ä–æ—Å—Ç–æ
    —É–∫–∞–∑—ã–≤–∞–µ—Ç–µ –≤ —Ç–µ–∫—Å—Ç–æ–≤–æ–µ –ø–æ–ª–µ –∞–±—Å–æ–ª—é—Ç–Ω—ã–µ –∏–ª–∏ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–µ –ø—É—Ç–∏, –∏ –æ–Ω –±—É–¥–µ—Ç
    –∑–∞–ø—Ä–∞—à–∏–≤–∞—Ç—å –∏—Ö.
* **Entity Warmer** (`warmer_entity`) ‚Äî –¥–∞–Ω–Ω—ã–π –º–æ–¥—É–ª—å –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π
  –ø–ª–∞–≥–∏–Ω (`entity`), –≤ –∫–æ—Ç–æ—Ä–æ–º –≤—ã –º–æ–∂–µ—Ç–µ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å, –∫–∞–∫–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç-—Å—É—â–Ω–æ—Å—Ç–∏ –Ω—É–∂–Ω–æ
  —Ä–∞–∑–æ–≥—Ä–µ–≤–∞—Ç—å. –û–Ω –∑–∞–≥—Ä—É–∂–∞–µ—Ç –≤—Å–µ —ç—Ç–∏ —Å—É—â–Ω–æ—Å—Ç–∏ –≤ –ø–∞–º—è—Ç—å –∏ —á–∏—Å—Ç–∏—Ç –µ—ë –±–µ–∑ –∫–∞–∫–∏—Ö-–ª–∏–±–æ
  –≤–Ω–µ—à–Ω–∏—Ö HTTP-–∑–∞–ø—Ä–æ—Å–æ–≤. –ò–Ω—ã–º–∏ —Å–ª–æ–≤–∞–º–∏, –æ–Ω –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –ø—Ä–æ–≥—Ä–µ–≤ –∫–µ—à–∞
  —Å—É—â–Ω–æ—Å—Ç–µ–π. –ó–∞–≥—Ä—É–∂–∞—è —Å—É—â–Ω–æ—Å—Ç—å –≤ Drupal, –æ–Ω–∞ –ø–æ–ª—É—á–∞–µ—Ç –∫–µ—à –¥–∞–Ω–Ω—ã—Ö ‚Äî –≤—Å–µ –∑–Ω–∞—á–µ–Ω–∏—è
  —Å—É—â–Ω–æ—Å—Ç–∏ —Å–æ–±–∏—Ä–∞—é—Ç—Å—è —Å–æ –≤—Å–µ—Ö —Ç–∞–±–ª–∏—Ü, –ø–æ–ª–µ–π –∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –æ–¥–Ω—É –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—É—é
  –∑–∞–ø–∏—Å—å, —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å—É—â–Ω–æ—Å—Ç—è–º –≥—Ä—É–∑–∏—Ç—å—Å—è –æ—á–µ–Ω—å –±—ã—Å—Ç—Ä–æ, –¥–∞–∂–µ –µ—Å–ª–∏ —É –≤–∞—Å —Ç–∞–º
  100 –ø–æ–ª–µ–π. –¢–∞–∫ –¥–∞–∂–µ –Ω–µ –ø—Ä–æ–≥—Ä–µ–≤–∞—è –≤—Å—é —Å—Ç—Ä–∞–Ω–∏—Ü—É —Ü–µ–ª–∏–∫–æ–º, —Å–∫–æ—Ä–æ—Å—Ç—å –∑–∞–≥—Ä—É–∑–∫–∏
  —Å—Ç—Ä–∞–Ω–∏—Ü—ã –Ω–∞ —Ö–æ–ª–æ–¥–Ω—ã–π –∫–µ—à –±—É–¥–µ—Ç –Ω–∞–º–Ω–æ–≥–æ –±—ã—Å—Ç—Ä–µ–µ, —Ç–∞–∫ –∫–∞–∫ —Å—É—â–Ω–æ—Å—Ç–∏, –¥–∞–Ω–Ω—ã–µ
  –∫–æ—Ç–æ—Ä—ã—Ö –±—É–¥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –¥–ª—è —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã, —É–∂–µ –±—É–¥—É—Ç —Å–æ–±—Ä–∞–Ω—ã –≤
  –∫—É—á–∫—É.

–î–∞–Ω–Ω—ã–µ –ø–ª–∞–≥–∏–Ω—ã –¥–æ–ª–∂–Ω—ã –ø–æ–∫—Ä—ã—Ç—å –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –∑–∞–¥–∞—á –∏ –∫–µ–π—Å–æ–≤ –¥–ª—è –æ–±—ã—á–Ω—ã—Ö —Å–∞–π—Ç–æ–≤. –ù–æ
–µ—Å–ª–∏ –æ–Ω–∏ –≤–∞–º –Ω–µ –ø–æ–¥—Ö–æ–¥—è—Ç, –≤–∞–º –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Å–æ–∑–¥–∞–≤–∞—Ç—å –ø–ª–∞–≥–∏–Ω—ã —Å
—Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–º–∏ —Ç–µ—Ö–Ω–∏–∫–∞–º–∏ –∏ –ø–æ–¥—Ö–æ–¥–∞–º–∏ –ø—Ä–æ–≥—Ä–µ–≤–∞.

### –°–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø–ª–∞–≥–∏–Ω—ã

–ï—Å–ª–∏ —É –≤–∞—Å —Å–≤–æ–∏ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –∏–ª–∏ –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç–∏ –Ω–∞ –ø—Ä–æ–µ–∫—Ç–µ, –≤—ã –º–æ–∂–µ—Ç–µ —Å–æ–∑–¥–∞–≤–∞—Ç—å —Å–≤–æ–∏
–ø–ª–∞–≥–∏–Ω—ã –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏—Ö –¥–ª—è –ø—Ä–æ–≥—Ä–µ–≤–∞ –∫–µ—à–∞ —Ç–∞–∫, –∫–∞–∫ –≤–∞–º –Ω—É–∂–Ω–æ.

#### –ê–Ω–Ω–æ—Ç–∞—Ü–∏—è @Warmer

```php
/**
 * The cache warmer for my awesome website.
 *
 * @Warmer(
 *   id = "example",
 *   label = @Translation("Example"),
 *   description = @Translation("This is an example.")
 * )
 */
```

–ê–Ω–Ω–æ—Ç–∞—Ü–∏—è —É –ø–ª–∞–≥–∏–Ω–æ–≤ –æ—á–µ–Ω—å –ø—Ä–æ—Å—Ç–∞—è, –æ–Ω–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç –≤—Å–µ–≥–æ 3 —Å–≤–æ–π—Å—Ç–≤–∞:

* `id`: –ú–∞—à–∏–Ω–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –ø–ª–∞–≥–∏–Ω–∞.
* `label`: –ù–∞–∑–≤–∞–Ω–∏–µ –ø–ª–∞–≥–∏–Ω–∞, –±—É–¥–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –≤ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω–æ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ.
* `description`: (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –û–ø–∏—Å–∞–Ω–∏–µ, –æ—Ç–æ–±—Ä–∞–∂–∞–µ–º–æ–µ –Ω–∞ –≤–∫–ª–∞–¥–∫–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
  –ø–ª–∞–≥–∏–Ω–∞, –≥–¥–µ –∏ –µ–≥–æ —Ñ–æ—Ä–º–∞ (–µ—Å–ª–∏ –µ—Å—Ç—å).

#### –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å WarmerInterface

–í—Å–µ `@Warmer` –ø–ª–∞–≥–∏–Ω—ã —Ä–µ–∞–ª–∏–∑—É—é—Ç
–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å `\Drupal\warmer\Plugin\WarmerInterface`. –û–Ω –æ–ø–∏—Å—ã–≤–∞–µ—Ç –≤—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ
—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –¥–ª—è –¥–∞–Ω–Ω–æ–≥–æ —Ç–∏–ø–∞ –ø–ª–∞–≥–∏–Ω–æ–≤ –º–µ—Ç–æ–¥—ã.

##### ::getBatchSize()

–ú–µ—Ç–æ–¥ `::getBatchSize()` –¥–æ–ª–∂–µ–Ω –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å —á–∏—Å–ª–æ —Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –¥–ª—è
–æ–¥–Ω–æ–π –æ–ø–µ—Ä–∞—Ü–∏–∏ [–ø–∞–∫–µ—Ç–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö][drupal-8-batch-api]. –ò–Ω—ã–º–∏ —Å–ª–æ–≤–∞–º–∏, –∫–∞–∫–æ–µ
–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –±—É–¥–µ—Ç —Ä–∞–∑–æ–≥—Ä–µ–≤–∞—Ç—å—Å—è –∑–∞ –æ–¥–∏–Ω –ø—Ä–æ—Ö–æ–¥.

##### ::getFrequency()

–ú–µ—Ç–æ–¥ `::getFrequency()` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≤—Ä–µ–º—è –≤ —Å–µ–∫—É–Ω–¥–∞—Ö, –ø—Ä–∏ –ø—Ä–æ—à–µ—Å—Ç–≤–∏–∏ –∫–æ—Ç–æ—Ä–æ–≥–æ
–±—É–¥–µ—Ç —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∞ –Ω–æ–≤–∞—è –æ—á–µ—Ä–µ–¥—å –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è –ø—Ä–æ–≥—Ä–µ–≤.

##### ::buildIdsBatch()

–ú–µ—Ç–æ–¥ `::buildIdsBatch()` –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–ª–ª–µ–∫—Ü–∏–π (–º–∞—Å—Å–∏–≤–æ–≤) —Å
–¥–∞–Ω–Ω—ã–º–∏ –¥–ª—è –ø–∞–∫–µ—Ç–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö. –ö–∞–∂–¥—ã–π —Ç–∞–∫–æ–π —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –º–∞—Å—Å–∏–≤
–¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –∫–∞–∫ –æ–ø–µ—Ä–∞—Ü–∏—è –∏ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è –≤ `::loadMultiple()`.

–ú–µ—Ç–æ–¥ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –æ–¥–∏–Ω –∞—Ä–≥—É–º–µ–Ω—Ç:

* `$cursor`: –£–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞.

–î–∞–Ω–Ω—ã–π –º–µ—Ç–æ–¥ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –¥–æ —Ç–µ—Ö –ø–æ—Ä, –ø–æ–∫–∞ –æ–Ω –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –º–∞—Å—Å–∏–≤ —Å –¥–∞–Ω–Ω—ã–º–∏. –ö–∞–∫
—Ç–æ–ª—å–∫–æ –æ–Ω –≤–µ—Ä–Ω—ë—Ç –ø—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤, –µ–≥–æ –≤—ã–∑–æ–≤ –¥–ª—è –¥–∞–Ω–Ω–æ–≥–æ –ø–ª–∞–≥–∏–Ω–∞ –ø—Ä–µ–∫—Ä–∞—Ç–∏—Ç—Å—è.

–ü—Ä–∏ –ø–µ—Ä–≤–æ–º –≤—ã–∑–æ–≤–µ `$cursor` –≤—Å–µ–≥–¥–∞ —Ä–∞–≤–µ–Ω `NULL`. –¢–∞–∫ –≤—ã –º–æ–∂–µ—Ç–µ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å —á—Ç–æ
–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è –ø–µ—Ä–≤—ã–π –≤—ã–∑–æ–≤ –º–µ—Ç–æ–¥–∞. –ù–∞ –≤—Å–µ –ø–æ—Å–ª–µ–¥—É—é—â–∏–µ –≤—ã–∑–æ–≤—ã –æ–Ω –±—É–¥–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å
–∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞ –º–∞—Å—Å–∏–≤–∞, –∫–æ—Ç–æ—Ä—ã–π –±—ã–ª –≤–æ–∑–≤—Ä–∞—â—ë–Ω –¥–∞–Ω–Ω—ã–º –º–µ—Ç–æ–¥–æ–º –Ω–∞
–ø—Ä–µ–¥—ã–¥—É—â–µ–π –∏—Ç–µ—Ä–∞—Ü–∏–∏.

–≠—Ç–æ —Å–¥–µ–ª–∞–Ω–æ –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã –±–æ–ª—å—à–∏–µ –æ–±—ä—ë–º—ã –¥–∞–Ω–Ω—ã—Ö –º–æ–∂–Ω–æ –±—ã–ª–æ –ª–µ–≥–∫–æ ¬´–Ω–∞—Ä–µ–∑–∞—Ç—å¬ª –Ω–∞
–º–∞—Å—Å–∏–≤—ã.

###### Wait, WUT?

![Drupal Warmer. –û–±—ä—è—Å–Ω–µ–Ω–∏–µ ::buildIdsBatch()](image/buildIdsBatch.explanation.png)

–î–∞–≤–∞–π—Ç–µ —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º –ø–æ–∫–∞–∑–∞—Ç–µ–ª—å–Ω—É—é —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é –¥–∞–Ω–Ω–æ–≥–æ –º–µ—Ç–æ–¥–∞ —Å –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ–º –∫—É—Ä—Å–æ—Ä–∞
–æ—Ç –ø–ª–∞–≥–∏–Ω–∞ `cdn`.

```php
  /**
   * {@inheritdoc}
   */
  public function buildIdsBatch($cursor) {
    // Parse the sitemaps and extract the URLs.
    $config = $this->getConfiguration();
    $urls = empty($config['urls']) ? [] : $config['urls'];
    $cursor_position = is_null($cursor) ? -1 : array_search($cursor, $urls);
    if ($cursor_position === FALSE) {
      return [];
    }
    return array_slice($urls, $cursor_position + 1, (int) $this->getBatchSize());
  }
```

–ü—Ä–µ–¥–ø–æ–ª–æ–∂–∏–º —á—Ç–æ —Ä–∞–∑–º–µ—Ä –ø–∞–∫–µ—Ç–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ (`::getBatchSize()`) —Ä–∞–≤–µ–Ω —Ç—Ä—ë–º (3),
–∞ `$urls` –∏–º–µ–µ—Ç —Å–ª–µ–¥—É—é—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ:

```php
$urls = [
  'https://example.com/1',
  'https://example.com/2',
  'https://example.com/3',
  'https://example.com/4',
  'https://example.com/5',
  'https://example.com/6',
];
```

–≠—Ç–æ –º–∞—Å—Å–∏–≤ –∞–¥—Ä–µ—Å–æ–≤, —á—Ç–æ –º—ã —Ö–æ—Ç–∏–º –ø—Ä–æ–≥—Ä–µ—Ç—å. –£ –Ω–∞—Å —É–∫–∞–∑–∞–Ω–æ, —á—Ç–æ –ø—Ä–æ–≥—Ä–µ–≤–∞–µ—Ç—Å—è –≤—Å–µ–≥–æ
3 –∞–¥—Ä–µ—Å–∞ –∑–∞ —Ä–∞–∑, —Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ, —É –Ω–∞—Å –¥–æ–ª–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å—Å—è 2 —ç–ª–µ–º–µ–Ω—Ç–∞ –æ—á–µ—Ä–µ–¥–∏ –≤
–∫–∞–∂–¥–æ–º –ø–æ 3 URL'–∞ –º–∞–∫—Å–∏–º—É–º. –ó–Ω–∞—á–∏—Ç, –¥–∞–Ω–Ω—ã–π –º–µ—Ç–æ–¥ –¥–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å –¥–≤–∞ –º–∞—Å—Å–∏–≤–∞ —Å
–¥–∞–Ω–Ω—ã–º–∏.

–¢—É—Ç –Ω–∞ –ø–æ–º–æ—â—å –∏ –ø—Ä–∏—Ö–æ–¥–∏—Ç `$cursor` –∏ –≤–æ—Ç —ç—Ç–∞ —á–∞—Å—Ç—å –∫–æ–¥–∞:

```php
    $cursor_position = is_null($cursor) ? -1 : array_search($cursor, $urls);
    if ($cursor_position === FALSE) {
      return [];
    }
    return array_slice($urls, $cursor_position + 1, (int) $this->getBatchSize());
```

–í –¥–∞–Ω–Ω–æ–º –∫–æ–¥–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Å–ª–µ–¥—É—é—â–µ–µ:

* –ü–æ–ª—É—á–∞–µ—Ç—Å—è –ø–æ–∑–∏—Ü–∏—è –∫—É—Ä—Å–æ—Ä–∞. –ï—Å–ª–∏ –æ–Ω `NULL` (–ø–µ—Ä–≤—ã–π –≤—ã–∑–æ–≤), –∑–Ω–∞—á–µ–Ω–∏–µ –±—É–¥–µ—Ç -1,
  –µ—Å–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ –µ—Å—Ç—å, –æ–Ω –ø—Ä–æ–∏–∑–≤–µ–¥–µ—Ç –ø–æ–∏—Å–∫ –ø–æ –¥–∞–Ω–Ω–æ–º—É –∑–Ω–∞—á–µ–Ω–∏—é –≤ –º–∞—Å—Å–∏–≤–µ `$urls`
  –ø—Ä–∏ –ø–æ–º–æ—â–∏ `array_search()`.
* –ï—Å–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ –∫–∞–∫–∏–º-—Ç–æ –ø—Ä–∏—á–∏–Ω–∞–º –Ω–µ –Ω–∞–π–¥–µ–Ω–æ (`FALSE`), —Ç–æ –≤–µ—Ä–Ω—ë—Ç—Å—è –ø—É—Å—Ç–æ–π
  –º–∞—Å—Å–∏–≤ –∏ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∑–∞–∫–æ–Ω—á–∏—Ç—Å—è.
* –ï—Å–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ -1 –∏–ª–∏ –ø–æ–ª—É—á–µ–Ω —Ä–µ–∑—É–ª—å—Ç–∞—Ç –æ—Ç `array_search()`, –∏–∑ –º–∞—Å—Å–∏–≤–∞ `$urls`
  –ø–æ–ª—É—á–∞–µ—Ç—Å—è —Å—Ä–µ–∑ –Ω–∞—á–∏–Ω–∞—è —Å –∏–Ω–¥–µ–∫—Å–∞ –∫—É—Ä—Å–æ—Ä–∞ —Å–æ —Å–º–µ—â–µ–Ω–∏–µ–º –Ω–∞ –æ–¥–∏–Ω –≤–ø–µ—Ä—ë–¥, –≤
  —Ä–∞–∑–º–µ—Ä–µ –ø–∞–∫–µ—Ç–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ (`::getBatchSize()`).

–ê —Ç–µ–ø–µ—Ä—å —Ç–æ –∂–µ —Å–∞–º–æ–µ, –Ω–æ —É–∂–µ –ø–æ—à–∞–≥–æ–≤–æ:

* –ü–µ—Ä–≤—ã–π –≤—ã–∑–æ–≤ –ø—Ä–∏—Å–≤–æ–∏—Ç `$cursor_position` –∑–Ω–∞—á–µ–Ω–∏–µ -1.
* –ó–∞—Ç–µ–º –∏–∑ –º–∞—Å—Å–∏–≤–∞ `$urls` –±—É–¥–µ—Ç –≤–æ–∑–≤—Ä–∞—â—ë–Ω —Å—Ä–µ–∑, –Ω–∞—á–∏–Ω–∞—è —Å –Ω—É–ª–µ–≤–æ–≥–æ
  –∏–Ω–¥–µ–∫—Å–∞ (`-1+1=0`), —Ä–∞–∑–º–µ—Ä–æ–≤ –≤ 3 –∑–Ω–∞—á–µ–Ω–∏—è (–ø–æ—Ç–æ–º—É —á—Ç–æ –º—ã –¥–æ–≥–æ–≤–æ—Ä–∏–ª–∏—Å—å
  —á—Ç–æ `::getBatchSize()` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 3 –¥–ª—è –ø—Ä–∏–º–µ—Ä–∞).
* –†–µ–∑—É–ª—å—Ç–∞—Ç–æ–º —Å—Ç–∞–Ω–µ—Ç —Å–ª–µ–¥—É—é—â–∏–π –º–∞—Å—Å–∏–≤:

```php
$urls = [
  'https://example.com/1',
  'https://example.com/2',
  'https://example.com/3',
];
```

* –¢–∞–∫ –∫–∞–∫ –º—ã –≤–µ—Ä–Ω—É–ª–∏ –Ω–µ –ø—É—Å—Ç–æ–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç, –º–µ—Ç–æ–¥ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –≤ –æ—á–µ—Ä–µ–¥–Ω–æ–π —Ä–∞–∑, –Ω–æ –≤
  —ç—Ç–æ—Ç —Ä–∞–∑ `$cursor` —É–∂–µ –∏–º–µ–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ `'https://example.com/3'` ‚Äî —ç—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ
  –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞ –º–∞—Å—Å–∏–≤–∞ –∫–æ—Ç–æ—Ä—ã–π –º—ã –≤–µ—Ä–Ω—É–ª–∏ –Ω–∞ –ø—Ä–µ–¥—ã–¥—É—â–µ–π –∏—Ç–µ—Ä–∞—Ü–∏–∏.
* `$cursor_position` –≤ —ç—Ç–æ—Ç —Ä–∞–∑ –ø–æ–ª—É—á–∏—Ç –∑–Ω–∞—á–µ–Ω–∏–µ 2, —Ç–∞–∫ –∫–∞–∫ –ø–æ —ç—Ç–æ–º—É –∏–Ω–¥–µ–∫—Å—É –≤
  –º–∞—Å—Å–∏–≤–µ –∞–¥—Ä–µ—Å–æ–≤ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ `$cursor`.
* –ó–∞—Ç–µ–º –∏–∑ –º–∞—Å—Å–∏–≤–∞ `$url` –æ–ø—è—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è —Å—Ä–µ–∑, –Ω–æ –≤ —ç—Ç–æ—Ç —Ä–∞–∑ —Ç–æ—á–∫–æ–π —Å—Ç–∞—Ä—Ç–∞
  —Å—Ç–∞–Ω–µ—Ç –∏–Ω–¥–µ–∫—Å 3 (`'https://example.com/4'`), –∞ –¥–ª–∏–Ω–∞ —Å—Ä–µ–∑–∞ –ø—Ä–µ–∂–Ω—è—è ‚Äî 3.
* –†–µ–∑—É–ª—å—Ç–∞—Ç–æ–º —Å—Ç–∞–Ω–µ—Ç —Å–ª–µ–¥—É—é—â–∏–π –º–∞—Å—Å–∏–≤:

```php
$urls = [
  'https://example.com/4',
  'https://example.com/5',
  'https://example.com/6',
];
```

* –¢–∞–∫ –∫–∞–∫ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –æ–ø—è—Ç—å –Ω–µ –ø—É—Å—Ç–æ–π, –º–µ—Ç–æ–¥ –±—É–¥–µ—Ç –≤—ã–∑–≤–∞–Ω –ø–æ–≤—Ç–æ—Ä–Ω–æ. –í —ç—Ç–æ—Ç
  —Ä–∞–∑ `$cursor` –±—É–¥–µ—Ç –∏–º–µ—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ `'https://example.com/6'`
* `$cursor_position` –ø–æ–ª—É—á–∏—Ç –∑–Ω–∞—á–µ–Ω–∏–µ 5.
* –ó–∞—Ç–µ–º –±—É–¥–µ—Ç –ø–æ–ø—ã—Ç–∫–∞ —Å–¥–µ–ª–∞—Ç—å —Å—Ä–µ–∑, –Ω–∞ 3 —ç–ª–µ–º–µ–Ω—Ç–∞, –Ω–∞—á–∏–Ω–∞—è —Å –∏–Ω–¥–µ–∫—Å–∞ 6. –ù–æ —Ç–∞–º
  —É–∂–µ –Ω–µ—Ç –¥–∞–Ω–Ω—ã—Ö, –∞ –∑–Ω–∞—á–∏—Ç, —Å—Ä–µ–∑ –ø–æ–ª—É—á–∏—Ç—Å—è –ø—É—Å—Ç—ã–º –∏ —ç—Ç–æ –±—É–¥–µ—Ç —Ñ–∏–Ω–∞–ª—å–Ω—ã–π –≤—ã–∑–æ–≤.

–¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º –º—ã –ø–æ–¥–≥–æ—Ç–æ–≤–∏–ª–∏ –¥–≤–∞ —ç–ª–µ–º–µ–Ω—Ç–∞ –¥–ª—è –ø–∞–∫–µ—Ç–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å —Ç—Ä–µ–º—è
–∞–¥—Ä–µ—Å–∞–º–∏ –≤ –∫–∞–∂–¥–æ–π.

##### ::loadMultiple()

–ú–µ—Ç–æ–¥ `::loadMultiple()` —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç –¥–∞–Ω–Ω—ã–µ –¥–ª—è –ø—Ä–æ–≥—Ä–µ–≤–∞. –†–µ–∑—É–ª—å—Ç–∞—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
–¥–∞–Ω–Ω–æ–≥–æ –º–µ—Ç–æ–¥–∞ ‚Äî –º–∞—Å—Å–∏–≤ —Å –¥–∞–Ω–Ω—ã–º–∏, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –ø–µ—Ä–µ–¥–∞–Ω –≤ `::warmMultiple()`.

–ú–µ—Ç–æ–¥ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –æ–¥–∏–Ω –∞—Ä–≥—É–º–µ–Ω—Ç:

* `$ids`: –ú–∞—Å—Å–∏–≤ —Å ID —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –¥–ª—è –ø—Ä–æ–≥—Ä–µ–≤–∞ –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω–Ω—ã–π
  –≤ `::buildIdsBatch()`. –í –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –ø–ª–∞–≥–∏–Ω–∞, ID –º–æ–≥—É—Ç
  –±—ã—Ç—å —á–µ–º —É–≥–æ–¥–Ω–æ. –ù–∞–ø—Ä–∏–º–µ—Ä, –≤ —Å–ª—É—á–∞–µ —Å –ø–ª–∞–≥–∏–Ω–æ–º `entity` ‚Äî —ç—Ç–æ –±—É–¥—É—Ç ID
  —Å—É—â–Ω–æ—Å—Ç–µ–π, –∞ –≤ —Å–ª—É—á–∞–µ –ø–ª–∞–≥–∏–Ω–æ–≤ `cdn` –∏ `sitemap` —ç—Ç–æ URL-–∞–¥—Ä–µ—Å–∞.

–î–∞–Ω–Ω—ã–π –º–µ—Ç–æ–¥ –º–æ–∂–µ—Ç –±—ã—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω (—Å–º. `warmer_cdn` –∏ `cdn`) –∫–∞–∫ —Ñ–∏–ª—å—Ç—Ä
–≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –Ω–∞ –≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å, –ø—Ä–µ–∂–¥–µ —á–µ–º –æ–Ω–∏ –±—É–¥—É—Ç –ø–µ—Ä–µ–¥–∞–Ω—ã –Ω–∞ —Ä–∞–∑–æ–≥—Ä–µ–≤.

##### ::warmMultiple()

–ú–µ—Ç–æ–¥ `::warmMultiple()` –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ –∑–∞ –ø—Ä–æ–≥—Ä–µ–≤. –í –¥–∞–Ω–Ω–æ–º –º–µ—Ç–æ–¥–µ –≤—ã
–¥–æ–ª–∂–Ω—ã –Ω–∞–ø–∏—Å–∞—Ç—å –∫–æ–¥ –¥–ª—è –ø—Ä–æ–≥—Ä–µ–≤–∞ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç–µ–π.

–ú–µ—Ç–æ–¥ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –æ–¥–∏–Ω –∞—Ä–≥—É–º–µ–Ω—Ç:

* `$items`: –ú–∞—Å—Å–∏–≤ —Å –¥–∞–Ω–Ω—ã–º–∏ –¥–ª—è –ø—Ä–æ–≥—Ä–µ–≤–∞ –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω–Ω—ã–π `::loadMultiple()`.

##### ::isActive()

–ú–µ—Ç–æ–¥ `::isActive()` –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ —Ç–æ, –º–æ–∂–Ω–æ –ª–∏ –Ω–∞ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å
–æ—á–µ—Ä–µ–¥—å –¥–ª—è –ø—Ä–æ–≥—Ä–µ–≤–∞ –∏—Å–ø–æ–ª—å–∑—É—è —Ç–µ–∫—É—â–∏–π –ø–ª–∞–≥–∏–Ω.

–î–∞–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–∏ –æ—á–µ—Ä–µ–¥–µ–π –Ω–∞ –ø—Ä–æ–≥—Ä–µ–≤ –ø—Ä–∏
–ø–æ–º–æ—â–∏ Cron –æ–ø–µ—Ä–∞—Ü–∏–π. –≠—Ç–æ –∑–Ω–∞—á–∏—Ç, —á—Ç–æ –ø—Ä–∏ –≤—ã–∑–æ–≤–µ –ø—Ä–æ–≥—Ä–µ–≤–∞ –ø—Ä–∏ –ø–æ–º–æ—â–∏ Drush
–∫–æ–º–∞–Ω–¥—ã –∏–ª–∏ –∏–∑ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞, –∑–Ω–∞—á–µ–Ω–∏–µ —ç—Ç–æ–≥–æ –º–µ—Ç–æ–¥–∞ –Ω–∏ –Ω–∞ —á—Ç–æ –Ω–µ
–≤–ª–∏—è–µ—Ç.

##### ::markAsEnqueued()

–ú–µ—Ç–æ–¥ `::markAsEnqueued()` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Å—Ä–µ–∑–∞ `::buildIdsBatch()`
–≤ –æ—á–µ—Ä–µ–¥—å –Ω–∞ –ø–∞–∫–µ—Ç–Ω—É—é –æ–±—Ä–∞–±–æ—Ç–∫—É.

**–í–∞–∂–Ω–æ!** –ú–µ—Ç–æ–¥ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –Ω–∞ –∫–∞–∂–¥—ã–π —Å—Ä–µ–∑. –¢–æ –µ—Å—Ç—å, –µ—Å–ª–∏ –≤–∞—à –ø–ª–∞–≥–∏–Ω –≥–æ—Ç–æ–≤–∏—Ç 10
—Å—Ä–µ–∑–æ–≤, –∑–Ω–∞—á–∏—Ç —ç—Ç–æ 10 —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –æ—á–µ—Ä–µ–¥–∏, –∞ —Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ, –¥–∞–Ω–Ω—ã–π –º–µ—Ç–æ–¥ –±—É–¥–µ—Ç
–≤—ã–∑–≤–∞–Ω 10 —Ä–∞–∑!

##### ::addMoreConfigurationFormElements()

–ú–µ—Ç–æ–¥ `::addMoreConfigurationFormElements()` –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è —Ç–æ–≥–æ —á—Ç–æ–±—ã –≤—ã
–º–æ–≥–ª–∏ —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å —Ñ–æ—Ä–º—É –Ω–∞—Å—Ç—Ä–æ–µ–∫ –¥–ª—è –ø–ª–∞–≥–∏–Ω–∞.

–î–∞–Ω–Ω—ã–π –º–µ—Ç–æ–¥ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ —Ç–æ—á–Ω–æ—Å—Ç–∏
–∫–∞–∫ `PluginFormInterface::buildConfigurationForm()`. –û–Ω –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –≤ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
–¥–∞–Ω–Ω–æ–≥–æ –º–µ—Ç–æ–¥–∞ –±–∞–∑–æ–≤—ã–º –ø–ª–∞–≥–∏–Ω–æ–º. –≠—Ç–æ –∑–Ω–∞—á–∏—Ç, —á—Ç–æ –≤–∞–º —Ç–∞–∫–∂–µ
–¥–æ—Å—Ç—É–ø–Ω—ã `::validateConfigurationForm()` –∏ `::submitConfigurationForm()`, –Ω–æ
–¥–æ–±–∞–≤–ª—è—Ç—å —Å–≤–æ–∏ —ç–ª–µ–º–µ–Ω—Ç—ã –Ω—É–∂–Ω–æ –ø—Ä–∏ –ø–æ–º–æ—â–∏ –≤—ã–¥–µ–ª–µ–Ω–Ω–æ–≥–æ –º–µ—Ç–æ–¥–∞, –∞ –Ω–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–≥–æ,
—Ç–∞–∫ –∫–∞–∫ –º–æ–¥—É–ª—å –¥–æ–±–∞–≤–ª—è–µ—Ç —Å–≤–æ—é —Ä–∞–∑–º–µ—Ç–∫—É.

### WarmerPluginBase ‚Äî –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–π –ø–ª–∞–≥–∏–Ω

–ú–æ–¥—É–ª—å –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—É—é —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é –ø–ª–∞–≥–∏–Ω–∞, –∫–æ—Ç–æ—Ä—É—é –≤—ã –¥–æ–ª–∂–Ω—ã —Ä–∞—Å—à–∏—Ä—è—Ç—å
–ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Å–≤–æ–∏—Ö –ø–ª–∞–≥–∏–Ω–æ–≤ ‚Äî `\Drupal\warmer\Plugin\WarmerPluginBase`.

–î–∞–Ω–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç:

* –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é:
  * `frequency`: –ß–∞—Å—Ç–æ—Ç–∞ —Ä–µ–≥—É–ª—è—Ä–Ω—ã—Ö –ø—Ä–æ–≥—Ä–µ–≤–æ–≤ –ø–ª–∞–≥–∏–Ω–æ–º. –ó–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 5
    –º–∏–Ω—É—Ç.
  * `batchSize`: –†–∞–∑–º–µ—Ä —ç–ª–µ–º–µ–Ω—Ç–∞ –æ—á–µ—Ä–µ–¥–∏. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é 50.
* –§–æ—Ä–º—É –Ω–∞—Å—Ç—Ä–æ–µ–∫ –¥–ª—è –¥–∞–Ω–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –∏ –∏—Ö –≤–∞–ª–∏–¥–∞—Ü–∏—é.
* –í—ã–∑–æ–≤ —Ñ–æ—Ä–º—ã –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ø–ª–∞–≥–∏–Ω–∞.
* –†–µ–∞–ª–∏–∑–∞—Ü–∏—é `::getFrequency()` –∫–æ—Ç–æ—Ä–∞—è –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ `frequency`.
* –†–µ–∞–ª–∏–∑–∞—Ü–∏—é `::getBatchSize()` –∫–æ—Ç–æ—Ä–∞—è –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ `batchSize`.
* –†–µ–∞–ª–∏–∑–∞—Ü–∏—é `::isActive()` –≤–æ–∑–≤—Ä–∞—â–∞—é—â—É—é `TRUE`, –µ—Å–ª–∏ —Å –º–æ–º–µ–Ω—Ç–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–π
  –æ—á–µ—Ä–µ–¥–∏ —Å –¥–∞–Ω–Ω—ã–º –ø–ª–∞–≥–∏–Ω–æ–º –ø—Ä–æ—à–ª–æ –≤—Ä–µ–º—è –≤–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–µ `::getFrequency()`.
* –†–µ–∞–ª–∏–∑–∞—Ü–∏—é `::markAsEnqueued()` –∫–æ—Ç–æ—Ä–∞—è –ø–æ–º–µ—á–∞–µ—Ç –≤—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –∑–∞–ø—É—Å–∫–∞
  –æ—á–µ—Ä–µ–¥–∏ –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ `::isActive()`.

–î–∞–Ω–Ω—ã–π –ø–ª–∞–≥–∏–Ω –¥–µ–ª–∞–µ—Ç –∑–∞ –≤–∞—Å –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ —Ä–∞–±–æ—Ç—ã. –í–∞–º –ª–∏—à—å –æ—Å—Ç–∞–µ—Ç—Å—è –æ–ø–∏—Å–∞—Ç—å
–≤—ã–±–æ—Ä–∫—É –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –ø—Ä–æ–≥—Ä–µ–≤–∞, –∏—Ö –∑–∞–≥—Ä—É–∑–∫—É –∏ –Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ –ø—Ä–æ–≥—Ä–µ–≤.

## Drush –∫–æ–º–∞–Ω–¥—ã

–ú–æ–¥—É–ª—å –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –¥–≤–µ Drush –∫–æ–º–∞–Ω–¥—ã, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –ø–æ–º–æ—á—å –≤–∞–º —Å –ø—Ä–æ–≥—Ä–µ–≤–æ–º –ø—Ä–∏
—Ä–∞–±–æ—Ç–µ –∏–∑ CLI. –≠—Ç–æ –æ—á–µ–Ω—å –ø–æ–ª–µ–∑–Ω–æ –¥–ª—è —Ç–µ—Ö, —É –∫–æ–≥–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π, –≤–µ–¥—å
–º–æ–∂–Ω–æ —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ —Å–±—Ä–æ—Å–∞ –∫–µ—à–∞ –Ω–∞—á–∞—Ç—å –ø—Ä–æ–≥—Ä–µ–≤!

### warmer:list

–ö–æ–º–∞–Ω–¥–∞ `warmer:list` –≤—ã–≤–æ–¥–∏—Ç —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –ø–ª–∞–≥–∏–Ω–æ–≤ –¥–ª—è –ø—Ä–æ–≥—Ä–µ–≤–∞ —Å
–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –Ω–∏—Ö.

```bash
 --------- ----------------- ---------------------------------------------------------------------------------------------------------------------------------- ----------- ------------ 
  ID        Label             Description                                                                                                                        Frequency   Batch Size  
 --------- ----------------- ---------------------------------------------------------------------------------------------------------------------------------- ----------- ------------ 
  sitemap   CDN via Sitemap   Collects the URLs to warm from the sitemap. Then uses the CDN warmer for those.                                                    300         50          
  cdn       CDN               Executes HTTP requests to warm the edge caches. It is useful without a CDN as well, as it will also warm Varnish and Page Cache.   300         50           
  entity    Entity            Loads entities from the selected entity types & bundles to warm the entity cache.                                                  300         50          
 --------- ----------------- ---------------------------------------------------------------------------------------------------------------------------------- ----------- ------------ 

```

### warmer:enqueue

–ö–æ–º–∞–Ω–¥–∞ `warmer:enqueue` –∑–∞–ø—É—Å–∫–∞–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å —Å–±–æ—Ä–∫–∏ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –æ—á–µ—Ä–µ–¥–∏ –¥–ª—è –ø—Ä–æ–≥—Ä–µ–≤–∞
–∏—Å–ø–æ–ª—å–∑—É—è –æ–¥–∏–Ω –∏–ª–∏ –±–æ–ª–µ–µ –ø–ª–∞–≥–∏–Ω–æ–≤.

–ü—Ä–∏–º–µ—Ä —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è –æ—á–µ—Ä–µ–¥–∏ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø–ª–∞–≥–∏–Ω–∞:

```bash
drush warmer:enqueue cdn
```

–ü—Ä–∏–º–µ—Ä —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è –æ—á–µ—Ä–µ–¥–∏ –¥–ª—è –¥–≤—É—Ö –ø–ª–∞–≥–∏–Ω–æ–≤:

```bash
drush warmer:enqueue cdn,sitemap
```

–î–∞–Ω–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞ —Ç–∞–∫–∂–µ –∏–º–µ–µ—Ç –æ–¥–Ω—É –æ–ø—Ü–∏—é ‚Äî `--run-queue`. –ï—Å–ª–∏ —É–∫–∞–∑–∞–Ω–∞ –¥–∞–Ω–Ω–∞—è –æ–ø—Ü–∏—è
–ø—Ä–∏ –≤—ã–∑–æ–≤–µ, —Ç–æ –ø–æ—Å–ª–µ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è –æ—á–µ—Ä–µ–¥–∏ –∏–∑ —É–∫–∞–∑–∞–Ω–Ω—ã—Ö –ø–ª–∞–≥–∏–Ω–æ–≤ –æ–Ω–∞ –±—É–¥–µ—Ç
–∑–∞–ø—É—â–µ–Ω–∞. –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –±—É–¥–µ—Ç –¥–ª–∏—Ç—å—Å—è –¥–æ —Ç–µ—Ö –ø–æ—Ä, –ø–æ–∫–∞ –æ—á–µ—Ä–µ–¥—å –Ω–µ –æ–ø—É—Å—Ç–µ–µ—Ç –∏–ª–∏ –Ω–µ
–ø—Ä–æ–π–¥—ë—Ç 99999999 —Å–µ–∫—É–Ω–¥ –∏–ª–∏ –ø—Ä–æ—Ü–µ—Å—Å –Ω–µ –±—É–¥–µ—Ç –∑–∞–∫—Ä—ã—Ç –ø–æ –≤–Ω–µ—à–Ω–∏–º –ø—Ä–∏—á–∏–Ω–∞–º.

–ü—Ä–∏–º–µ—Ä —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—á–µ—Ä–µ–¥–∏ –Ω–∞ –ø—Ä–æ–≥—Ä–µ–≤ –¥–ª—è –ø–ª–∞–≥–∏–Ω–∞ –∏ –∑–∞–ø—É—Å–∫–∞ –ø—Ä–æ–≥—Ä–µ–≤–∞
–Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ:

```bash
drush warmer:enqueue cdn --run-queue
```

–≠—Ç–æ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –æ–ø–∞—Å–Ω–∞—è –æ–ø—Ü–∏—è. –ï—Å–ª–∏ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –æ—á–µ—Ä–µ–¥–∏ –æ—á–µ–Ω—å –º–Ω–æ–≥–æ, —ç—Ç–æ
–ø–µ—Ä–º–∞–Ω–µ–Ω—Ç–Ω–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é, –ø—Ä–æ–≥—Ä–µ–≤ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Å
–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º [@QueueWorker][drupal-8-queue-worker-plugin] –∏ —ç—Ç–æ—Ç –ø–æ–¥—Ö–æ–¥ –±–æ–ª–µ–µ —â–∞–¥—è—â–∏–π –¥–ª—è
—Å–µ—Ä–≤–µ—Ä–∞.

–ï—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ ¬´–ø–Ω—É—Ç—å¬ª –ø—Ä–æ–≥—Ä–µ–≤, —á—Ç–æ–±—ã –Ω–µ –¥–æ–∂–∏–¥–∞—Ç—å—Å—è –æ—á–µ—Ä–µ–¥–Ω–æ–≥–æ –∫—Ä–æ–Ω–∞, –≤—ã –º–æ–∂–µ—Ç–µ
—ç—Ç–æ —Å–¥–µ–ª–∞—Ç—å —à—Ç–∞—Ç–Ω—ã–º–∏ –∫–æ–º–∞–Ω–¥–∞–º–∏ –¥–ª—è –æ—á–µ—Ä–µ–¥–µ–π. –ù–∞–ø—Ä–∏–º–µ—Ä, —á—Ç–æ–±—ã —Å—Ä–∞–∑—É –ø—Ä–æ–≥—Ä–µ—Ç—å
–ø–µ—Ä–≤—ã–µ 100 —ç–ª–µ–º–µ–Ω—Ç–æ–≤, –∞ –∑–∞—Ç–µ–º –ø—Ä–æ–≥—Ä–µ–≤–∞—Ç—å –≤ —Ñ–æ–Ω–µ, –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å–¥–µ–ª–∞—Ç—å —Å–ª–µ–¥—É—é—â–µ–µ:

```bash
drush warmer:enqueue entity
drush queue:run warmer --items-limit=100
```

–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ, —á—Ç–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –æ—á–µ—Ä–µ–¥–∏ 100. –ï—Å–ª–∏ —É –≤–∞—Å 50 –∑–Ω–∞—á–µ–Ω–∏–π –Ω–∞ –æ–¥–∏–Ω
—ç–ª–µ–º–µ–Ω—Ç –æ—á–µ—Ä–µ–¥–∏, —Ç–æ —ç—Ç–æ 5000 –∑–Ω–∞—á–µ–Ω–∏–π. –£—á–∏—Ç—ã–≤–∞–π—Ç–µ —ç—Ç–æ, –∫–æ–≥–¥–∞ –ø—Ä–æ–≥—Ä–µ–≤–∞–µ—Ç–µ —Ç—è–∂–µ–ª—ã–µ
–¥–∞–Ω–Ω—ã–µ. –ü—Ä–æ–≥—Ä–µ–≤ 5000 —Å—É—â–Ω–æ—Å—Ç–µ–π ‚Äî —ç—Ç–æ –æ—á–µ–Ω—å –±—ã—Å—Ç—Ä–æ, –ø—Ä–æ–≥—Ä–µ–≤ 5000 —Å—Ç—Ä–∞–Ω–∏—Ü ‚Äî –Ω–µ—Ç.
–ü–æ–¥–æ–±–Ω—ã–π –≤—ã–∑–æ–≤ –º–æ–∂–µ—Ç –∑–∞–≥—Ä—É–∑–∏—Ç—å —Å–µ—Ä–≤–µ—Ä –Ω–∞ 100% –Ω–∞ –≤—Ä–µ–º—è –ø—Ä–æ–≥—Ä–µ–≤–∞. –í—Å—ë —Ö–æ—Ä–æ—à–æ –≤
–º–µ—Ä—É!

–ï—Å–ª–∏ –≤—ã —Ç–æ—á–Ω–æ –∑–Ω–∞–µ—Ç–µ –∫–∞–∫–∏–µ –ø—Ä–æ–≥—Ä–µ–≤—ã –±—ã—Å—Ç—Ä—ã–µ, –∞ –∫–∞–∫–∏–µ –º–µ–¥–ª–µ–Ω–Ω—ã–µ, –≤—ã –º–æ–∂–µ—Ç–µ —ç—Ç–æ
—É—á–∏—Ç—ã–≤–∞—Ç—å –ø—Ä–∏ –ø—Ä–æ–≥—Ä–µ–≤–µ. –†–∞—Å—Å–º–æ—Ç—Ä–∏–º:

```bash
drush warmer:enqueue entity --run-queue
drush warmer:enqueue cdn
drush queue:run warmer --items-limit=10
```

–ü—Ä–∏–º–µ—Ä –≤—ã—à–µ, —Å–Ω–∞—á–∞–ª–∞ —Å–æ–∑–¥–∞—Å—Ç –æ—á–µ—Ä–µ–¥—å –¥–ª—è –ø—Ä–æ–≥—Ä–µ–≤–∞ —Å—É—â–Ω–æ—Å—Ç–µ–π –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç –µ—ë
–ø–æ–ª–Ω–æ—Å—Ç—å—é. –ê –∑–∞—Ç–µ–º, —Å—Ñ–æ—Ä–º–∏—Ä—É–µ—Ç –æ—á–µ—Ä–µ–¥—å CDN –Ω–∞ –ø—Ä–æ–≥—Ä–µ–≤, –∏ –ø—Ä–æ–≥—Ä–µ–µ—Ç –ø–µ—Ä–≤—ã–µ 10
—ç–ª–µ–º–µ–Ω—Ç–æ–≤ (500 —Å—Ç—Ä–∞–Ω–∏—Ü), –æ—Å—Ç–∞–ª—å–Ω–æ–µ –±—É–¥–µ—Ç –ø–æ –∫—Ä–æ–Ω—É.

## –ö–∞—Ä–∞—É–ª, –ø–æ–∂–∞—Ä! üî•

–£ –º–æ–¥—É–ª—è –µ—Å—Ç—å –æ—á–µ–Ω—å –Ω–µ–æ—á–µ–≤–∏–¥–Ω–∞—è –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å, –∏–≥–Ω–æ—Ä–∏—Ä—É—è –∫–æ—Ç–æ—Ä—É—é, –≤–º–µ—Å—Ç–æ
¬´–ø—Ä–æ–≥—Ä–µ–≤–∞¬ª –≤—ã –º–æ–∂–µ—Ç–µ –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞—Ç—å ¬´–ø–æ–∂–∞—Ä¬ª. ¬´–ù–µ –±–∞–≥, –∞ —Ñ–∏—á–∞¬ª –∫—Ä–æ–µ—Ç—Å—è –≤ –æ—Ç–≤–µ—Ç–µ –Ω–∞
–≤–æ–ø—Ä–æ—Å: ¬´–ê –∫—Ç–æ —á–∏—Å—Ç–∏—Ç –æ—á–µ—Ä–µ–¥—å?¬ª. –î–µ–ª–æ —Ç–æ –≤ —Ç–æ–º, —á—Ç–æ –æ—á–µ—Ä–µ–¥—å –Ω–∏–∫—Ç–æ –∏ –Ω–µ —á–∏—Å—Ç–∏—Ç!
ü§î

–ò –≤–æ—Ç –ø—Ä–æ—Å—Ç–æ–π –ø—Ä–∏–º–µ—Ä, –∫–∞–∫, –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω–æ–π –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏, –º–æ–∂–µ—Ç –ø—Ä–µ–≤—Ä–∞—Ç–∏—Ç—å—Å—è
–≤ —Å–Ω–µ–∂–Ω—ã–π –∫–æ–º:

* –£ –Ω–∞—Å –µ—Å—Ç—å 1000 —Å—Ç—Ä–∞–Ω–∏—Ü –Ω–∞ –ø—Ä–æ–≥—Ä–µ–≤. –ü–æ 50 –Ω–∞ —ç–ª–µ–º–µ–Ω—Ç –æ—á–µ—Ä–µ–¥–∏. –í—ã—Ö–æ–¥–∏—Ç ‚Äî 20
  —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –æ—á–µ—Ä–µ–¥–∏, –≤ –∫–∞–∂–¥–æ–º –ø–æ 50 –∞–¥—Ä–µ—Å–æ–≤.
* –ü—Ä–µ–¥–ø–æ–ª–æ–∂–∏–º, —á—Ç–æ –ø—Ä–æ–≥—Ä–µ–≤ 1 —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∑–∞–Ω–∏–º–∞–µ—Ç 1 —Å–µ–∫—É–Ω–¥—É, –∏ –æ–Ω–∏ –≤—ã–∑—ã–≤–∞—é—Ç—Å—è
  –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ (`cdn` –ø—Ä–æ–≥—Ä–µ–≤–∞–µ—Ç –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ).
* –ö—Ä–æ–Ω –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —Ä–∞–∑ –≤ –º–∏–Ω—É—Ç—É. –í—ã—Ö–æ–¥–∏—Ç —á—Ç–æ –∑–∞ 1 –º–∏–Ω—É—Ç—É –º—ã —É—Å–ø–µ–µ–º –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å 1
  —ç–ª–µ–º–µ–Ω—Ç, –∏–ª–∏ 50 –∞–¥—Ä–µ—Å–æ–≤ –∏–∑ 1000. –í—Å–µ–≥–æ –Ω–∞–º –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è 20 –º–∏–Ω—É—Ç –Ω–∞ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π
  –ø—Ä–æ–≥—Ä–µ–≤.
* **–§–∞—Ç–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞** ‚Äî —ç—Ç–æ –¥–µ–ª–∞—Ç—å –ø—Ä–æ–≥—Ä–µ–≤ –¥–∞–Ω–Ω—ã–º –ø–ª–∞–≥–∏–Ω–æ–º —á–∞—â–µ —á–µ–º
  –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤—Ä–µ–º–µ–Ω–∏ –¥–ª—è –µ–≥–æ –ø—Ä–æ–≥—Ä–µ–≤–∞. –ù–∞–ø—Ä–∏–º–µ—Ä, 10 –º–∏–Ω—É—Ç. **–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ**
  —á—Ç–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤–æ–≤—Å–µ 5 –º–∏–Ω—É—Ç!

–í –∏—Ç–æ–≥–µ –ø–ª–∞–≥–∏–Ω –±—É–¥–µ—Ç —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å 20 —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –æ—á–µ—Ä–µ–¥–∏ –ø–æ 50 –∞–¥—Ä–µ—Å–æ–≤ –∫–∞–∂–¥—ã–µ 10
–º–∏–Ω—É—Ç. –ù–æ –ø—Ä–æ–≥—Ä–µ–≤ –∑–∞–Ω–∏–º–∞–µ—Ç 20 –º–∏–Ω—É—Ç. –ü–æ–ª—É—á–∞–µ—Ç—Å—è, –∫–æ–≥–¥–∞ –±—É–¥–µ—Ç —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å—Å—è
—Å–ª–µ–¥—É—é—â–∞—è –æ—á–µ—Ä–µ–¥—å, –ø–ª–∞–≥–∏–Ω —É—Å–ø–µ–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å —Ç–æ–ª—å–∫–æ –ø–æ–ª–æ–≤–∏–Ω—É –¥–∞–Ω–Ω—ã—Ö ‚Äî 500
–∞–¥—Ä–µ—Å–æ–≤. –í—ã—Ö–æ–¥–∏—Ç —Å–ª–µ–¥—É—é—â–µ–µ:

* –ù–∞ –≤—Ç–æ—Ä–æ–π –≤—ã–∑–æ–≤ —É –Ω–∞—Å –±—É–¥–µ—Ç –æ—á–µ—Ä–µ–¥—å –∏–∑ 30 —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –∏–ª–∏ 1500 –∞–¥—Ä–µ—Å–æ–≤.
* –ù–∞ —Ç—Ä–µ—Ç–∏–π –≤—ã–∑–æ–≤ —É –Ω–∞—Å –±—É–¥–µ—Ç –æ—á–µ—Ä–µ–¥—å –∏–∑ 40 —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –∏–ª–∏ 2000 –∞–¥—Ä–µ—Å–æ–≤.
* –ù–∞ 144 –≤—ã–∑–æ–≤ (—Å–ø—É—Å—Ç—è —Å—É—Ç–∫–∏) —É –Ω–∞—Å –±—É–¥–µ—Ç –æ—á–µ—Ä–µ–¥—å –∏–∑ 1450 —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –∏–ª–∏ 72 500
  –∞–¥—Ä–µ—Å–æ–≤!

–í–∏—à–µ–Ω–∫–æ–π –Ω–∞ —Ç–æ—Ä—Ç–µ –±—É–¥–µ—Ç —Ç–æ, —á—Ç–æ –æ—á–µ—Ä–µ–¥—å –¥–ª—è –≤—Å–µ—Ö –ø–ª–∞–≥–∏–Ω–æ–≤ –æ–±—â–∞—è ‚Äî `warmer`. –ê
–∑–Ω–∞—á–∏—Ç, –ø—Ä–æ–±–ª–µ–º–∞ –º–æ–∂–µ—Ç –æ–±–æ—Å—Ç—Ä–∏—Ç—å—Å—è –æ—á–µ–Ω—å –±—ã—Å—Ç—Ä–æ –∏ –≤—ã–π—Ç–∏ –∏–∑-–ø–æ–¥ –∫–æ–Ω—Ç—Ä–æ–ª—è.
–¢–∞–±–ª–∏—Ü–∞ `queue` –±—É–¥–µ—Ç —Ä–∞–∑–¥—É–≤–∞—Ç—å—Å—è –≤—Å—ë –±–æ–ª—å—à–µ –∏ –±–æ–ª—å—à–µ, –∏ —á–µ–º —á–∞—â–µ –∑–∞–ø—É—Å–∫ –∏
–±–æ–ª—å—à–µ –¥–∞–Ω–Ω—ã—Ö –Ω–∞ –ø—Ä–æ–≥—Ä–µ–≤, –∞ —Ç–∞–∫–∂–µ, —á–µ–º –æ–Ω –º–µ–¥–ª–µ–Ω–Ω–µ–µ, —Ç–µ–º –±—ã—Å—Ç—Ä–µ–µ –≤—ã —Å—Ç–æ–ª–∫–Ω—ë—Ç–µ—Å—å
—Å –¥–∞–Ω–Ω–æ–π –ø—Ä–æ–±–ª–µ–º–æ–π.

–≠—Ç–æ –º–æ–∂–µ—Ç –ø–æ–∫–∞–∑–∞—Ç—å—Å—è –Ω–µ —Å–ª–∏—à–∫–æ–º —Å—Ç—Ä–∞—à–Ω—ã–º –Ω–∞ –ø–µ—Ä–≤—ã–π –≤–∑–≥–ª—è–¥, –≤—Å–µ–≥–æ-—Ç–æ 1450 –∑–∞–ø–∏—Å–µ–π
–≤ –ë–î –∑–∞ —Å—É—Ç–∫–∏. –ù–æ –ø—Ä–æ–±–ª–µ–º–∞ –±—É–¥–µ—Ç –Ω–µ —Å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é —ç—Ç–æ–π —Ç–∞–±–ª–∏—Ü—ã, –∞ —Å —Ç–µ–º,
—á—Ç–æ –æ–Ω–∞ —Å–æ –≤—Ä–µ–º–µ–Ω–µ–º –≤—ã–∂—Ä–µ—Ç –≤—Å—é —Å–≤–æ–±–æ–¥–Ω—É—é –ø–∞–º—è—Ç—å —Å–µ—Ä–≤–µ—Ä–∞ –∏ –æ–Ω –ø—Ä–æ—Å—Ç–æ-–Ω–∞–ø—Ä–æ—Å—Ç–æ
–¥–∞—Å—Ç —Å–±–æ–π.

**–ö–∞–∫ –Ω–µ –¥–æ–ø—É—Å—Ç–∏—Ç—å?** –í—Å—ë –ø—Ä–æ—Å—Ç–æ ‚Äî —É—á–∏—Ç—ã–≤–∞–π—Ç–µ —ç—Ç–æ –ø–æ–≤–µ–¥–µ–Ω–∏–µ, –∏ –¥—É–º–∞–π—Ç–µ –∫–æ–≥–¥–∞
–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç–µ —á–∞—Å—Ç–æ—Ç—É —Ä–µ–≥—É–ª—è—Ä–Ω–æ–≥–æ –ø—Ä–æ–≥—Ä–µ–≤–∞ –¥–ª—è –ø–ª–∞–≥–∏–Ω–æ–≤. –ß–∞—Å—Ç–æ—Ç–∞ —Ä–µ–≥—É–ª—è—Ä–Ω–æ–≥–æ
–ø—Ä–æ–≥—Ä–µ–≤–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –±–æ–ª—å—à–µ, —á–µ–º –≤—Ä–µ–º—è, —Ç—Ä–µ–±—É–µ–º–æ–µ **–≤—Å–µ–º –∞–∫—Ç–∏–≤–Ω—ã–º –ø–ª–∞–≥–∏–Ω–∞–º** –Ω–∞
–ø—Ä–æ–≥—Ä–µ–≤. –ï—Å–ª–∏ —Å—Ç—Ä–∞–Ω–∏—Ü –æ—á–µ–Ω—å –º–Ω–æ–≥–æ –∏ –≤—ã –∏—Ö –≤—Å–µ –ø—Ä–æ–≥—Ä–µ–≤–∞–µ—Ç–µ, –Ω–µ –±–æ–π—Ç–µ—Å—å –≤—ã—Å—Ç–∞–≤–ª—è—Ç—å
–±–æ–ª—å—à–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è.

–¢–∞–∫ –∂–µ –¥–µ—Ä–∂–∏—Ç–µ –≤ —É–º–µ —Ç–æ, —á—Ç–æ [Queue Worker][drupal-8-queue-worker-plugin] –ø–ª–∞–≥–∏–Ω—ã,
–≤—ã–ø–æ–ª–Ω—è–µ–º—ã–µ –ø–æ Drupal –∫—Ä–æ–Ω—É, –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç –æ—á–µ—Ä–µ–¥–∏ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ –∏ –≤ —Ç–∞–∫–æ–º
—Å–ª—É—á–∞–µ, –ª–∏–±–æ –Ω—É–∂–Ω–æ –≤—ã–Ω–æ—Å–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ (—Å–≤–æ–∏ –∏–ª–∏ –º–æ–¥—É–ª—è) –∏–∑ –∫—Ä–æ–Ω–∞ –∏ –≤–µ—à–∞—Ç—å
–≤—ã–∑–æ–≤ –Ω–∞ —Å–∏—Å—Ç–µ–º–Ω—ã–π –∫—Ä–æ–Ω —á–µ—Ä–µ–∑ Drush, –ª–∏–±–æ —É—á–∏—Ç—ã–≤–∞—Ç—å –æ–±—â–µ–µ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –≤—Å–µ—Ö
–æ—á–µ—Ä–µ–¥–µ–π, –∞ –Ω–µ —Ç–æ–ª—å–∫–æ –æ—Ç Warmer –º–æ–¥—É–ª—è.

**–í –ø—Ä–æ—Ü–µ—Å—Å–µ –¥–µ–ø–ª–æ—è**, –ø–æ—Å–ª–µ —Ç–æ–≥–æ –∫–∞–∫ –≤—ã —Å–¥–µ–ª–∞–ª–∏ —Å–±—Ä–æ—Å –∫–µ—à–∞ –ø—Ä–∏
–ø–æ–º–æ—â–∏ `drush cache:rebuild`, —è –±—ã —Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–ª —Å–Ω–∞—á–∞–ª–∞ —á–∏—Å—Ç–∏—Ç—å
–æ—á–µ—Ä–µ–¥—å `warmer`, –∞ —Ç–æ–ª—å–∫–æ –∑–∞—Ç–µ–º —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å –µ—ë. –¢–∞–∫ –≤—ã —É–¥–∞–ª–∏—Ç–µ —Ç–æ —á—Ç–æ –Ω–µ —É—Å–ø–µ–ª–æ
–ø—Ä–æ–≥—Ä–µ—Ç—å—Å—è, –≤–µ–¥—å —ç—Ç–æ –∏ –Ω–µ –≤–∞–∂–Ω–æ, –≤—ã —Ç–æ–ª—å–∫–æ —á—Ç–æ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–±—Ä–æ—Å–∏–ª–∏ –∫–µ—à –∏ –ø—Ä–æ–≥—Ä–µ–≤
–Ω—É–∂–Ω–æ –Ω–∞—á–∏–Ω–∞—Ç—å –∑–∞–Ω–æ–≤–æ. –í—ã–≥–ª—è–¥–∏—Ç —ç—Ç–æ –ø—Ä–∏–º–µ—Ä–Ω–æ —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º:

```bash
# Main deploy commands, like drush deploy.
drush cache:rebuild
drush queue:delete warmer
drush warmer:enqueue cdn,sitemap
drush queue:run warmer --items-limit=100
```

üßØ **–ö–∞–∫ —Ç—É—à–∏—Ç—å, –µ—Å–ª–∏ —É–∂–µ –≥–æ—Ä–∏—Ç?** –ü—Ä–æ—Å—Ç–æ –ø–æ—á–∏—Å—Ç–∏—Ç–µ
–æ—á–µ—Ä–µ–¥—å: `drush queue:delete warmer`.

–ü–µ—Ä–≤–æ–µ –≤—Ä–µ–º—è —è —Ä–µ–∫–æ–º–µ–Ω–¥—É—é –æ—á–µ–Ω—å –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ –ø–æ–Ω–∞–±–ª—é–¥–∞—Ç—å —á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Å
—Ç–∞–±–ª–∏—á–∫–æ–π `queue`, —á—Ç–æ–±—ã –≤ —Å–ª—É—á–∞–µ —á–µ–≥–æ, —Å—Ä–µ–∞–≥–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–Ω—å—à–µ —á–µ–º –ø—Ä–æ–±–ª–µ–º–∞ –¥–æ–π–¥—ë—Ç
–¥–æ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–π –æ—Ç–º–µ—Ç–∫–∏.

## –ü—Ä–∏–º–µ—Ä

–†–µ–∞–ª–∏–∑–∞—Ü–∏–∏ Warmer –ø–ª–∞–≥–∏–Ω–æ–≤ –±—É–¥—É—Ç —Å–∏–ª—å–Ω–æ –æ—Ç–ª–∏—á–∞—Ç—å—Å—è –æ—Ç –ø—Ä–æ–µ–∫—Ç–∞ –∫ –ø—Ä–æ–µ–∫—Ç—É, —Ç–∞–∫ –∫–∞–∫
—É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ, —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ ¬´–≤–∞–∂–Ω–æ–≥–æ¬ª —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ —É –≤—Å–µ—Ö –±—É–¥—É—Ç
–æ—Ç–ª–∏—á–∞—Ç—å—Å—è.

–Ø –ø–æ—Å—Ç–∞—Ä–∞–ª—Å—è –ø—Ä–∏–¥—É–º–∞—Ç—å –ø—Ä–∏–º–µ—Ä, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–µ—Ç –æ–∫–∞–∑–∞—Ç—å—Å—è –ø–æ–ª–µ–∑–Ω—ã–º –≤ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö
–∫–µ–π—Å–∞—Ö ‚Äî —Ä–∞–∑–æ–≥—Ä–µ–≤ –∫–∞—Ç–∞–ª–æ–≥–∞ –∏ —Ç–æ–≤–∞—Ä–æ–≤ –≤ –Ω—ë–º.

### –í–≤–æ–¥–Ω—ã–µ –¥–ª—è –ø—Ä–∏–º–µ—Ä–∞

* –ò–º–µ–µ—Ç—Å—è —Å–ª–æ–≤–∞—Ä—å —Ç–∞–∫—Å–æ–Ω–æ–º–∏–∏ (`category`) –¥–ª—è –∫–∞—Ç–µ–≥–æ—Ä–∏–π —Å –∏–µ—Ä–∞—Ä—Ö–∏–µ–π.
* –ù–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –≤—ã–≤–æ–¥—è—Ç—Å—è –≤—Å–µ —Ç–æ–≤–∞—Ä—ã –∏–∑ –¥–∞–Ω–Ω–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏, –∞ —Ç–∞–∫–∂–µ
  –¥–æ—á–µ—Ä–Ω–∏—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π.
* –ò–º–µ–µ—Ç—Å—è —Ç–∏–ø –º–∞—Ç–µ—Ä–∏–∞–ª–∞ (`node`) ¬´–¢–æ–≤–∞—Ä¬ª (`product`), –∫–æ—Ç–æ—Ä—ã–π –∏–º–µ–µ—Ç —Å–≤—è–∑—å –Ω–∞
  –∫–∞—Ç–µ–≥–æ—Ä–∏—é (`field_category`).
* –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–≤–∞—Ä–æ–≤ ‚Äî 50 000 –ø–æ 10 –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É.
* –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–π ‚Äî 10.
* –¢–æ–≤–∞—Ä—ã —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º —Å–ª—É—á–∞–π–Ω—ã–º –æ–±—Ä–∞–∑–æ–º.

–ú—ã —Ç–∞–∫–∂–µ –ø–æ–¥—Ä–∞–∑—É–º–µ–≤–∞–µ–º —á—Ç–æ —É –Ω–∞—Å –µ—Å—Ç—å –Ω–µ–∫–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –Ω–∞ —Ä—É–∫–∞—Ö, —á—Ç–æ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ
–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –Ω–µ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –¥–∞–ª—å—à–µ —Ç—Ä–µ—Ç–µ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏—è—Ö, –∞ —Ç–∞–∫–∂–µ –∏–∑—É—á–∞—é—Ç
–ø–æ—Å–ª–µ–¥–Ω—é—é —Å—Ç—Ä–∞–Ω–∏—Ü—É.

–£—á–∏—Ç—ã–≤–∞—è –≤—Å—ë –≤—ã—à–µ—Å–∫–∞–∑–∞–Ω–Ω–æ–µ, —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –ø–æ–Ω—è—Ç–Ω–æ, —á—Ç–æ –µ—Å–ª–∏ —É –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ 100
—Å—Ç—Ä–∞–Ω–∏—Ü, –Ω–µ—Ç –Ω–∏–∫–∞–∫–æ–π –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–π –ø–æ–ª—å–∑—ã –≥—Ä–µ—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—ã 4-99, –≤–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ. –û–Ω–∏
–±—É–¥—É—Ç —Ä–∞–∑–æ–≥—Ä–µ—Ç—ã –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–º –ø—É—Ç—ë–º, –ª–∏–±–æ –∏—Ö –Ω—É–∂–Ω–æ —Ä–∞–∑–æ–≥—Ä–µ–≤–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω–æ —Å –±–æ–ª–µ–µ
–Ω–∏–∑–∫–∏–º –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º. –ì—Ä–µ—Ç—å –∏—Ö –≤ –æ—Å–Ω–æ–≤–Ω–æ–º –ø–æ—Ç–æ–∫–µ —Å –≤–∞–∂–Ω—ã–º–∏ —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º–∏ ‚Äî
–Ω–µ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –∏ –ø—É—Å—Ç–∞—è —Ç—Ä–∞—Ç–∞ —Ä–µ—Å—É—Ä—Å–æ–≤.

–≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –Ω–∞–º –≤–∞–∂–Ω–æ, —á—Ç–æ–±—ã –ø–µ—Ä–≤—ã–µ —Ç—Ä–∏ –∏ –ø–æ—Å–ª–µ–¥–Ω—è—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
—Ä–∞–±–æ—Ç–∞–ª–∏ –±—ã—Å—Ç—Ä–æ. –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∏–∑—É—á–∞—é—Ç –¥–∞–Ω–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∫–∞—Ç–µ–≥–æ—Ä–∏–π, —ç—Ç–æ —Ç–∞–∫–∂–µ
–æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –≤—Å–µ —Ç–æ–≤–∞—Ä—ã –≤—ã–≤–æ–¥–∏–º—ã–µ –Ω–∞ –¥–∞–Ω–Ω—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ö, —Ç–∞–∫–∂–µ –¥–æ–ª–∂–Ω—ã —Ä–∞–±–æ—Ç–∞—Ç—å
–±—ã—Å—Ç—Ä–æ.

–ù–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ —É –Ω–∞—Å –≤—Å–µ–≥–æ 50 –∫–∞—Ç–µ–≥–æ—Ä–∏–π (–±–µ–∑ –≤–ª–æ–∂–µ–Ω–∏–π) –∏ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –≤—ã–≤–æ–¥–∏—Ç—Å—è
–ø–æ 30 —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤, –∏ –≤ –∫–∞–∂–¥–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –±–æ–ª—å—à–µ 3 —Å—Ç—Ä–∞–Ω–∏—Ü, —Ç–æ –ø–æ –ª–æ–≥–∏–∫–µ
–≤—ã—à–µ –Ω–∞–º –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø—Ä–æ–≥—Ä–µ—Ç—å 200 —Å—Ç—Ä–∞–Ω–∏—Ü –¥–ª—è –∫–∞—Ç–µ–≥–æ—Ä–∏–π –∏ 6 000 —Ç–æ–≤–∞—Ä–æ–≤.

–î–∞–∂–µ –¥–ª—è —Ç–∞–∫–∏—Ö —É—Å–ª–æ–≤–∏–π, –ø—Ä–æ–≥—Ä–µ–≤–∞—Ç—å –Ω—É–∂–Ω–æ –≤—Å–µ–≥–æ 6 200 —Å—Ç—Ä–∞–Ω–∏—Ü, —Ç–æ–≥–¥–∞ –∫–∞–∫, –æ–¥–Ω–∏—Ö
–ª–∏—à—å —Ç–æ–≤–∞—Ä–æ–≤ 50 000. –ü—Ä–∏ —ç—Ç–æ–º, —ç—Ç–æ –¥–æ–ª–∂–Ω–æ –ø–æ–∫—Ä—ã—Ç—å –ø—É—Ç–∏ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞
–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π. –ù–∞ –¥–µ–ª–µ, –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –±—É–¥—É—Ç –≤–ª–æ–∂–µ–Ω–Ω—ã–µ, —Ç–æ–≤–∞—Ä—ã –º–æ–≥—É—Ç –ø–µ—Ä–µ—Å–µ–∫–∞—Ç—å—Å—è, –∞
—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–∞–Ω–∏—Ü –¥–ª—è –ø—Ä–æ–≥—Ä–µ–≤–∞ –±—É–¥–µ—Ç –Ω–∞–º–Ω–æ–≥–æ –º–µ–Ω—å—à–µ.

–ú—ã –Ω–∞–ø–∏—à–µ–º –¥–≤–∞ –ø–ª–∞–≥–∏–Ω–∞, –æ–¥–∏–Ω –¥–ª—è –∫–∞—Ç–µ–≥–æ—Ä–∏–π, –¥—Ä—É–≥–æ–π –¥–ª—è —Ç–æ–≤–∞—Ä–æ–≤, —á—Ç–æ–±—ã –∏–º–µ—Ç—å
–±–æ–ª—å—à–µ –∫–æ–Ω—Ç—Ä–æ–ª—è –∏ –º–æ–∂–Ω–æ –±—ã–ª–æ –≥—Ä–µ—Ç—å –∫–µ—à –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ. –ü–ª–∞–≥–∏–Ω—ã –±—É–¥—É—Ç —Ä–∞–∑–æ–≥—Ä–µ–≤–∞—Ç—å
—Å—Ç—Ä–∞–Ω–∏—Ü—ã –∫–∞—Ç–µ–≥–æ—Ä–∏–π —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π –∏ –≤—Å–µ —Ç–æ–≤–∞—Ä—ã –≤—Ö–æ–¥—è—â–∏–µ –Ω–∞ –¥–∞–Ω–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã.

–í –¥–∞–Ω–Ω—ã—Ö –ø–ª–∞–≥–∏–Ω–∞—Ö –º—ã –¥–∞–¥–∏–º –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–∞–Ω–∏—Ü –¥–ª—è
–ø—Ä–æ–≥—Ä–µ–≤–∞ —Å –Ω–∞—á–∞–ª–∞ –∏ –∫–æ–Ω—Ü–∞ –ª–∏—Å—Ç–∏–Ω–≥–∞. –≠—Ç–æ –ø–æ–∑–≤–æ–ª–∏—Ç –ø—Ä–æ–≥—Ä–µ–≤–∞—Ç—å –∫–µ—à –Ω–µ–º–Ω–æ–≥–æ
–Ω–µ–∑–∞–≤–∏—Å–∏–º–æ. –ù–∞–ø—Ä–∏–º–µ—Ä, –º–æ–∂–Ω–æ –±—É–¥–µ—Ç –ø—Ä–æ–≥—Ä–µ–≤–∞—Ç—å –ø–µ—Ä–≤—ã–µ –∏ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 5 —Å—Ç—Ä–∞–Ω–∏—Ü
–∫–∞—Ç–µ–≥–æ—Ä–∏–π, –Ω–æ –ø—Ä–∏ —ç—Ç–æ–º –≥—Ä–µ—Ç—å —Ç–æ–ª—å–∫–æ —Ç–æ–≤–∞—Ä—ã —Å –ø–µ—Ä–≤—ã—Ö –∏ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –¥–≤—É—Ö.

### CatalogBasedWarmerBase ‚Äî –æ—Å–Ω–æ–≤–∞ –Ω–∞—à–∏—Ö –ø–ª–∞–≥–∏–Ω–æ–≤

–ù–∞–º –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–≤–∞ –ø–ª–∞–≥–∏–Ω–∞, –Ω–æ –æ–±–∞ –æ–Ω–∏ –∑–∞–≤—è–∑–∞–Ω—ã –Ω–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –∏ –∏—Ö –∫–æ–¥ –ø–æ
–±–æ–ª—å—à–µ–π —á–∞—Å—Ç–∏ –ø–µ—Ä–µ—Å–µ–∫–∞–µ—Ç—Å—è. –ß—Ç–æ–±—ã –Ω–µ –¥—É–±–ª–∏—Ä–æ–≤–∞—Ç—å –µ–≥–æ, –º—ã —Å–æ–∑–¥–∞–¥–∏–º –±–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å,
–∫–æ—Ç–æ—Ä—ã–π —Ä–∞—Å—à–∏—Ä—è–µ—Ç `WarmerPluginBase` –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –∫–æ–¥ –¥–ª—è
–±—É–¥—É—â–∏—Ö –ø–ª–∞–≥–∏–Ω–æ–≤.

_–ö–æ–¥ –Ω–∞–ø–∏—Å–∞–Ω –≤–æ —Å–ª–∞–≤—É —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ—Å—Ç–∏ –∏ –∫–æ–ø–∏–ø–∞—Å—Ç—ã._

```php {"header":"src/Plugin/warmer/CatalogBasedWarmerBase.php"}
<?php

declare(strict_types=1);

namespace Drupal\example\Plugin\warmer;

use Drupal\Core\Cache\CacheBackendInterface;
use Drupal\Core\Entity\ContentEntityStorageInterface;
use Drupal\Core\Entity\EntityTypeManagerInterface;
use Drupal\Core\Entity\Query\QueryInterface;
use Drupal\Core\Form\FormStateInterface;
use Drupal\Core\Form\SubformStateInterface;
use Drupal\Core\StringTranslation\TranslatableMarkup;
use Drupal\taxonomy\TermStorageInterface;
use Drupal\warmer\Plugin\WarmerPluginBase;
use GuzzleHttp\ClientInterface;
use GuzzleHttp\Promise\Utils;
use Psr\Http\Message\ResponseInterface;
use Symfony\Component\DependencyInjection\ContainerInterface;

/**
 * Provides abstract implementation for warmer plugins based on catalog warming.
 */
abstract class CatalogBasedWarmerBase extends WarmerPluginBase {

  /**
   * The vocabulary ID with categories.
   */
  protected const CATEGORY_VOCABULARY_ID = 'category';

  /**
   * The entity type used for products.
   */
  protected const PRODUCT_ENTITY_TYPE_ID = 'node';

  /**
   * An array with product bundles.
   */
  protected const PRODUCT_BUNDLES = ['product'];

  /**
   * The field name with category entity reference.
   */
  protected const CATEGORY_FIELD = 'field_category';

  /**
   * The field name to sort by.
   */
  protected const SORT_FIELD = 'created';

  /**
   * The default sort direction.
   */
  protected const SORT_DIRECTION = 'DESC';

  /**
   * The maximum amount of products listed on a single category page.
   */
  protected const ITEMS_PER_PAGE = 10;

  /**
   * The amount of concurrent requests during warming.
   */
  protected const CONCURRENT_REQUESTS = 10;

  /**
   * The entity type manager.
   */
  protected EntityTypeManagerInterface $entityTypeManager;

  /**
   * The product storage.
   */
  protected ?ContentEntityStorageInterface $productStorage;

  /**
   * The term storage.
   */
  protected ?TermStorageInterface $termStorage;

  /**
   * The HTTP client.
   */
  protected ClientInterface $httpClient;

  /**
   * The static cache.
   */
  protected CacheBackendInterface $cache;

  /**
   * {@inheritdoc}
   */
  public static function create(ContainerInterface $container, array $configuration, $plugin_id, $plugin_definition): self {
    $instance = parent::create($container, $configuration, $plugin_id, $plugin_definition);
    $instance->entityTypeManager = $container->get('entity_type.manager');
    $instance->httpClient = $container->get('http_client');
    $instance->cache = $container->get('cache.static');
    return $instance;
  }

  /**
   * {@inheritdoc}
   */
  public function loadMultiple(array $ids = []): array {
    return $ids;
  }

  /**
   * {@inheritdoc}
   */
  public function warmMultiple(array $items = []): int {
    $promises = [];
    $success = 0;

    foreach ($items as $key => $url) {
      // Fire async request.
      $promises[] = $this->httpClient
        ->requestAsync('GET', $url)
        ->then(static function (ResponseInterface $response) use (&$success): void {
          if ($response->getStatusCode() < 399) {
            $success++;
          }
        });
      // Wait for all fired requests if max number is reached.
      $item_keys = \array_keys($items);
      if ($key % $this->getConcurrentRequests() == 0 || $key == \end($item_keys)) {
        Utils::all($promises)->wait();
        $promises = [];
      }
    }

    return $success;
  }

  /**
   * Gets the amount of simultaneous requests during warming.
   *
   * @return int
   *   The amount of requests.
   */
  protected function getConcurrentRequests(): int {
    return $this::CONCURRENT_REQUESTS;
  }

  /**
   * {@inheritdoc}
   */
  public function buildIdsBatch($cursor): array {
    $cid = __METHOD__ . ':' . $this->getPluginId();
    if ($cache = $this->cache->get($cid)) {
      $urls = $cache->data;
    }
    else {
      $urls = $this->prepareUrls();
      $this->cache->set($cid, $urls);
    }
    $cursor_position = \is_null($cursor) ? -1 : \array_search($cursor, $urls);
    if ($cursor_position === FALSE) {
      return [];
    }
    return \array_slice($urls, $cursor_position + 1, (int) $this->getBatchSize());
  }

  /**
   * Prepares a list of URLs for warming.
   *
   * @return array
   *   An array with URLs to warm.
   */
  abstract protected function prepareUrls(): array;

  /**
   * {@inheritdoc}
   */
  public function defaultConfiguration(): array {
    return [
      'pages_from_beginning' => 3,
      'pages_from_end' => 1,
      'frequency' => 60 * 60,
    ] + parent::defaultConfiguration();
  }

  /**
   * {@inheritdoc}
   */
  public function addMoreConfigurationFormElements(array $form, SubformStateInterface $form_state): array {
    $form['pages_from_beginning'] = [
      '#type' => 'number',
      '#min' => 1,
      '#step' => 1,
      '#required' => TRUE,
      '#title' => new TranslatableMarkup('First pages to warm'),
      '#description' => new TranslatableMarkup('The number of pages to warm starting from a beginning, including first one.'),
      '#default_value' => $this->getPagesFromBeginning(),
    ];

    $form['pages_from_end'] = [
      '#type' => 'number',
      '#min' => 0,
      '#step' => 1,
      '#required' => TRUE,
      '#title' => new TranslatableMarkup('Last pages to warm'),
      '#description' => new TranslatableMarkup('The number of pages to warm starting from an end.'),
      '#default_value' => $this->getPagesFromEnd(),
    ];

    return $form;
  }

  /**
   * Gets number of pages needs to be warmed from beginning.
   *
   * @return int
   *   The amount of pages to warm from beginning.
   */
  public function getPagesFromBeginning(): int {
    return (int) $this->getConfiguration()['pages_from_beginning'];
  }

  /**
   * Gets number of pages needs to be warmed from the end.
   *
   * @return int
   *   The number of pages.
   */
  public function getPagesFromEnd(): int {
    return (int) $this->getConfiguration()['pages_from_end'];
  }

  /**
   * Gets items per page.
   *
   * @return int
   *   The amount of items per page.
   */
  public function getItemsPerPage(): int {
    return $this::ITEMS_PER_PAGE;
  }

  /**
   * {@inheritdoc}
   */
  public function validateConfigurationForm(array &$form, FormStateInterface $form_state): void {
    $pages_from_beginning = $form_state->getValue('pages_from_beginning');
    if (!\is_numeric($pages_from_beginning) || $pages_from_beginning < 1) {
      $form_state->setError($form['pages_from_beginning'], new TranslatableMarkup('First pages to warm should be greater than or equal 1.'));
    }

    $pages_from_end = $form_state->getValue('pages_from_end');
    if (!\is_numeric($pages_from_end) || $pages_from_end < 0) {
      $form_state->setError($form['pages_from_end'], new TranslatableMarkup('Last pages to warm should be a positive number.'));
    }

    parent::validateConfigurationForm($form, $form_state);
  }

  /**
   * Loads active categories IDs.
   *
   * @return array
   *   An array with category IDs.
   *
   * @throws \Drupal\Component\Plugin\Exception\InvalidPluginDefinitionException
   * @throws \Drupal\Component\Plugin\Exception\PluginNotFoundException
   */
  protected function loadCategoryIds(): array {
    $ids = [];
    foreach ($this->loadCatalogTree() as $term) {
      if ($term->status != 1) {
        continue;
      }
      $ids[] = (int) $term->tid;
    }
    return $ids;
  }

  /**
   * Loads catalog tree.
   *
   * @return \stdClass[]
   *   An array with tree information.
   *
   * @throws \Drupal\Component\Plugin\Exception\InvalidPluginDefinitionException
   * @throws \Drupal\Component\Plugin\Exception\PluginNotFoundException
   */
  protected function loadCatalogTree(): array {
    return $this->getTermStorage()->loadTree($this->getCategoryVocabularyId());
  }

  /**
   * Gets term storage.
   *
   * @return \Drupal\taxonomy\TermStorageInterface
   *   The term storage.
   *
   * @throws \Drupal\Component\Plugin\Exception\InvalidPluginDefinitionException
   * @throws \Drupal\Component\Plugin\Exception\PluginNotFoundException
   */
  protected function getTermStorage(): TermStorageInterface {
    if (!isset($this->termStorage)) {
      $this->termStorage = $this->entityTypeManager->getStorage('taxonomy_term');
    }
    return $this->termStorage;
  }

  /**
   * Gets category vocabulary ID.
   *
   * @return string
   *   The vocabulary ID.
   */
  protected function getCategoryVocabularyId(): string {
    return $this::CATEGORY_VOCABULARY_ID;
  }

  /**
   * Counts the amount of products in category.
   *
   * @param int $category_id
   *   The category ID.
   *
   * @return int
   *   The amount of products in category.
   *
   * @throws \Drupal\Component\Plugin\Exception\InvalidPluginDefinitionException
   * @throws \Drupal\Component\Plugin\Exception\PluginNotFoundException
   */
  protected function countProductsInCategory(int $category_id): int {
    $query = $this->getProductsQuery($category_id);
    return (int) $query->count()->execute();
  }

  /**
   * Prepares entity query for products in category.
   *
   * @param int $category_id
   *   The category ID.
   * @param bool $negate_sort
   *   TRUE if sort should be reversed, FALSE to use default.
   *
   * @return \Drupal\Core\Entity\Query\QueryInterface
   *   The entity query with basic conditions.
   *
   * @throws \Drupal\Component\Plugin\Exception\InvalidPluginDefinitionException
   * @throws \Drupal\Component\Plugin\Exception\PluginNotFoundException
   */
  protected function getProductsQuery(int $category_id, bool $negate_sort = FALSE): QueryInterface {
    $category_ids = $this->getCategoryChildren($category_id);
    $category_ids[] = $category_id;

    $product_entity_definition = $this->entityTypeManager->getDefinition($this->getProductEntityTypeId());

    $query = $this->getProductStorage()->getQuery()->accessCheck(FALSE);
    if (!empty($this->getProductBundles()) && $product_entity_definition->hasKey('bundle')) {
      $query->condition($product_entity_definition->getKey('bundle'), $this->getProductBundles(), 'IN');
    }
    if ($product_entity_definition->hasKey('status')) {
      $query->condition($product_entity_definition->getKey('status'), 1);
    }
    $query->condition($this->getCategoryField(), $category_ids, 'IN');
    $query->sort($this->getSortField(), $this->getSortDirection($negate_sort));
    return $query;
  }

  /**
   * Gets children categories.
   *
   * @param int $term_id
   *   The current category ID.
   *
   * @return array
   *   An array with parent category IDs.
   *
   * @throws \Drupal\Component\Plugin\Exception\InvalidPluginDefinitionException
   * @throws \Drupal\Component\Plugin\Exception\PluginNotFoundException
   */
  protected function getCategoryChildren(int $term_id): array {
    $children = [];
    foreach ($this->loadCatalogTree() as $term) {
      if (\in_array($term_id, $term->parents)) {
        $children[] = (int) $term->tid;
        $children = \array_merge($children, $this->getCategoryChildren((int) $term->tid));
      }
    }
    return $children;
  }

  /**
   * Gets the product entity type ID.
   *
   * @return string
   *   The entity type ID.
   */
  protected function getProductEntityTypeId(): string {
    return $this::PRODUCT_ENTITY_TYPE_ID;
  }

  /**
   * Gets product storage.
   *
   * @return \Drupal\Core\Entity\ContentEntityStorageInterface
   *   The product storage.
   *
   * @throws \Drupal\Component\Plugin\Exception\InvalidPluginDefinitionException
   * @throws \Drupal\Component\Plugin\Exception\PluginNotFoundException
   */
  protected function getProductStorage(): ContentEntityStorageInterface {
    if (!isset($this->productStorage)) {
      $this->productStorage = $this->entityTypeManager->getStorage($this->getProductEntityTypeId());
    }
    return $this->productStorage;
  }

  /**
   * Gets product entity type bundle used for products.
   *
   * @return array
   *   An array with bundle IDs. Returns an empty array if all bundles allowed.
   */
  protected function getProductBundles(): array {
    return $this::PRODUCT_BUNDLES;
  }

  /**
   * Gets entity reference field name used for categories in product.
   *
   * @return string
   *   The name of category field.
   */
  protected function getCategoryField(): string {
    return $this::CATEGORY_FIELD;
  }

  /**
   * Gets the field name used for sorting results in category by default.
   *
   * @return string
   *   The category field name.
   */
  protected function getSortField(): string {
    return $this::SORT_FIELD;
  }

  /**
   * Gets default sort direction used for sorting results in category.
   *
   * @param bool $negate
   *   Used to flip sort direction.
   *
   * @return string
   *   The sort direction.
   */
  protected function getSortDirection(bool $negate = FALSE): string {
    if ($negate) {
      return $this::SORT_DIRECTION == 'ASC' ? 'DESC' : 'ASC';
    }
    else {
      return $this::SORT_DIRECTION;
    }
  }

}

```

#### –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã

–ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã —É–∫–∞–∑–∞—Ç—å –∫–ª—é—á–µ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –Ω–∞—à–∏—Ö
–ø–ª–∞–≥–∏–Ω–æ–≤. –ï—Å–ª–∏ –≤—ã –∑–∞—Ö–æ—Ç–∏—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –ø–ª–∞–≥–∏–Ω—ã –Ω–∞ —Å–≤–æ—ë–º –ø—Ä–æ–µ–∫—Ç–µ, —ç—Ç–æ
–ø–µ—Ä–≤–æ–µ, –∏ –≤–æ–∑–º–æ–∂–Ω–æ, –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–µ, —á—Ç–æ –≤–∞–º –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è –ø–æ–ø—Ä–∞–≤–∏—Ç—å.

* `CATEGORY_VOCABULARY_ID` / `::getCategoryVocabularyId()`: –ú–∞—à–∏–Ω–Ω–æ–µ –∏–º—è —Å–ª–æ–≤–∞—Ä—è
  —Ç–∞–∫—Å–æ–Ω–æ–º–∏–∏, –∫–æ—Ç–æ—Ä—ã–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏–∏ —Ç–æ–≤–∞—Ä–æ–≤. –í –Ω–∞—à–µ–º —Å–ª—É—á–∞–µ
  —ç—Ç–æ `category`.
* `PRODUCT_ENTITY_TYPE_ID` / `::getProductEntityTypeId()`: –ú–∞—à–∏–Ω–Ω–æ–µ –∏–º—è
  —Å—É—â–Ω–æ—Å—Ç–∏, –∫–æ—Ç–æ—Ä–æ–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Ç–æ–≤–∞—Ä–æ–≤. –í –Ω–∞—à–µ–º –ø—Ä–∏–º–µ—Ä–µ —ç—Ç–æ ¬´–¢–∏–ø
  —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ¬ª (`node`), –Ω–æ –µ—Å–ª–∏ –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ Drupal Commerce, –≤ —ç—Ç–æ–º —Å–ª—É—á–∞–µ
  –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —É–∫–∞–∑–∞—Ç—å `commerce_product`.
* `PRODUCT_BUNDLES` / `::getProductBundles()`: –ú–∞—à–∏–Ω–Ω—ã–µ –∏–º–µ–Ω–∞ –ø–æ–¥—Ç–∏–ø–æ–≤ (–±–∞–Ω–¥–ª–æ–≤)
  —Å—É—â–Ω–æ—Å—Ç–∏, –∫–æ—Ç–æ—Ä—ã–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è —Ç–æ–≤–∞—Ä–æ–≤. –í –Ω–∞—à–µ–º —Å–ª—É—á–∞–µ —ç—Ç–æ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π
  –ø–æ–¥—Ç–∏–ø `product`, –µ—Å–ª–∏ –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –≤—Å–µ –ø–æ–¥—Ç–∏–ø—ã, –Ω–∞–ø—Ä–∏–º–µ—Ä –≤ —Å–ª—É—á–∞–µ Drupal
  Commerce, –º–æ–∂–µ—Ç–µ –æ—Å—Ç–∞–≤–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ –ø—É—Å—Ç—ã–º –º–∞—Å—Å–∏–≤–æ–º, —Ç–æ–≥–¥–∞ –±—É–¥—É—Ç —É—á–∏—Ç—ã–≤–∞—Ç—å—Å—è
  –≤—Å–µ –ø–æ–¥—Ç–∏–ø—ã.
* `CATEGORY_FIELD` / `::getCategoryField()`: –ú–∞—à–∏–Ω–Ω–æ–µ –∏–º—è –ø–æ–ª—è —Ç–∏–ø–∞ entity
  reference, –≥–¥–µ —É–∫–∞–∑–∞–Ω–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏—è –∏–ª–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –¥–ª—è —Ç–æ–≤–∞—Ä–∞. –í –Ω–∞—à–µ–º —Å–ª—É—á–∞–µ
  —ç—Ç–æ `field_category`.
* `SORT_FIELD` / `::getSortField()`: –ú–∞—à–∏–Ω–Ω–æ–µ –∏–º—è –ø–æ–ª—è, –ø–æ –∫–æ—Ç–æ—Ä–æ–º—É –±—É–¥–µ—Ç
  –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—å—Å—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø—Ä–∏ –≤—ã–±–æ—Ä–∫–µ —Ç–æ–≤–∞—Ä–æ–≤. –í –Ω–∞—à–µ–º —Å–ª—É—á–∞–µ —ç—Ç–æ `created` –æ—Ç
  —Ç–∏–ø–∞ –º–∞—Ç–µ—Ä–∏–∞–ª–∞. –ï—Å–ª–∏ —É —Å—É—â–Ω–æ—Å—Ç–∏, —á—Ç–æ –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –¥–ª—è —Ç–æ–≤–∞—Ä–æ–≤ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç
  —Ç–∞–∫–æ–µ –ø–æ–ª–µ, —É—á—Ç–∏—Ç–µ —á—Ç–æ –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è –≤–Ω–µ—Å—Ç–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ —É—Å–ª–æ–≤–∏–µ. –£ —Ç–æ–≤–∞—Ä–∞ Drupal
  Commerce –æ–Ω–æ —Ç–æ –∂–µ `created`.
* `SORT_DIRECTION` / `::getSortDirection()`: –ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
  –¥–ª—è –∑–Ω–∞—á–µ–Ω–∏—è `SORT_FIELD`. –≠—Ç–æ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –≤—ã–±–æ—Ä–∫–∏ —Ç–æ–≤–∞—Ä–æ–≤ —Å
  –ø–µ—Ä–≤—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ, –¥–ª—è –≤—ã–±–æ—Ä–∫–∏ —Å –∫–æ–Ω—Ü–∞, –æ–Ω–æ –±—É–¥–µ—Ç –æ–±—Ä–∞—â–µ–Ω–æ, –¥–ª—è
  —ç—Ç–æ–≥–æ –º–µ—Ç–æ–¥ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∞—Ä–≥—É–º–µ–Ω—Ç, –Ω—É–∂–Ω–æ –ª–∏ –æ–±—Ä–∞—â–∞—Ç—å —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫—É –∏–ª–∏ –Ω–µ—Ç.
* `ITEMS_PER_PAGE` / `::getItemsPerPage()`: –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ —á–∏—Å–ª–æ —Ç–æ–≤–∞—Ä–æ–≤,
  –≤—ã–≤–æ–¥–∏–º–æ–µ –Ω–∞ –æ–¥–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ø–æ–¥—Å—á—ë—Ç–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞
  —Å—Ç—Ä–∞–Ω–∏—Ü.
* `CONCURRENT_REQUESTS` / `::getConcurrentRequests()`: –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
  –≤—ã–ø–æ–ª–Ω—è–µ–º—ã—Ö HTTP –∑–∞–ø—Ä–æ—Å–æ–≤.

#### –ù–∞—Å—Ç—Ä–æ–π–∫–∏

–í—Å–µ `@Warmer` –ø–ª–∞–≥–∏–Ω—ã –º–æ–≥—É—Ç –∏–º–µ—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏, –∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é, –µ—Å–ª–∏ –≤—ã –Ω–∏—á–µ–≥–æ –Ω–µ
–ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç–µ, –≤–∞—à –ø–ª–∞–≥–∏–Ω –±—É–¥–µ—Ç –∏–º–µ—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫—É `frequency` –∏ `batchSize`.

–ú—ã –∂–µ –¥–æ–±–∞–≤–ª—è–µ–º –Ω–∞—à–∏–º –ø–ª–∞–≥–∏–Ω–∞–º –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å —Å–∫–æ–ª—å–∫–æ —Å—Ç—Ä–∞–Ω–∏—Ü —Å –Ω–∞—á–∞–ª–∞
–∏ –∫–æ–Ω—Ü–∞ –ª–∏—Å—Ç–∏–Ω–≥–∞ –ø—Ä–æ–≥—Ä–µ–≤–∞—Ç—å. –î–ª—è –∫–∞—Ç–µ–≥–æ—Ä–∏–π —ç—Ç–æ –ø—Ä–æ—Å—Ç–æ —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Å –ª–∏—Å—Ç–∏–Ω–≥–æ–º, –∞
–¥–ª—è —Ç–æ–≤–∞—Ä–æ–≤, —Å–ø–æ—Å–æ–± –≤—ã—Å—á–∏—Ç–∞—Ç—å —Å–º–µ—â–µ–Ω–∏–µ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–æ–≤ –¥–ª—è –ø—Ä–æ–≥—Ä–µ–≤–∞.

* `::defaultConfiguration()`: –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é. –ú—ã
  —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º, —á—Ç–æ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é, –±—É–¥—É—Ç –ø—Ä–æ–≥—Ä–µ–≤–∞—Ç—å—Å—è –ø–µ—Ä–≤—ã–µ —Ç—Ä–∏ –∏ –ø–æ—Å–ª–µ–¥–Ω—è—è
  —Å—Ç—Ä–∞–Ω–∏—Ü–∞, –∞ —á–∞—Å—Ç–æ—Ç–∞ –ø—Ä–æ–≥—Ä–µ–≤–∞ –±—É–¥–µ—Ç 1 —á–∞—Å, —Ç–∞–∫ –∫–∞–∫ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –≤ 5
  –º–∏–Ω—É—Ç —Å–ª–∏—à–∫–æ–º –æ–ø–∞—Å–Ω–∞ –¥–ª—è —Ç–∞–∫–æ–≥–æ –ø–ª–∞–≥–∏–Ω–∞.
* `::addMoreConfigurationFormElements()`: –ó–¥–µ—Å—å, –ø—Ä–∏ –ø–æ–º–æ—â–∏ Form API –º—ã
  –æ–±—ä—è–≤–ª—è–µ–º –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü –Ω–∞—à–µ–≥–æ –ø–ª–∞–≥–∏–Ω–∞. –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è
  —á–∞—Å—Ç–æ—Ç—ã –ø—Ä–æ–≥—Ä–µ–≤–∞ –æ–±—ä—è–≤–ª—è—Ç—å –Ω–µ –Ω—É–∂–Ω–æ, –æ–Ω–∏ –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –±–∞–∑–æ–≤—ã–º –∫–ª–∞—Å—Å–æ–º –¥–ª—è –≤—Å–µ—Ö
  –ø–ª–∞–≥–∏–Ω–æ–≤.
* `::validateConfigurationForm()`: –í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞—à–∏—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫. –í –Ω–µ–π –º—ã —É–±–µ–∂–¥–∞–µ–º—Å—è
  —á—Ç–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–∞–Ω–∏—Ü —Å –Ω–∞—á–∞–ª–∞ –¥–ª—è –ø—Ä–æ–≥—Ä–µ–≤–∞ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –±–æ–ª—å—à–µ –∏–ª–∏ —Ä–∞–≤–Ω–æ
  –µ–¥–∏–Ω–∏—Ü–µ. –¢–∞–∫ –∫–∞–∫ –º—ã –≤—Å–µ–≥–¥–∞ —Ö–æ—Ç–∏–º –ø—Ä–æ–≥—Ä–µ–≤–∞—Ç—å –∫–∞–∫ –º–∏–Ω–∏–º—É–º –ø–µ—Ä–≤—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É –∏
  —Ç–æ–≤–∞—Ä—ã —Å –Ω–µ—ë. –î–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü —Å –∫–æ–Ω—Ü–∞, –º—ã –ø—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ
  –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ, –Ω–æ –¥–æ–ø—É—Å–∫–∞–µ–º —É—Å—Ç–∞–Ω–æ–≤–∫—É 0, —á—Ç–æ–±—ã –ø—Ä–æ–≥—Ä–µ–≤ —Å –∫–æ–Ω—Ü–∞ –Ω–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏–ª—Å—è.
* `::getPagesFromBeginning()`: –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü
  –ø—Ä–æ–≥—Ä–µ–≤–∞ —Å –Ω–∞—á–∞–ª–∞ —Å–ø–∏—Å–∫–∞.
* `::getPagesFromEnd()`: –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü –ø—Ä–æ–≥—Ä–µ–≤–∞ —Å
  –∫–æ–Ω—Ü–∞ —Å–ø–∏—Å–∫–∞.

#### ::getTermStorage() ‚Äî –ø–æ–ª—É—á–µ–Ω–∏–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ —Ç–µ—Ä–º–∏–Ω–æ–≤ —Ç–∞–∫—Å–æ–Ω–æ–º–∏–∏

–£—Ç–∏–ª–∏—Ç–∞—Ä–Ω—ã–π –º–µ—Ç–æ–¥ `::getTermStorage()` –ª–µ–Ω–∏–≤–æ –∑–∞–≥—Ä—É–∂–∞–µ—Ç —Ö—Ä–∞–Ω–∏–ª–∏—â–µ —Ç–µ—Ä–º–∏–Ω–æ–≤
—Ç–∞–∫—Å–æ–Ω–æ–º–∏–∏ –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –µ–≥–æ.

–≠—Ç–æ—Ç –º–µ—Ç–æ–¥ –¥–æ–±–∞–≤–ª–µ–Ω –¥–ª—è —Ä–∞–∑–≥—Ä—É–∑–∫–∏ –º–µ—Ç–æ–¥–∞ `::create()`, –∞ —Ç–∞–∫–∂–µ –ø–æ—Ç–æ–º—É —á—Ç–æ –Ω–∞–º –Ω–µ
–Ω—É–∂–Ω–æ –¥–∞–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –ø—Ä–∏ –∫–∞–∂–¥–æ–π –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –ø–ª–∞–≥–∏–Ω–∞. –ù–∞–ø—Ä–∏–º–µ—Ä, –æ–Ω–æ –Ω–µ –Ω—É–∂–Ω–æ
–≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –ø—Ä–æ–≥—Ä–µ–≤–∞. –≠—Ç–æ —ç–∫–æ–Ω–æ–º–∏—è –Ω–∞ —Å–ø–∏—á–∫–∞—Ö, –ø–æ—ç—Ç–æ–º—É –æ—Å–Ω–æ–≤–Ω–æ–π –ø—Ä–∏—á–∏–Ω–æ–π —Ç—É—Ç –≤—Å—ë
–∂–µ —è–≤–ª—è–µ—Ç—Å—è —É–¥–æ–±—Å—Ç–≤–æ –∏ —É–ø—Ä–æ—â–µ–Ω–∏–µ `::create()`.

#### ::getProductStorage() ‚Äî –ø–æ–ª—É—á–µ–Ω–∏–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ —Ç–æ–≤–∞—Ä–æ–≤

–£—Ç–∏–ª–∏—Ç–∞—Ä–Ω—ã–π –º–µ—Ç–æ–¥ `::getProductStorage()` –ª–µ–Ω–∏–≤–æ –∑–∞–≥—Ä—É–∂–∞–µ—Ç —Ö—Ä–∞–Ω–∏–ª–∏—â–µ —Ç–æ–≤–∞—Ä–æ–≤ –∏
–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –µ–≥–æ. –ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ `::getTermStorage()`.

#### ::getCategoryChildren() ‚Äî –ø–æ–ª—É—á–µ–Ω–∏–µ –¥–æ—á–µ—Ä–Ω–∏—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π

–£—Ç–∏–ª–∏—Ç–∞—Ä–Ω—ã–π –º–µ—Ç–æ–¥ `::getCategoryChildren()`, –∫–æ—Ç–æ—Ä—ã–π —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç –º–∞—Å—Å–∏–≤ –∏–∑ ID
–¥–æ—á–µ—Ä–Ω–∏—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π –¥–ª—è –ø–µ—Ä–µ–¥–∞–Ω–Ω–æ–π –≤ –∞—Ä–≥—É–º–µ–Ω—Ç–µ. –ü–æ –Ω–∞—à–µ–º—É —É—Å–ª–æ–≤–∏—é, –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ
–∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –≤—ã–≤–æ–¥—è—Ç—Å—è —Ç–æ–≤–∞—Ä—ã –∫–∞–∫ –∏–∑ –¥–∞–Ω–Ω–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏, —Ç–∞–∫ –∏ –¥–æ—á–µ—Ä–Ω–∏—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π.

#### ::loadCatalogTree() ‚Äî –∑–∞–≥—Ä—É–∑–∫–∞ –¥–µ—Ä–µ–≤–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–π

–£—Ç–∏–ª–∏—Ç–∞—Ä–Ω—ã–π –º–µ—Ç–æ–¥ `::loadCatalogTree()` –∑–∞–≥—Ä—É–∂–∞–µ—Ç –¥–µ—Ä–µ–≤–æ —Ç–µ—Ä–º–∏–Ω–æ–≤ –∏–∑ —Å–ª–æ–≤–∞—Ä—è —Å
–∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏.

#### ::loadCategoryIds() ‚Äî –ø–æ–ª—É—á–∞–µ–º ID –∞–∫—Ç–∏–≤–Ω—ã—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π

–£—Ç–∏–ª–∏—Ç–∞—Ä–Ω—ã–π –º–µ—Ç–æ–¥ `::loadCategoryIds()` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç ID –∞–∫—Ç–∏–≤–Ω—ã—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π.

#### ::countProductsInCategory() ‚Äî –ø–æ–¥—Å—á—ë—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ç–æ–≤–∞—Ä–æ–≤ –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏

–£—Ç–∏–ª–∏—Ç–∞—Ä–Ω—ã–π –º–µ—Ç–æ–¥ `::countProductsInCategory()` –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç –∑–∞–ø—Ä–æ—Å –Ω–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ
—Ç–æ–≤–∞—Ä–æ–≤ –≤ —É–∫–∞–∑–∞–Ω–Ω–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏.

–ú–µ—Ç–æ–¥ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä `$catregory_id` —Å ID –∫–∞—Ç–µ–≥–æ—Ä–∏–∏, –¥–ª—è –∫–æ—Ç–æ—Ä–æ–π –±—É–¥–µ—Ç
–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—å—Å—è –ø–æ–¥—Å—á—ë—Ç.

#### ::getProductsQuery() ‚Äî —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–∞ –Ω–∞ –ø–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–æ–≤

–ú–µ—Ç–æ–¥ `::getProductsQuery()` –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å –µ–¥–∏–Ω—ã–π –∏ –æ–±—â–∏–π –∑–∞–ø—Ä–æ—Å –¥–ª—è
–ø–æ–ª—É—á–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–æ–≤. –ù–∞–º –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–µ–ª–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å —Ç–æ–≤–∞—Ä–∞–º–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ
—Ä–∞–∑: –ø–æ—Å—á–∏—Ç–∞—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–≤–∞—Ä–æ–≤ –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ (`::countProductsInCategory()`), –∞
—Ç–∞–∫–∂–µ, –Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ ID —Ç–æ–≤–∞—Ä–æ–≤ —Å –ø–µ—Ä–≤—ã—Ö –∏ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö —Å—Ç—Ä–∞–Ω–∏—Ü.

–û–Ω –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –¥–≤–∞ –∞—Ä–≥—É–º–µ–Ω—Ç–∞:

* `$category_id`: ID –∫–∞—Ç–µ–≥–æ—Ä–∏–∏, –¥–ª—è –∫–æ—Ç–æ—Ä–æ–π –±—É–¥—É—Ç –∑–∞–ø—Ä–∞—à–∏–≤–∞—Ç—å—Å—è —Ç–æ–≤–∞—Ä—ã.
* `$negate_sort`: (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é FALSE) –ü–æ–∑–≤–æ–ª—è–µ—Ç –æ–±—Ä–∞—Ç–∏—Ç—å —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫—É –ø–æ
  —É–º–æ–ª—á–∞–Ω–∏—é. –ù–µ–æ–±—Ö–æ–¥–∏–º–æ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–æ–≤ —Å –∫–æ–Ω—Ü–∞ —Å–ø–∏—Å–∫–∞.
  –°–º. `::getSortDirection()`.

–í –º–µ—Ç–æ–¥–µ, –ø–µ—Ä–≤—ã–º –¥–µ–ª–æ–º —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è —Å–ø–∏—Å–æ–∫ ID –∫–∞—Ç–µ–≥–æ—Ä–∏–π, –∏–∑ –∫–æ—Ç–æ—Ä—ã—Ö –±—É–¥–µ—Ç
–≤—ã–±–∏—Ä–∞—Ç—å—Å—è —Ç–æ–≤–∞—Ä ‚Äî —Ç–µ–∫—É—â–∞—è –ø–µ—Ä–µ–¥–∞–Ω–Ω–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è, –ø–ª—é—Å –µ—ë –¥–æ—á–µ—Ä–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏.
–ó–∞—Ç–µ–º –º—ã –ø–æ–ª—É—á–∞–µ–º —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –¥–ª—è —Å—É—â–Ω–æ—Å—Ç–∏ –æ—Ç–≤–µ—á–∞—é—â–µ–π –∑–∞ —Ç–æ–≤–∞—Ä.

–ü–æ—Å–ª–µ —á–µ–≥–æ –º—ã —Ñ–æ—Ä–º–∏—Ä—É–µ–º –Ω–∞—à –±–∞–∑–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å –¥–ª—è –≤—Å–µ—Ö –ø–æ—Å–ª–µ–¥—É—é—â–∏—Ö:

* –ú—ã –æ—Ç–∫–ª—é—á–∞–µ–º –ø—Ä–æ–≤–µ—Ä–∫—É –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞. –¢–∞–∫ –∫–∞–∫ –æ–Ω–∞ –∑–¥–µ—Å—å –Ω–µ –Ω—É–∂–Ω–∞ –∏ –¥–∞–∂–µ –º–æ–∂–µ—Ç
  –ø–æ–º–µ—à–∞—Ç—å.
* –ï—Å–ª–∏ `::getProductBundles()` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω–µ –ø—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤, –º—ã –ø—Ä–æ–≤–µ—Ä—è–µ–º, –º–æ–∂–µ—Ç
  –ª–∏ –¥–∞–Ω–Ω–∞—è —Å—É—â–Ω–æ—Å—Ç—å –∏–º–µ—Ç—å –ø–æ–¥—Ç–∏–ø—ã (–±–∞–Ω–¥–ª—ã). –ï—Å–ª–∏ –º–æ–∂–µ—Ç, –º—ã –¥–æ–±–∞–≤–ª—è–µ–º –≤ –∑–∞–ø—Ä–æ—Å
  —É—Å–ª–æ–≤–∏–µ –ø–æ —É–∫–∞–∑–∞–Ω–Ω—ã–º –±–∞–Ω–¥–ª–∞–º —Ç–æ–≤–∞—Ä–æ–≤.
* –ï—Å–ª–∏ —É —Å—É—â–Ω–æ—Å—Ç–∏ –µ—Å—Ç—å —Å—Ç–∞—Ç—É—Å (–∞–∫—Ç–∏–≤–Ω–∞ –∏–ª–∏ –Ω–µ—Ç), –º—ã –¥–æ–±–∞–≤–ª—è–µ–º —É—Å–ª–æ–≤–∏–µ, —á—Ç–æ –Ω–∞–º
  –Ω—É–∂–Ω—ã —Ç–æ–ª—å–∫–æ –∞–∫—Ç–∏–≤–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã. –†–∞–∑–æ–≥—Ä–µ–≤–∞—Ç—å –æ—Ç–∫–ª—é—á–µ–Ω–Ω—ã–µ –Ω–µ—Ç –Ω–∏–∫–∞–∫–æ–π –Ω—É–∂–¥—ã.
* –î–∞–ª–µ–µ, –¥–æ–±–∞–≤–ª—è–µ–º —É—Å–ª–æ–≤–∏–µ, —á—Ç–æ —É —Ç–æ–≤–∞—Ä–∞, –≤ –ø–æ–ª–µ, –≥–¥–µ –≤—ã–±—Ä–∞–Ω–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏—è, –¥–æ–ª–∂–Ω–∞
  –±—ã—Ç—å —É–∫–∞–∑–∞–Ω–∞ –æ–¥–Ω–∞ –∏–∑ –ø–æ–ª—É—á–µ–Ω–Ω—ã—Ö –Ω–∞–º–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–π. –ú—ã –ø—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞ —Ç–µ–∫—É—â—É—é, –¥–ª—è
  –∫–æ—Ç–æ—Ä–æ–π –ø—Ä–æ–≥—Ä–µ–≤, –∞ —Ç–∞–∫–∂–µ –≤—Å–µ –µ—ë –¥–æ—á–µ—Ä–Ω–∏–µ.
* –î–æ–±–∞–≤–ª—è–µ–º —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫—É –ø–æ –Ω—É–∂–Ω–æ–º—É –ø–æ–ª—é.

–†–µ–∑—É–ª—å—Ç–∞—Ç–æ–º –±—É–¥–µ—Ç –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω–Ω—ã–π –∑–∞–ø—Ä–æ—Å —Å –±–∞–∑–æ–≤—ã–º–∏ —É—Å–ª–æ–≤–∏—è–º–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ç–µ–∫—É—â–µ–π
–∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –ø–æ–ª—É—á–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å –∫–æ–Ω—Ü–∞. –í—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ
–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∏, –µ—Å–ª–∏ –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è, –º–æ–∂–µ–º –≤–Ω–æ—Å–∏—Ç—å –Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ –≤ —ç–∫–∑–µ–º–ø–ª—è—Ä
–∑–∞–ø—Ä–æ—Å–∞ –ø–æ–ª—É—á–µ–Ω–Ω–æ–≥–æ –¥–∞–Ω–Ω—ã–º –º–µ—Ç–æ–¥–æ–º.

#### ::prepareUrls() ‚Äî —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–¥—Ä–µ—Å–æ–≤ –¥–ª—è –ø—Ä–æ–≥—Ä–µ–≤–∞

–ú–µ—Ç–æ–¥ `::prepareUrls()` —è–≤–ª—è–µ—Ç—Å—è –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–º, –¥–ª—è —Ç–æ–≥–æ —á—Ç–æ–±—ã –º—ã –º–æ–≥–ª–∏ –µ–≥–æ
–≤—ã–∑—ã–≤–∞—Ç—å –≤ `::buildIdsBatch()`, –∞ —Ç–∞–∫–∂–µ, —á—Ç–æ–±—ã –≤—Å–µ –∫—Ç–æ –Ω–∞—Å–ª–µ–¥—É—é—Ç—Å—è –æ—Ç –Ω–∞—à–µ–≥–æ
–±–∞–∑–æ–≤–æ–≥–æ –∫–ª–∞—Å—Å–∞, –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤—ã–≤–∞–ª–∏ –µ–≥–æ.

–ó–∞–¥–∞—á–∞ –¥–∞–Ω–Ω–æ–≥–æ –º–µ—Ç–æ–¥–∞ –ø—Ä–æ—Å—Ç–∞ ‚Äî –ø–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –º–∞—Å—Å–∏–≤ –∏–∑ –∞–¥—Ä–µ—Å–æ–≤, –ø–æ –∫–æ—Ç–æ—Ä—ã–º –Ω—É–∂–Ω–æ
–ø—Ä–æ–π—Ç–∏—Å—å –¥–ª—è –ø—Ä–æ–≥—Ä–µ–≤–∞ –∫–µ—à–∞. –≠—Ç–∞ –ª–æ–≥–∏–∫–∞ –±—É–¥–µ—Ç –æ—Ç–ª–∏—á–∞—Ç—å—Å—è –¥–ª—è –¥–≤—É—Ö –Ω–∞—à–∏—Ö –ø–ª–∞–≥–∏–Ω–æ–≤,
–∏ —ç—Ç–æ—Ç –º–µ—Ç–æ–¥ –∫–∞–∫ —Ä–∞–∑ –ø–æ–∑–≤–æ–ª—è–µ—Ç –Ω–∞–º –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ–¥ –¥–ª—è —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è
–æ—á–µ—Ä–µ–¥–∏, –Ω–æ –ø—Ä–∏ —ç—Ç–æ–º —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å –∞–¥—Ä–µ—Å–∞ —Å–æ–≤–µ—Ä—à–µ–Ω–Ω–æ –ø–æ-—Ä–∞–∑–Ω–æ–º—É.

#### ::buildIdsBatch() ‚Äî —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—á–µ—Ä–µ–¥–∏

–í –¥–∞–Ω–Ω–æ–º –º–µ—Ç–æ–¥–µ –º—ã —Ñ–æ—Ä–º–∏—Ä—É–µ–º —Å—Ä–µ–∑—ã –∞–¥—Ä–µ—Å–æ–≤ –∏–∑ —Ç–µ—Ö —á—Ç–æ –º—ã –ø–æ–¥–≥–æ—Ç–æ–≤–∏–º
–≤ `::prepareUrls()`. –û–Ω —Ç–∞–∫–∂–µ –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ
—Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ `::prepareUrls()`, —á—Ç–æ–±—ã —ç—Ç–æ –Ω–µ –¥–µ–ª–∞—Ç—å –≤ –∫–∞–∂–¥–æ–π –µ–≥–æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏.
–ü—Ä–∏—á–∏–Ω–æ–π —ç—Ç–æ–º—É —Å–ª—É–∂–∏—Ç —Ç–æ, —á—Ç–æ –º–µ—Ç–æ–¥ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –º–Ω–æ–≥–æ–∫—Ä–∞—Ç–Ω–æ, –ø–æ–∫–∞ –Ω–µ —Å—Ñ–æ—Ä–º–∏—Ä—É–µ—Ç
–æ—á–µ—Ä–µ–¥—å, –∞ —Å–ø–∏—Å–æ–∫ –∞–¥—Ä–µ—Å–æ–≤ –º—ã –ø–æ–ª—É—á–∞–µ–º –≤ —Ä–∞–Ω—Ç–∞–π–º–µ. –ü–æ–ª—É—á–µ–Ω–∏–µ –∞–¥—Ä–µ—Å–æ–≤ —Ç–∞–∫–∂–µ –≤–ª–µ—á–µ—Ç
–∑–∞ —Å–æ–±–æ–π –∑–∞–ø—Ä–æ—Å—ã –∫ –ë–î –∏ –ø—Ä–æ—á—É—é –ª–æ–≥–∏–∫—É, –Ω–æ —Å–ø–∏—Å–æ–∫ –∞–¥—Ä–µ—Å–æ–≤, –ø–æ–ª—É—á–µ–Ω–Ω—ã–π –≤ –ø–µ—Ä–≤—ã–π
—Ä–∞–∑ –±—É–¥–µ—Ç –∏–¥–µ–Ω—Ç–∏—á–µ–Ω —Ç–æ–º—É —á—Ç–æ –º—ã –ø–æ–ª—É—á–∏–º –≤ –ø–æ—Å–ª–µ–¥—É—é—â–∏–µ –≤—ã–∑–æ–≤—ã –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö —ç—Ç–æ–≥–æ
–∑–∞–ø—Ä–æ—Å–∞. –ö–æ–Ω–µ—á–Ω–æ, –µ—Å—Ç—å –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å, —á—Ç–æ –≤ –º–æ–º–µ–Ω—Ç —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è –æ—á–µ—Ä–µ–¥–∏ –ø–æ—è–≤–∏–ª–∏—Å—å
–Ω–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ, –Ω–æ —Ç–µ–º –ø–æ–ª–µ–∑–Ω–µ–µ –Ω–∞–º —ç—Ç–æ—Ç –∫–µ—à, —Ç–∞–∫ –∫–∞–∫ –æ–Ω –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å
–¥–∞–Ω–Ω—ã—Ö.

–ö–µ—à —è–≤–ª—è–µ—Ç—Å—è —Å—Ç–∞—Ç–∏—á–Ω—ã–º (`cache.static`), –∞ —ç—Ç–æ –∑–Ω–∞—á–∏—Ç, —Ä–µ–∑—É–ª—å—Ç–∞—Ç –±—É–¥–µ—Ç —Ö—Ä–∞–Ω–∏—Ç—å—Å—è
–≤ –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–π –ø–∞–º—è—Ç–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞ PHP, –≤ –∫–æ—Ç–æ—Ä–æ–º –æ–Ω –≤—ã–∑–≤–∞–Ω, –∏ –æ—á–∏—â–µ–Ω –∫–∞–∫ –æ–Ω
–∑–∞–≤–µ—Ä—à–∏—Ç—Å—è. –¢–æ –µ—Å—Ç—å, —ç—Ç–æ—Ç –∫–µ—à –∞–∫—Ç—É–∞–ª–µ–Ω —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –æ–¥–Ω–æ–≥–æ PHP –ø—Ä–æ—Ü–µ—Å—Å–∞ –∏
—á–∏—Å—Ç–∏—Ç—å –µ–≥–æ –Ω–µ –Ω—É–∂–Ω–æ.

–°–∞–º –∂–µ –ø—Ä–æ—Ü–µ—Å—Å –Ω–∞—Ä–µ–∑–∫–∏ –∞–±—Å–æ–ª—é—Ç–Ω–æ –∏–¥–µ–Ω—Ç–∏—á–µ–Ω —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–º –ø–ª–∞–≥–∏–Ω–∞–º –ø–æ—Å—Ç–∞–≤–ª—è–µ–º—ã–º —Å
–º–æ–¥—É–ª–µ–º –∏ –æ–ø–∏—Å–∞–Ω –≤—ã—à–µ.

#### ::loadMultiple() ‚Äî –∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –ø—Ä–æ–≥—Ä–µ–≤–∞

–ù–∞–º –Ω–µ—Ç –Ω—É–∂–¥—ã –∑–∞–≥—Ä—É–∂–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –¥–ª—è –ø—Ä–æ–≥—Ä–µ–≤–∞. –ù–∞—à–∏ –¥–∞–Ω–Ω—ã–µ —ç—Ç–æ URL-–∞–¥—Ä–µ—Å–∞, –∫–æ—Ç–æ—Ä—ã–µ
–±—É–¥—É—Ç –ø–æ–ª—É—á–µ–Ω—ã –º–µ—Ç–æ–¥–æ–º `::prepareUrls()` –Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ –≤ —Ä–∞–Ω—Ç–∞–π–º–µ. –ú—ã —Ç–∞–∫–∂–µ –Ω–µ
–±—É–¥–µ–º –¥–µ–ª–∞—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é –ø—É—Ç–µ–π, –∫–∞–∫ —ç—Ç–æ –¥–µ–ª–∞–µ—Ç—Å—è –≤ `cdn` –ø–ª–∞–≥–∏–Ω–∞—Ö, —Ç–∞–∫ –∫–∞–∫ –≤—Å–µ
–∞–¥—Ä–µ—Å–∞ –º—ã –±—É–¥–µ–º –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∏ –ø–æ–º–æ—â–∏ Drupal API –±–µ–∑ —Ä—É—á–Ω–æ–≥–æ –≤–≤–æ–¥–∞.

–¢–∞–∫ –∫–∞–∫ –Ω–∞–º –Ω–∏—á–µ–≥–æ –∑–∞–≥—Ä—É–∂–∞—Ç—å –Ω–µ –Ω—É–∂–Ω–æ, –º—ã –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π.

#### ::warmMultiple() ‚Äî –ø—Ä–æ–≥—Ä–µ–≤ –¥–∞–Ω–Ω—ã—Ö

–ú–µ—Ç–æ–¥, –≤ –∫–æ—Ç–æ—Ä–æ–º –º—ã –±—É–¥–µ–º –ø—Ä–æ–≥—Ä–µ–≤–∞—Ç—å –∫–µ—à. –í –Ω—ë–º –º—ã –ø–æ–ª—É—á–∏–º —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –Ω–∞–º–∏
–ø—É—Ç–∏ –¥–ª—è –ø—Ä–æ–≥—Ä–µ–≤–∞ –∏–∑ –æ–¥–Ω–æ–≥–æ —Å—Ä–µ–∑–∞ `::buildIdsBatch()` (–¥–∞–Ω–Ω—ã–µ –æ–¥–Ω–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞
–æ—á–µ—Ä–µ–¥–∏).

–¢–∞–∫ –∫–∞–∫ –º—ã –ø—Ä–æ–≥—Ä–µ–≤–∞–µ–º —Å—Ç—Ä–∞–Ω–∏—Ü—ã –ø—Ä–∏ –ø–æ–º–æ—â–∏ HTTP –∑–∞–ø—Ä–æ—Å–æ–≤, –º—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º HTTP
Client (`http_client`), –∫–æ—Ç–æ—Ä—ã–π –ø–æ—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è —Å Drupal ‚Äî Guzzle. –û–Ω —É–º–µ–µ—Ç
–æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –∑–∞–ø—Ä–æ—Å—ã –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ –∏ –¥–æ–∂–∏–¥–∞—Ç—å—Å—è –∏—Ö –æ—Ç–≤–µ—Ç–æ–≤. –≠—Ç–æ –∑–Ω–∞—á–∏—Ç —á—Ç–æ –º—ã –º–æ–∂–µ–º
–ø—Ä–æ–≥—Ä–µ–≤–∞—Ç—å X –∞–¥—Ä–µ—Å–æ–≤ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ, —Ç–µ–º —Å–∞–º—ã–º —É—Å–∫–æ—Ä—è—è –ø—Ä–æ—Ü–µ—Å—Å –ø—Ä–æ–≥—Ä–µ–≤–∞, –Ω–æ –∏
—Å–æ–∑–¥–∞–≤–∞—è —É–≤–µ–ª–∏—á–µ–Ω–Ω—É—é –Ω–∞–≥—Ä—É–∑–∫—É –Ω–∞ —Å–µ—Ä–≤–µ—Ä.

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ –ø—Ä–æ–≥—Ä–µ–≤–∞—Ç—å –ø–æ 10 –∞–¥—Ä–µ—Å–æ–≤ –∑–∞ —Ä–∞–∑, —ç—Ç–æ –∑–Ω–∞—á–∏—Ç, —á—Ç–æ –Ω–∞—à
–º–µ—Ç–æ–¥ —Å–¥–µ–ª–∞–µ—Ç 5 –ø–æ–¥—Ö–æ–¥–æ–≤ –ø–æ 10 –∑–∞–ø—Ä–æ—Å–æ–≤ –Ω–∞ –∫–∞–∂–¥—ã–π. –ö–∞–∂–¥—ã–π –ø–æ–¥—Ö–æ–¥ –±—É–¥–µ—Ç
–¥–æ–∂–∏–¥–∞—Ç—å—Å—è –æ–∫–æ–Ω—á–∞–Ω–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—Å–µ—Ö 10 –∑–∞–ø—Ä–æ—Å–æ–≤ –ø—Ä–µ–∂–¥–µ —á–µ–º –ø–µ—Ä–µ–π—Ç–∏ –∫ —Å–ª–µ–¥—É—é—â–∏–º.
–í—Å–µ –∑–∞–ø—Ä–æ—Å—ã —Å –∫–æ–¥–æ–º –æ—Ç–≤–µ—Ç–∞ –º–µ–Ω–µ–µ 399 —Å—á–∏—Ç–∞—é—Ç—Å—è —É—Å–ø–µ—à–Ω—ã–º–∏, —Å—É–º–º–∏—Ä—É—é—Ç—Å—è –∏ —ç—Ç–æ
–∑–Ω–∞—á–µ–Ω–∏–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤ –∫–∞—á–µ—Å—Ç–≤–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞.

### CatalogWarmer ‚Äî –ø–ª–∞–≥–∏–Ω –ø—Ä–æ–≥—Ä–µ–≤–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–π

`CatalogWarmer` ‚Äî –ø–ª–∞–≥–∏–Ω, –∫–æ—Ç–æ—Ä—ã–π –≥–æ—Ç–æ–≤–∏—Ç –∞–¥—Ä–µ—Å–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–π –¥–ª—è –ø—Ä–æ–≥—Ä–µ–≤–∞.

```php {"header":"src/Plugin/warmer/CatalogWarmer.php"}
<?php

declare(strict_types=1);

namespace Drupal\example\Plugin\warmer;

use Drupal\Core\Url;

/**
 * Provides warmer for catalog.
 *
 * @Warmer(
 *   id = "example_catalog",
 *   label = @Translation("Catalog"),
 *   description = @Translation("Warms all categories and some of their pages."),
 * )
 */
final class CatalogWarmer extends CatalogBasedWarmerBase {

  /**
   * {@inheritdoc}
   */
  protected function prepareUrls(): array {
    $category_ids = $this->loadCategoryIds();
    $urls = [];
    foreach ($category_ids as $category_id) {
      $urls[] = $this->buildCategoryUrl($category_id);
      $urls[] = $this->buildCategoryUrl($category_id, 0);

      $count = $this->countProductsInCategory($category_id);
      if ($count == 0) {
        continue;
      }

      $build_url_callback = function (int $page) use ($category_id, &$urls): void {
        $urls[] = $this->buildCategoryUrl($category_id, $page);
      };

      $this->prepareFirstPagesToWarm($count, $build_url_callback);
      $this->prepareLastPagesToWarm($count, $build_url_callback);
    }

    return $urls;
  }

  /**
   * Builds category URL.
   *
   * @param int $category_id
   *   The category ID.
   * @param int|null $page
   *   The query page value.
   *
   * @return string
   *   The category URL.
   */
  protected function buildCategoryUrl(int $category_id, ?int $page = NULL): string {
    $url = Url::fromRoute('entity.taxonomy_term.canonical', ['taxonomy_term' => $category_id]);
    if (isset($page)) {
      $url->setOption('query', [
        'page' => $page,
      ]);
    }
    return $url->setAbsolute()->toString();
  }

  /**
   * Executes callback to prepare first pages to warm.
   *
   * @param int $items_count
   *   The total item count.
   * @param callable $callback
   *   The callback.
   */
  protected function prepareFirstPagesToWarm(int $items_count, callable $callback): void {
    $pages_to_warm = $this->getPagesFromBeginning();
    if ($pages_to_warm <= 1) {
      return;
    }

    $pages_count = (int) \ceil($items_count / $this->getItemsPerPage());
    if ($pages_count == 1) {
      return;
    }
    if ($pages_count < $pages_to_warm) {
      $pages_to_warm = $pages_count;
    }

    // Subtract 1 because first page warmed separately.
    $pages_to_warm--;
    for ($page = 1; $page <= $pages_to_warm; $page++) {
      \call_user_func($callback, $page);
    }
  }

  /**
   * Executes callback to prepare last pages to warm.
   *
   * @param int $items_count
   *   The total item count.
   * @param callable $callback
   *   The callback.
   */
  protected function prepareLastPagesToWarm(int $items_count, callable $callback): void {
    $pages_to_warm = $this->getPagesFromEnd();
    if ($pages_to_warm == 0) {
      return;
    }

    $pages_count = (int) \ceil($items_count / $this->getItemsPerPage());
    // If total page count lesser or equal pages warmed from the beginning,
    // there is no reason to warm.
    if ($pages_count <= $this->getPagesFromBeginning()) {
      return;
    }

    $total_pages_to_warm = $this->getPagesFromBeginning() + $pages_to_warm;
    if ($total_pages_to_warm > $pages_count) {
      $pages_to_warm = $pages_count - $this->getPagesFromBeginning();
    }

    // Adjust page index for Drupal, which counts pages from 0.
    $last_page_index = $pages_count - 1;
    for ($page = $last_page_index; $page > $last_page_index - $pages_to_warm; $page--) {
      \call_user_func($callback, $page);
    }
  }

}

```

#### ::prepareFirstPagesToWarm() ‚Äî –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –ø–µ—Ä–≤—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü –¥–ª—è –ø—Ä–æ–≥—Ä–µ–≤–∞

–ú–µ—Ç–æ–¥ `::prepareFirstPagesToWarm()` —Å–æ–∑–¥–∞–Ω –¥–ª—è –æ–±–ª–µ–≥—á–µ–Ω–∏—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∞–¥—Ä–µ—Å–æ–≤ –¥–ª—è
–ø—Ä–æ–≥—Ä–µ–≤–∞ –ø–µ—Ä–≤—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü –∫–∞—Ç–∞–ª–æ–≥–∞.

–í –∫–∞—á–µ—Å—Ç–≤–µ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç:

* `$items_count`: –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–≤–∞—Ä–æ–≤ –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏.
* `$callback`: –§—É–Ω–∫—Ü–∏—è –æ–±—Ä–∞—Ç–Ω–æ–≥–æ –≤—ã–∑–æ–≤–∞, –∫–æ—Ç–æ—Ä–∞—è –±—É–¥–µ—Ç –≤—ã–∑—ã–≤–∞—Ç—å—Å—è –Ω–∞ –∫–∞–∂–¥—É—é
  —Å—Ç—Ä–∞–Ω–∏—Ü—É, —á—Ç–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø—Ä–æ–≥—Ä–µ—Ç—å.

–ü–µ—Ä–≤—ã–º –¥–µ–ª–æ–º –º—ã –ø–æ–ª—É—á–∞–µ–º –Ω–∞—Å—Ç—Ä–æ–π–∫—É, —Å–∫–æ–ª—å–∫–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø—Ä–æ–≥—Ä–µ–≤–∞—Ç—å –ø–µ—Ä–≤—ã—Ö
—Å—Ç—Ä–∞–Ω–∏—Ü. –ï—Å–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ 1 - –º—ã –Ω–∏—á–µ–≥–æ –Ω–µ –¥–µ–ª–∞–µ–º. –ü–µ—Ä–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ ‚Äî —Å—Ç—Ä–∞–Ω–∏—Ü–∞
–∫–∞—Ç–µ–≥–æ—Ä–∏–∏, –ø—Ä–æ–≥—Ä–µ–≤–∞–µ—Ç—Å—è –≤ –ª—é–±–æ–º —Å–ª—É—á–∞–µ.

–ï—Å–ª–∏ —É–∫–∞–∑–∞–Ω–æ, —á—Ç–æ –Ω—É–∂–Ω–æ –ø—Ä–æ–≥—Ä–µ–≤–∞—Ç—å –±–æ–ª—å—à–µ 1 —Å—Ç—Ä–∞–Ω–∏—Ü—ã, –º—ã —Å—á–∏—Ç–∞–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ
—Å—Ç—Ä–∞–Ω–∏—Ü –¥–ª—è –¥–∞–Ω–Ω–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏. –ï—Å–ª–∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–∞–Ω–∏—Ü —Ä–∞–≤–Ω–æ –µ–¥–∏–Ω–∏—Ü–µ, –∑–∞–≤–µ—Ä—à–∞–µ–º
–≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ. –ï—Å–ª–∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–∞–Ω–∏—Ü –ø–æ–ª—É—á–∞–µ—Ç—Å—è –º–µ–Ω—å—à–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –¥–ª—è –ø—Ä–æ–≥—Ä–µ–≤–∞,
–º—ã —Å–±—Ä–∞—Å—ã–≤–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ –¥–æ —Ç–µ–∫—É—â–µ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Å—Ç—Ä–∞–Ω–∏—Ü. –ù–∞–ø—Ä–∏–º–µ—Ä, —É –Ω–∞—Å —É–∫–∞–∑–∞–Ω–æ
–ø—Ä–æ–≥—Ä–µ–≤–∞—Ç—å –ø–µ—Ä–≤—ã–µ 3 —Å—Ç—Ä–∞–Ω–∏—Ü—ã, –Ω–æ –≤—Å–µ–≥–æ –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ 2 —Å—Ç—Ä–∞–Ω–∏—Ü—ã, –º—ã —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º
–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–∞–Ω–∏—Ü –¥–ª—è –ø—Ä–æ–≥—Ä–µ–≤–∞ —Ä–∞–≤–Ω—ã–º 2.

–ó–∞—Ç–µ–º –≤—ã—á–∏—Ç–∞–µ–º –∏–∑ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Å—Ç—Ä–∞–Ω–∏—Ü –¥–ª—è –ø—Ä–æ–≥—Ä–µ–≤–∞ –æ–¥–Ω—É (–ø–µ—Ä–≤—É—é) –∏ –Ω–∞—á–∏–Ω–∞–µ–º
–≤—ã–∑—ã–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é –æ–±—Ä–∞—Ç–Ω–æ–≥–æ –≤—ã–∑–æ–≤–∞, –ø–µ—Ä–µ–¥–∞–≤–∞—è —Ç—É–¥–∞ –Ω–æ–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã. –ù–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏
–Ω—É–∂–Ω–æ –ø—Ä–æ–≥—Ä–µ–≤–∞—Ç—å 3 —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∏ –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –µ—Å—Ç—å —Ç–∞–∫–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–∞–Ω–∏—Ü, —Ñ—É–Ω–∫—Ü–∏—è
–æ–±—Ä–∞—Ç–Ω–æ–≥–æ –≤—ã–∑–æ–≤–∞ –±—É–¥–µ—Ç –≤—ã–∑–≤–∞–Ω–∞ 2 —Ä–∞–∑–∞ —Å–æ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ 1 –∏ 2 –≤ –∫–∞—á–µ—Å—Ç–≤–µ –∞—Ä–≥—É–º–µ–Ω—Ç–∞.

–ü–æ—á–µ–º—É 1 –∏ 2, –≤–µ–¥—å –ø–µ—Ä–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –ø—Ä–æ–≥—Ä–µ–≤–∞–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ? –ù–µ –∑–∞–±—ã–≤–∞–π—Ç–µ —á—Ç–æ —É
Drupal –ø–∞–≥–∏–Ω–∞—Ü–∏—è –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å 0, –∏ –ø–µ—Ä–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —ç—Ç–æ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏ `?page=0`,
–∞ `?page=1` - —ç—Ç–æ –≤—Ç–æ—Ä–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞, —Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ, `?page=2` - —Ç—Ä–µ—Ç—å—è.

#### ::prepareLastPagesToWarm() ‚Äî –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö —Å—Ç—Ä–∞–Ω–∏—Ü –¥–ª—è –ø—Ä–æ–≥—Ä–µ–≤–∞

–ú–µ—Ç–æ–¥ `::prepareLastPagesToWarm()` –∞–Ω–∞–ª–æ–≥ `::prepareFirstPagesToWarm()`, —Å
–∏–¥–µ–Ω—Ç–∏—á–Ω–æ–π –∑–∞–¥–∞—á–µ–π –∏ –ø–æ–≤–µ–¥–µ–Ω–∏–µ–º, —Ç–æ–ª—å–∫–æ –æ–Ω –≥–æ—Ç–æ–≤–∏—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Å –∫–æ–Ω—Ü–∞.

–í –∫–∞—á–µ—Å—Ç–≤–µ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç:

* `$items_count`: –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–≤–∞—Ä–æ–≤ –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏.
* `$callback`: –§—É–Ω–∫—Ü–∏—è –æ–±—Ä–∞—Ç–Ω–æ–≥–æ –≤—ã–∑–æ–≤–∞, –∫–æ—Ç–æ—Ä–∞—è –±—É–¥–µ—Ç –≤—ã–∑—ã–≤–∞—Ç—å—Å—è –Ω–∞ –∫–∞–∂–¥—É—é
  —Å—Ç—Ä–∞–Ω–∏—Ü—É, —á—Ç–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø—Ä–æ–≥—Ä–µ—Ç—å.

–ü–µ—Ä–≤—ã–º –¥–µ–ª–æ–º –ø—Ä–æ–≤–µ—Ä—è–µ–º, —Å–∫–æ–ª—å–∫–æ —Å—Ç—Ä–∞–Ω–∏—Ü –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø—Ä–æ–≥—Ä–µ–≤–∞—Ç—å —Å –∫–æ–Ω—Ü–∞ —Å–ø–∏—Å–∫–∞.
–ï—Å–ª–∏ —ç—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ —Ä–∞–≤–Ω–æ 0, –º—ã —Å—Ä–∞–∑—É –∑–∞–≤–µ—Ä—à–∞–µ–º –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ.

–î–∞–ª–µ–µ —Å—á–∏—Ç–∞–µ–º –∏—Ç–æ–≥–æ–≤–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–∞–Ω–∏—Ü –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏. –ï—Å–ª–∏ –æ–Ω–æ –º–µ–Ω—å—à–µ –∏–ª–∏ —Ä–∞–≤–Ω–æ
–∫–æ–ª–∏—á–µ—Å—Ç–≤—É –ø–µ—Ä–≤—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü –¥–ª—è –ø—Ä–æ–≥—Ä–µ–≤–∞, –º—ã –∑–∞–≤–µ—Ä—à–∞–µ–º –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ. –ù–∞–ø—Ä–∏–º–µ—Ä, –∏–º–µ–µ–º
3 —Å—Ç—Ä–∞–Ω–∏—Ü—ã, —Å—Ç—Ä–∞–Ω–∏—Ü —Å –Ω–∞—á–∞–ª–∞ –ø—Ä–æ–≥—Ä–µ–≤–∞–µ—Ç—Å—è —Ç–æ–∂–µ 3, –∞ —Å –∫–æ–Ω—Ü–∞ 1. –ù–∞–º –Ω–µ—Ç —Å–º—ã—Å–ª–∞
—á—Ç–æ-–ª–∏–±–æ –¥–µ–ª–∞—Ç—å, —Ç–∞–∫ –∫–∞–∫ –≤—Å–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –±—É–¥—É—Ç –ø—Ä–æ–≥—Ä–µ—Ç—ã
–±–ª–∞–≥–æ–¥–∞—Ä—è `::prepareFirstPagesToWarm()`.

–ó–∞—Ç–µ–º, –º—ã —Å—á–∏—Ç–∞–µ–º, —Å–∫–æ–ª—å–∫–æ –≤—Å–µ–≥–æ –Ω–∞—à –ø–ª–∞–≥–∏–Ω —Ö–æ—á–µ—Ç –ø—Ä–æ–≥—Ä–µ—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü. –î–ª—è —ç—Ç–æ–≥–æ –º—ã
—Å–∫–ª–∞–¥—ã–≤–∞–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–∞–Ω–∏—Ü –¥–ª—è –ø—Ä–æ–≥—Ä–µ–≤–∞ —Å –Ω–∞—á–∞–ª–∞ —Å–ø–∏—Å–∫–∞ –∏ —Å –∫–æ–Ω—Ü–∞. –ó–∞—Ç–µ–º
–ø—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å–ª–∏ –ø–æ–ª—É—á–∏–≤—à–∏–π—Å—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç –±–æ–ª—å—à–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Å—Ç—Ä–∞–Ω–∏—Ü –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏, –º—ã
—Å—á–∏—Ç–∞–µ–º –æ—Å—Ç–∞—Ç–æ–∫ –¥–ª—è –ø—Ä–æ–≥—Ä–µ–≤–∞. –ù–∞–ø—Ä–∏–º–µ—Ä, –º—ã –∏–º–µ–µ–º –Ω–∞—Å—Ç—Ä–æ–π–∫—É –ø—Ä–æ–≥—Ä–µ–≤–∞—Ç—å 3 —Å—Ç—Ä–∞–Ω–∏—Ü—ã
—Å –Ω–∞—á–∞–ª–∞ —Å–ø–∏—Å–∫–∞ –∏ 3 —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Å –∫–æ–Ω—Ü–∞, –∏—Ç–æ–≥–æ 6, –Ω–æ –≤—Å–µ–≥–æ –º—ã –∏–º–µ–µ–º 4 —Å—Ç—Ä–∞–Ω–∏—Ü—ã. 3
–ø–µ—Ä–≤—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –±—É–¥—É—Ç –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω—ã `::prepareFirstPagesToWarm()`. –í—ã—á–∏—Ç–∞–µ–º –∏–∑
–∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Å—Ç—Ä–∞–Ω–∏—Ü, —ç—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ (4-3) –∏ –ø–æ–ª—É—á–∞–µ–º 1 ‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–∞–Ω–∏—Ü, —á—Ç–æ
—Ç—Ä–µ–±—É–µ—Ç—Å—è –ø—Ä–æ–≥—Ä–µ—Ç—å —Å –∫–æ–Ω—Ü–∞, —á—Ç–æ–±—ã –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–æ–∫—Ä—ã—Ç—å –≤—Å–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –≤ —Ç–∞–∫–æ–º –∫–µ–π—Å–µ.

–ó–∞—Ç–µ–º –º—ã –≥–æ—Ç–æ–≤–∏–º –∏–Ω–¥–µ–∫—Å –ø–æ—Å–ª–µ–¥–Ω–µ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã, –æ—Ç –∫–æ—Ç–æ—Ä–æ–≥–æ –º—ã –±—É–¥–µ–º –æ—Ç—Å—á–∏—Ç—ã–≤–∞—Ç—å –≤
–æ–±—Ä–∞—Ç–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ. –î–ª—è —ç—Ç–æ–≥–æ –º—ã –≤—ã—á–∏—Ç–∞–µ–º –µ–¥–∏–Ω–∏—Ü—É –∫–∞–∫
–≤ `::prepareFirstPagesToWarm()`, —Ç–∞–∫ –∫–∞–∫ –ø–∞–≥–∏–Ω–∞—Ü–∏—è –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å 0, –∏ 100
—Å—Ç—Ä–∞–Ω–∏—Ü–∞ –±—É–¥–µ—Ç –∏–º–µ—Ç—å –∏–Ω–¥–µ–∫—Å 99.

–í –∫–æ–Ω–µ—á–Ω–æ–º –∏—Ç–æ–≥–µ –º—ã –≤—ã–∑—ã–≤–∞–µ–º —Ñ—É–Ω–∫—Ü–∏—é –æ–±—Ä–∞—Ç–Ω–æ–≥–æ –≤—ã–∑–æ–≤–∞ —Å –∏–Ω–¥–µ–∫—Å–∞–º–∏ —Å—Ç—Ä–∞–Ω–∏—Ü, —á—Ç–æ
–Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø—Ä–æ–≥—Ä–µ—Ç—å —Å –∫–æ–Ω—Ü–∞. –ù–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ –Ω—É–∂–Ω–æ –ø—Ä–æ–≥—Ä–µ—Ç—å 3 —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Å –Ω–∞—á–∞–ª–∞ –∏
–∫–æ–Ω—Ü–∞, –∞ —Å—Ç—Ä–∞–Ω–∏—Ü 50, —Ç–æ —Ñ—É–Ω–∫—Ü–∏—è –æ–±—Ä–∞—Ç–Ω–æ–≥–æ –≤—ã–∑–æ–≤–∞ –±—É–¥–µ—Ç –≤—ã–∑–≤–∞–Ω–∞ —Ç—Ä–∏–∂–¥—ã, —Å–æ
–∑–Ω–∞—á–µ–Ω–∏—è–º–∏ 49, 48 –∏ 47 —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ.

#### ::buildCategoryUrl() ‚Äî —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–¥—Ä–µ—Å–∞ –¥–ª—è –ø—Ä–æ–≥—Ä–µ–≤–∞

–£—Ç–∏–ª–∏—Ç–∞—Ä–Ω—ã–π –º–µ—Ç–æ–¥ `::buildCategoryUrl()` –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∞–¥—Ä–µ—Å –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –¥–ª—è –ø—Ä–æ–≥—Ä–µ–≤–∞
—Å –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–º –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º –¥–ª—è –ø–∞–≥–∏–Ω–∞—Ü–∏–∏.

–í –∫–∞—á–µ—Å—Ç–≤–µ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç:

* `$category_id`: ID –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –¥–ª—è –∫–æ—Ç–æ—Ä–æ–π –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º –∞–¥—Ä–µ—Å.
* `$page`: (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –ò–Ω–¥–µ–∫—Å —Å—Ç—Ä–∞–Ω–∏—Ü—ã –¥–ª—è –ø—Ä–æ–≥—Ä–µ–≤–∞.

–í –∫–∞—á–µ—Å—Ç–≤–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –º–µ—Ç–æ–¥ –≤–µ—Ä–Ω—ë—Ç –∞–±—Å–æ–ª—é—Ç–Ω—ã–π –∞–¥—Ä–µ—Å –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —Å query –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º
–¥–ª—è –ø–∞–≥–∏–Ω–∞—Ü–∏–∏, –µ—Å–ª–∏ —ç—Ç–æ —Ç—Ä–µ–±—É–µ—Ç—Å—è. –≠—Ç–æ—Ç –∞–¥—Ä–µ—Å –±—É–¥–µ—Ç –∑–∞–ø—Ä–∞—à–∏–≤–∞—Ç—å—Å—è –¥–ª—è –ø—Ä–æ–≥—Ä–µ–≤–∞.

#### ::prepareUrls() ‚Äî –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∞–¥—Ä–µ—Å–æ–≤

–ú–µ—Ç–æ–¥ `::prepareUrls()` —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç –∞–¥—Ä–µ—Å–∞ –¥–ª—è –ø—Ä–æ–≥—Ä–µ–≤–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–π.

–í –Ω—ë–º –º—ã –ø–æ–ª—É—á–∞–µ–º ID –≤—Å–µ—Ö –∞–∫—Ç–∏–≤–Ω—ã—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π –ø—Ä–∏ –ø–æ–º–æ—â–∏ `::loadCategoryIds()`, –∞
–∑–∞—Ç–µ–º –∏–¥—ë–º –ø–æ –∫–∞–∂–¥–æ–π –∏–∑ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º –∞–¥—Ä–µ—Å–∞:

* –°—Ä–∞–∑—É –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º –¥–≤–∞ –ø—É—Ç–∏ –¥–ª—è –æ—Å–Ω–æ–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Å –∏–Ω–¥–µ–∫—Å–æ–º 0, —á—Ç–æ
  —Ä–∞–≤–Ω–æ—Å–∏–ª—å–Ω–æ –æ—Å–Ω–æ–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ. –ï—Å–ª–∏ —É –≤–∞—Å —ç—Ç–æ—Ç –º–æ–º–µ–Ω—Ç –Ω–∏–∫–∞–∫ –Ω–µ –∏–∑–º–µ–Ω—ë–Ω –Ω–∞
  –ø—Ä–æ–µ–∫—Ç–µ, –≤–∞–∂–Ω–æ –Ω–µ –∑–∞–±—ã–≤–∞—Ç—å –ø—Ä–æ –ø–µ—Ä–≤—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É, –∫–æ—Ç–æ—Ä–∞—è –±—É–¥–µ—Ç –∏–º–µ—Ç—å `?page=0`.
  –ú—ã –ø—Ä–æ–≥—Ä–µ–≤–∞–µ–º —ç—Ç–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ç–æ–≤–∞—Ä–æ–≤ –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏, —á—Ç–æ–±—ã
  –æ–Ω–∞ –≤—Å–µ–≥–¥–∞ –æ—Ç–∫—Ä—ã–≤–∞–ª–∞—Å—å –±—ã—Å—Ç—Ä–æ. –†–∞–∑ –æ–Ω–∞ –∞–∫—Ç–∏–≤–Ω–∞ –∏ –±–µ–∑ —Ç–æ–≤–∞—Ä–æ–≤, –∑–Ω–∞—á–∏—Ç
  –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –Ω–∞ –Ω–µ—ë —Å–º–æ–≥—É—Ç –ø–æ–ø–∞—Å—Ç—å.
* –°—á–∏—Ç–∞–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–≤–∞—Ä–æ–≤ –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏. –ï—Å–ª–∏ –∏—Ö 0, –ø–µ—Ä–µ—Ö–æ–¥–∏–º –∫ —Å–ª–µ–¥—É—é—â–µ–π
  –∫–∞—Ç–µ–≥–æ—Ä–∏–∏.
* –ï—Å–ª–∏ —Ç–æ–≤–∞—Ä–æ–≤ –±–æ–ª—å—à–µ 0, –º—ã –≤—ã–∑—ã–≤–∞–µ–º `::prepareFirstPagesToWarm()` –¥–ª—è
  –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ –∞–¥—Ä–µ—Å–æ–≤ –¥–ª—è –ø—Ä–æ–≥—Ä–µ–≤–∞ —Å –Ω–∞—á–∞–ª–∞ —Å–ø–∏—Å–∫–∞. –§—É–Ω–∫—Ü–∏—è –æ–±—Ä–∞—Ç–Ω–æ–≥–æ –≤—ã–∑–æ–≤–∞
  –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∞–¥—Ä–µ—Å —Å –ø–æ–ª—É—á–µ–Ω–Ω—ã–º –∏–Ω–¥–µ–∫—Å–æ–º —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∏ –¥–æ–±–∞–≤–ª—è–µ–º –≤ –æ–±—â–∏–π –º–∞—Å—Å–∏–≤
  –∞–¥—Ä–µ—Å–æ–≤.
* –ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ –¥–µ–ª–∞–µ–º –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü —Å –∫–æ–Ω—Ü–∞ —Å–ø–∏—Å–∫–∞, –Ω–æ –ø—Ä–∏ –ø–æ–º–æ—â–∏
  –º–µ—Ç–æ–¥–∞ `::prepareLastPagesToWarm()`.

–í –∫–æ–Ω–µ—á–Ω–æ–º –∏—Ç–æ–≥–µ –º—ã –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –¥–∞–Ω–Ω—ã–µ –∞–¥—Ä–µ—Å–∞.

### ProductWarmer ‚Äî –ø–ª–∞–≥–∏–Ω –ø—Ä–æ–≥—Ä–µ–≤–∞ —Ç–æ–≤–∞—Ä–æ–≤

`ProductWarmer` ‚Äî –ø–ª–∞–≥–∏–Ω, –∫–æ—Ç–æ—Ä—ã–π –≥–æ—Ç–æ–≤–∏—Ç –∞–¥—Ä–µ—Å–∞ —Ç–æ–≤–∞—Ä–æ–≤ –¥–ª—è –ø—Ä–æ–≥—Ä–µ–≤–∞.

```php {"header":"src/Plugin/warmer/ProductWarmer.php"}
<?php

declare(strict_types=1);

namespace Drupal\example\Plugin\warmer;

use Drupal\Core\Url;

/**
 * Provides warmer for products.
 *
 * @Warmer(
 *   id = "example_product",
 *   label = @Translation("Products"),
 *   description = @Translation("Warms specific products based on categories and pagination."),
 * )
 */
final class ProductWarmer extends CatalogBasedWarmerBase {

  /**
   * {@inheritdoc}
   */
  protected function prepareUrls(): array {
    $product_ids = [];
    $category_ids = $this->loadCategoryIds();
    foreach ($category_ids as $category_id) {
      $count = $this->countProductsInCategory($category_id);
      if ($count == 0) {
        continue;
      }
      $page_count = (int) \ceil($count / $this->getItemsPerPage());
      $product_ids = \array_merge($product_ids, $this->prepareFirstProductIdsToWarm($page_count, $category_id));
      $product_ids = \array_merge($product_ids, $this->prepareLastProductIdsToWarm($count, $page_count, $category_id));
    }

    $urls = [];
    foreach (\array_unique($product_ids) as $product_id) {
      $urls[] = $this->buildProductUrl((int) $product_id);
    }

    return $urls;
  }

  /**
   * Looking for product IDs from the first pages.
   *
   * @param int $page_count
   *   The total pages in category.
   * @param int $category_id
   *   The category ID.
   *
   * @return array
   *   An array with product IDs.
   */
  protected function prepareFirstProductIdsToWarm(int $page_count, int $category_id): array {
    $first_pages_to_warm = $this->getPagesFromBeginning();
    if ($page_count < $first_pages_to_warm) {
      $first_pages_to_warm = $page_count;
    }
    $query = $this->getProductsQuery($category_id);
    $query->range(0, $first_pages_to_warm * $this->getItemsPerPage());
    return $query->execute();
  }

  /**
   * Looking for product IDs from the last pages.
   *
   * @param int $item_count
   *   The total items in category.
   * @param int $page_count
   *   The total pages in category.
   * @param int $category_id
   *   The category ID.
   *
   * @return array
   *   An array with product IDs.
   */
  protected function prepareLastProductIdsToWarm(int $item_count, int $page_count, int $category_id): array {
    $last_pages_to_warm = $this->getPagesFromEnd();
    if ($last_pages_to_warm == 0) {
      return [];
    }

    $first_pages_to_warm = $this->getPagesFromBeginning();
    $total_pages_to_warm = $first_pages_to_warm + $last_pages_to_warm;
    if ($total_pages_to_warm > $page_count) {
      $last_pages_to_warm = $page_count - $first_pages_to_warm;
    }

    // At this point value can also be negative. E.g. 3 first pages, 3 last,
    // and only 2 total pages.
    if ($last_pages_to_warm <= 0) {
      return [];
    }

    // First, count as if the pages are full.
    $items_to_warm = $last_pages_to_warm * $this->getItemsPerPage();
    // Then check, if last page isn't full.
    if (($leftover_items = $item_count % $this->getItemsPerPage()) > 0) {
      // If it isn't full, subtract missing amount from total items.
      $items_to_warm -= $this->getItemsPerPage() - $leftover_items;
    }

    $query = $this->getProductsQuery($category_id, TRUE);
    $query->range(0, $items_to_warm);
    return $query->execute();
  }

  /**
   * Builds absolute URL for product page.
   *
   * @param int $product_id
   *   The product ID.
   *
   * @return string
   *   The product page URL.
   */
  protected function buildProductUrl(int $product_id): string {
    $route_name = 'entity.' . $this->getProductEntityTypeId() . '.canonical';
    return Url::fromRoute($route_name, [$this->getProductEntityTypeId() => $product_id])
      ->setAbsolute()
      ->toString();
  }

}

```

#### ::prepareFirstProductIdsToWarm() ‚Äî –ø–æ–ª—É—á–µ–Ω–∏–µ ID —Ç–æ–≤–∞—Ä–æ–≤ —Å –ø–µ—Ä–≤—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü

–í –º–µ—Ç–æ–¥–µ `::prepareFirstProductIdsToWarm()` –º—ã –ø–æ–ª—É—á–∞–µ–º ID —Ç–æ–≤–∞—Ä–æ–≤ —Å –ø–µ—Ä–≤—ã—Ö
—Å—Ç—Ä–∞–Ω–∏—Ü.

–í –∫–∞—á–µ—Å—Ç–≤–µ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç:

* `$page_count`: –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–∞–Ω–∏—Ü –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏.
* `$category_id`: ID –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —Å –∫–æ—Ç–æ—Ä–æ–π —Ä–∞–±–æ—Ç–∞–µ–º.

–ü–µ—Ä–≤—ã–º –¥–µ–ª–æ–º –ø—Ä–æ–≤–µ—Ä—è–µ–º, —Å –∫–∞–∫–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Å—Ç—Ä–∞–Ω–∏—Ü –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø—Ä–æ–≥—Ä–µ—Ç—å —Ç–æ–≤–∞—Ä—ã.
–ù–µ –∑–∞–±—ã–≤–∞–π—Ç–µ —á—Ç–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü –º–æ–≥—É—Ç –±—ã—Ç—å —Ä–∞–∑–Ω—ã–µ –¥–ª—è –¥–≤—É—Ö –ø–ª–∞–≥–∏–Ω–æ–≤. –ï—Å–ª–∏ —ç—Ç–æ
–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–∞–Ω–∏—Ü –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –º–µ–Ω—å—à–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–≥–æ –¥–ª—è –ø—Ä–æ–≥—Ä–µ–≤–∞, —Ç–æ
—É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ç–µ–∫—É—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–∞–Ω–∏—Ü –¥–ª—è –ø—Ä–æ–≥—Ä–µ–≤–∞.

–ó–∞—Ç–µ–º –ø–æ–ª—É—á–∞–µ–º —ç–∫–∑–µ–º–ø–ª—è—Ä –¥–ª—è –∑–∞–ø—Ä–æ—Å–∞ —Ç–æ–≤–∞—Ä–æ–≤ –ø—Ä–∏ –ø–æ–º–æ—â–∏ `::getProductsQuery()` –∏
—É–∫–∞–∑—ã–≤–∞–µ–º —Å–∫–æ–ª—å–∫–æ —Ç–æ–≤–∞—Ä–æ–≤ –ø–æ–ª—É—á–∞—Ç—å –æ—Ç 0 –¥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Å—Ç—Ä–∞–Ω–∏—Ü –Ω–∞ –ø—Ä–æ–≥—Ä–µ–≤
—É–º–Ω–æ–∂–µ–Ω–Ω–æ–≥–æ –Ω–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É.

–í–æ–∑–≤—Ä–∞—â–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∑–∞–ø—Ä–æ—Å–∞.

#### ::prepareLastProductIdsToWarm() ‚Äî –ø–æ–ª—É—á–µ–Ω–∏–µ ID —Ç–æ–≤–∞—Ä–æ–≤ —Å –ø–æ—Å–ª–µ–¥–Ω–∏—Ö —Å—Ç—Ä–∞–Ω–∏—Ü

–í –º–µ—Ç–æ–¥–µ `::prepareLastProductIdsToWarm()` –º—ã –ø–æ–ª—É—á–∞–µ–º ID —Ç–æ–≤–∞—Ä–æ–≤ —Å –ø–æ—Å–ª–µ–¥–Ω–∏—Ö
—Å—Ç—Ä–∞–Ω–∏—Ü.

–í –∫–∞—á–µ—Å—Ç–≤–µ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç:

* `$item_count`: –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–≤–∞—Ä–æ–≤ –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏.
* `$page_count`: –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–∞–Ω–∏—Ü –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏.
* `$category_id`: ID –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —Å –∫–æ—Ç–æ—Ä–æ–π —Ä–∞–±–æ—Ç–∞–µ–º.

–ü–µ—Ä–≤—ã–º –¥–µ–ª–æ–º –ø—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–∞–Ω–∏—Ü —Å –∫–æ–Ω—Ü–∞, –¥–ª—è –∫–æ—Ç–æ—Ä—ã—Ö –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ
–ø—Ä–æ–≥—Ä–µ—Ç—å —Ç–æ–≤–∞—Ä—ã, –±–æ–ª—å—à–µ 0, –∏–Ω–∞—á–µ –∑–∞–≤–µ—Ä—à–∞–µ–º –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ. –ï—Å–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ –±–æ–ª—å—à–µ 0,
–º—ã —Å—á–∏—Ç–∞–µ–º –æ–±—â–µ–µ —á–∏—Å–ª–æ —Å—Ç—Ä–∞–Ω–∏—Ü –¥–ª—è –ø—Ä–æ–≥—Ä–µ–≤–∞, —Å–∫–ª–∞–¥—ã–≤–∞—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–∞–Ω–∏—Ü —Å
–Ω–∞—á–∞–ª–∞ –∏ –∫–æ–Ω—Ü–∞.

–ï—Å–ª–∏ –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–∞–Ω–∏—Ü –±–æ–ª—å—à–µ —á–µ–º –≤—Å–µ–≥–æ —Å—Ç—Ä–∞–Ω–∏—Ü –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏, –º—ã –ø–æ–ª—É—á–∞–µ–º
—Å–∫–æ–ª—å–∫–æ –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø—Ä–æ–≥—Ä–µ—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü —Å –∫–æ–Ω—Ü–∞. –î–ª—è —ç—Ç–æ–≥–æ –≤—ã—á–∏—Ç–∞–µ–º –∏–∑
–æ–±—â–µ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Å—Ç—Ä–∞–Ω–∏—Ü, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–∞–Ω–∏—Ü –ø—Ä–æ–≥—Ä–µ–≤–∞–µ–º—ã—Ö —Å –Ω–∞—á–∞–ª–∞ —Å–ø–∏—Å–∫–∞.
–ù–∞–ø—Ä–∏–º–µ—Ä, –º—ã —Ö–æ—Ç–∏–º –ø—Ä–æ–≥—Ä–µ–≤–∞—Ç—å 3 —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Å –Ω–∞—á–∞–ª–∞ –∏ –∫–æ–Ω—Ü–∞. –ò—Ç–æ–≥–æ –Ω–∞–º –Ω—É–∂–Ω–æ
–ø—Ä–æ–≥—Ä–µ—Ç—å 6 —Å—Ç—Ä–∞–Ω–∏—Ü, –Ω–æ —Å—Ç—Ä–∞–Ω–∏—Ü —É –Ω–∞—Å 5. –ü–µ—Ä–≤—ã–µ —Ç—Ä–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –ø–æ–¥–≥–æ—Ç–æ–≤—è—Ç—Å—è
–º–µ—Ç–æ–¥–æ–º `::prepareFirstProductIdsToWarm()`, –Ω–∞–º –æ—Å—Ç–∞–µ—Ç—Å—è –ø—Ä–æ–≥—Ä–µ—Ç—å –≤—Å–µ–≥–æ –¥–≤–µ
—Å—Ç—Ä–∞–Ω–∏—Ü—ã —Å –∫–æ–Ω—Ü–∞.

–ó–∞—Ç–µ–º —É–±–µ–∂–¥–∞–µ–º—Å—è, —á—Ç–æ –∏—Ç–æ–≥–æ–≤–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–∞–Ω–∏—Ü –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ–µ. –ï—Å–ª–∏ –æ–Ω–æ —Ä–∞–≤–Ω–æ
–Ω—É–ª—é –∏–ª–∏ –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–æ–µ, —Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –ø—É—Å—Ç–æ–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç. –ù–∞–ø—Ä–∏–º–µ—Ä, —Ö–æ—Ç–∏–º
–ø—Ä–æ–≥—Ä–µ–≤–∞—Ç—å 3 —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Å –Ω–∞—á–∞–ª–∞ –∏ –∫–æ–Ω—Ü–∞, –∞ —Å—Ç—Ä–∞–Ω–∏—Ü –≤—Å–µ–≥–æ 2. –ù–∞ —Ç–µ–∫—É—â–µ–º —ç—Ç–∞–ø–µ —É
–Ω–∞—Å –ø–æ–ª—É—á–∏—Ç—Å—è –∑–Ω–∞—á–µ–Ω–∏–µ -4=2-(3+3).

–ï—Å–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ–µ, —Ç–æ —Å—á–∏—Ç–∞–µ–º, —Å–∫–æ–ª—å–∫–æ —Ç–æ–≤–∞—Ä–æ–≤ –Ω–∞–º –Ω—É–∂–Ω–æ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏
–ø—Ä–æ–≥—Ä–µ—Ç—å —Å –∫–æ–Ω—Ü–∞. –°–Ω–∞—á–∞–ª–∞ –ø–æ–ª—É—á–∞–µ–º –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–≤–∞—Ä–æ–≤, —á—Ç–æ –º—ã –º–æ–∂–µ–º
–ø—Ä–æ–≥—Ä–µ—Ç—å —Å –∫–æ–Ω—Ü–∞ ‚Äî –¥–ª—è —ç—Ç–æ–≥–æ —É–º–Ω–æ–∂–∞–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–∞–Ω–∏—Ü –¥–ª—è –ø—Ä–æ–≥—Ä–µ–≤–∞ –Ω–∞
–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–≤–∞—Ä–æ–≤ –Ω–∞ –æ–¥–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ. –ó–∞—Ç–µ–º, –º—ã –ø—Ä–æ–≤–µ—Ä—è–µ–º, –ø–æ–ª–Ω–æ—Å—Ç—å—é –ª–∏
–∑–∞–ø–æ–ª–Ω–µ–Ω–∞ –ø–æ—Å–ª–µ–¥–Ω—è—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Ç–æ–≤–∞—Ä–∞–º–∏ ‚Äî –¥–ª—è —ç—Ç–æ–≥–æ –¥–µ–ª–∏–º –ø–æ –º–æ–¥—É–ª—é –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ
—Ç–æ–≤–∞—Ä–æ–≤ –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –Ω–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–≤–∞—Ä–æ–≤ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É. –ï—Å–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ –Ω–µ —Ä–∞–≤–Ω–æ
–Ω—É–ª—é, –∑–Ω–∞—á–∏—Ç —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–ø–æ–ª–Ω–µ–Ω–∞ —á–∞—Å—Ç–∏—á–Ω–æ. –ï—Å–ª–∏ –æ–Ω–∞ –∑–∞–ø–æ–ª–Ω–µ–Ω–∞ —á–∞—Å—Ç–∏—á–Ω–æ, —Ç–æ
—Å—á–∏—Ç–∞–µ–º —Å–∫–æ–ª—å–∫–æ –ª–∏—à–Ω–∏—Ö —Ç–æ–≤–∞—Ä–æ–≤ —Å–µ–π—á–∞—Å —Å–æ–¥–µ—Ä–∂–∏—Ç—Å—è –≤ –æ–±—â–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –Ω–∞ –ø—Ä–æ–≥—Ä–µ–≤ ‚Äî
–¥–ª—è —ç—Ç–æ–≥–æ –≤—ã—á–∏—Ç–∞–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–≤–∞—Ä–æ–≤ –Ω–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ –∏–∑ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞
—Ç–æ–≤–∞—Ä–æ–≤ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É. –ó–∞—Ç–µ–º —ç—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ –≤—ã—á–∏—Ç–∞–µ–º –∏–∑ –æ–±—â–µ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞, –∫–æ—Ç–æ—Ä–æ–µ
–ø–æ–¥—Ä–∞–∑—É–º–µ–≤–∞–ª–æ —á—Ç–æ –≤—Å–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∑–∞–ø–æ–ª–Ω–µ–Ω—ã –ø–æ–ª–Ω–æ—Å—Ç—å—é.

–ù–∞–ø—Ä–∏–º–µ—Ä, —É –Ω–∞—Å 52 —Ç–æ–≤–∞—Ä–∞ –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏, –ø–æ 10 –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É. –ú—ã —Ö–æ—Ç–∏–º –ø—Ä–æ–≥—Ä–µ–≤–∞—Ç—å
—Ç–æ–≤–∞—Ä—ã —Å –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –¥–≤—É—Ö —Å—Ç—Ä–∞–Ω–∏—Ü. –ò–∑–Ω–∞—á–∞–ª—å–Ω–æ –ø–æ–ª—É—á–∏—Ç—Å—è —á—Ç–æ –Ω–∞–º –Ω—É–∂–Ω–æ –ø—Ä–æ–≥—Ä–µ–≤–∞—Ç—å
20 —Ç–æ–≤–∞—Ä–æ–≤, –Ω–æ –¥–µ–ª–µ–Ω–∏–µ–º –ø–æ –º–æ–¥—É–ª—é –º—ã –æ–±–Ω–∞—Ä—É–∂–∏–º —á—Ç–æ –Ω–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ –≤—Å–µ–≥–æ 2
—Ç–æ–≤–∞—Ä–∞. –í—ã—Ö–æ–¥–∏—Ç —á—Ç–æ –Ω–∞ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç –º—ã –ø–ª–∞–Ω–∏—Ä—É–µ–º –ø—Ä–æ–≥—Ä–µ—Ç—å –Ω–∞ 8 —Ç–æ–≤–∞—Ä–æ–≤ –±–æ–ª—å—à–µ
—á–µ–º –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ, –ø–æ—ç—Ç–æ–º—É –≤—ã—á–∏—Ç–∞–µ–º –¥–∞–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ —Ä–∞–Ω–µ–µ –ø–æ–ª—É—á–µ–Ω–Ω—ã—Ö 20. –¢–∞–∫ –º—ã
–≤—ã—á–∏—Å–ª—è–µ–º —á—Ç–æ –Ω—É–∂–Ω–æ –ø—Ä–æ–≥—Ä–µ—Ç—å –≤—Å–µ–≥–æ 12 —Ç–æ–≤–∞—Ä–æ–≤, –¥–ª—è —Ç–æ–≥–æ —á—Ç–æ–±—ã –ø–æ–∫—Ä—ã—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–µ
–¥–≤–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã.

–í –∫–æ–Ω–µ—á–Ω–æ–º –∏—Ç–æ–≥–µ –º—ã –≥–æ—Ç–æ–≤–∏–º –∑–∞–ø—Ä–æ—Å
–∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ `::prepareFirstProductIdsToWarm()`, —Ç–æ–ª—å–∫–æ –ø—Ä–∏
–≤—ã–∑–æ–≤–µ `::getProductsQuery()` –≤—Ç–æ—Ä—ã–º –∞—Ä–≥—É–º–µ–Ω—Ç–æ–º –º—ã —É–∫–∞–∑—ã–≤–∞–µ–º —á—Ç–æ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫—É
–Ω—É–∂–Ω–æ –æ–±—Ä–∞—Ç–∏—Ç—å. –í—ã–∑—ã–≤–∞–µ–º –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –µ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç.

#### ::buildProductUrl() ‚Äî —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–¥—Ä–µ—Å–∞ –¥–ª—è –ø—Ä–æ–≥—Ä–µ–≤–∞

–ú–µ—Ç–æ–¥ `::buildProductUrl()` —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç –∞–±—Å–æ–ª—é—Ç–Ω—ã–π –ø—É—Ç—å –¥–æ —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Ç–æ–≤–∞—Ä–∞ –ø–æ –µ–≥–æ
ID. –≠—Ç–æ—Ç –º–µ—Ç–æ–¥ —Ç–∞–∫–∂–µ —É—á–∏—Ç—ã–≤–∞–µ—Ç —Ç–∏–ø —Å—É—â–Ω–æ—Å—Ç–∏, –∫–æ—Ç–æ—Ä—ã–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Ç–æ–≤–∞—Ä–æ–≤.

#### ::prepareUrls() ‚Äî –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∞–¥—Ä–µ—Å–æ–≤

–ú–µ—Ç–æ–¥ `::prepareUrls()` —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç –∞–¥—Ä–µ—Å–∞ –¥–ª—è –ø—Ä–æ–≥—Ä–µ–≤–∞ —Ç–æ–≤–∞—Ä–æ–≤.

–ü–µ—Ä–≤—ã–º –¥–µ–ª–æ–º –ø–æ–ª—É—á–∞–µ–º –≤—Å–µ –∞–∫—Ç–∏–≤–Ω—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –Ω–∞ —Å–∞–π—Ç–µ, –ø–æ—Å–ª–µ —á–µ–≥–æ –Ω–∞—á–∏–Ω–∞–µ–º
–ø—Ä–æ—Ö–æ–¥–∏—Ç—å—Å—è –ø–æ –∫–∞–∂–¥–æ–π –∏–∑ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —Ü–∏–∫–ª–æ–º.

–í —Ü–∏–∫–ª–µ –º—ã –ø–µ—Ä–≤—ã–º –¥–µ–ª–æ–º –ø—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ —Ç–æ–≤–∞—Ä–æ–≤ –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –±–æ–ª—å—à–µ 0, –∏–Ω–∞—á–µ –Ω–∞–º
–Ω–µ—á–µ–≥–æ –ø—Ä–æ–≥—Ä–µ–≤–∞—Ç—å. –ï—Å–ª–∏ —Ç–æ–≤–∞—Ä–æ–≤ –±–æ–ª—å—à–µ 0, –º—ã –ø–æ–ª—É—á–∞–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–∞–Ω–∏—Ü –ø—É—Ç—ë–º
–¥–µ–ª–µ–Ω–∏—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ç–æ–≤–∞—Ä–æ–≤ –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –Ω–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–≤–∞—Ä–æ–≤ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –∏ —Å—Ä–∞–∑—É
–æ–∫—Ä—É–≥–ª—è—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤–≤–µ—Ä—Ö. –ù–∞–ø—Ä–∏–º–µ—Ä, 2.1 - —ç—Ç–æ –∑–Ω–∞—á–∏—Ç —á—Ç–æ —É –Ω–∞—Å 3 —Å—Ç—Ä–∞–Ω–∏—Ü—ã, –Ω–æ 3
—Å—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–∞ —Ü–µ–ª–∏–∫–æ–º —Ç–æ–≤–∞—Ä–∞–º–∏.

–ü–æ—Å–ª–µ —á–µ–≥–æ –≤—ã–∑—ã–≤–∞–µ–º –º–µ—Ç–æ–¥—ã `::prepareFirstProductIdsToWarm()`
–∏ `::prepareLastProductIdsToWarm()` –æ–±—ä–µ–¥–∏–Ω—è—è –∏—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤ –Ω–∞—à –º–∞—Å—Å–∏–≤.

–ü–æ—Å–ª–µ —Ç–æ–≥–æ –∫–∞–∫ —Ü–∏–∫–ª –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º –∑–∞–∫–æ–Ω—á–∏–ª—Å—è, –º—ã –ø—Ä–æ—Ö–æ–¥–∏–º—Å—è –ø–æ –ø–æ–ª—É—á–µ–Ω–Ω—ã–º ID
—Ç–æ–≤–∞—Ä–æ–≤, –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ –æ—Ç—Å–µ—è–≤ –¥—É–±–ª–∏ –ø—Ä–∏ –ø–æ–º–æ—â–∏ `array_unique()`, –∫–æ—Ç–æ—Ä—ã–µ —Ç–æ—á–Ω–æ
–±—É–¥—É—Ç –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π. –î–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–æ–≤–∞—Ä–∞ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º –∞–¥—Ä–µ—Å –∏
–¥–æ–±–∞–≤–ª—è–µ–º –≤ –Ω–∞—à –º–∞—Å—Å–∏–≤ –∞–¥—Ä–µ—Å–æ–≤.

–í –∫–æ–Ω–µ—á–Ω–æ–º –∏—Ç–æ–≥–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –ø–æ–ª—É—á–∏–≤—à–∏–µ—Å—è –∞–¥—Ä–µ—Å–∞ —Ç–æ–≤–∞—Ä–æ–≤ –¥–ª—è –ø—Ä–æ–≥—Ä–µ–≤–∞.

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–ª–∞–≥–∏–Ω–æ–≤

–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –º–æ–∂–Ω–æ —Ä–∞–∑–Ω—ã–º–∏ –ø—É—Ç—è–º–∏: –æ—Ç–∫—Ä—ã—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É –≤ –±—Ä–∞—É–∑–µ—Ä–µ –∏
–ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –Ω–∞ –æ—Ç–≤–µ—Ç, –∑–∞–π—Ç–∏ –≤ –ë–î –∏ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤ –∫–µ—à-—Ç–∞–±–ª–∏—Ü—É, –ª–∏–±–æ –∑–∞–º–µ—Ä–∏—Ç—å –∏–∑
—Ç–µ—Ä–º–∏–Ω–∞–ª–∞. –¢—É—Ç –∫–æ–º—É —á—Ç–æ –±–ª–∏–∂–µ. –î–ª—è —Å—Ç–∞—Ç—å–∏ –Ω–∞–≥–ª—è–¥–Ω–µ–µ –≤—Å–µ–≥–æ –±—É–¥–µ—Ç –ø—Ä–æ–≤–µ—Ä—è—Ç—å —á–µ—Ä–µ–∑
—Ç–µ—Ä–º–∏–Ω–∞–ª.

**–í–∞–∂–Ω–æ–µ —É—Ç–æ—á–Ω–µ–Ω–∏–µ!** –í—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–∞–ª–µ–µ –ø–æ–¥—Ä–∞–∑—É–º–µ–≤–∞—é—Ç, —á—Ç–æ
–ø–æ—Å–ª–µ `drush cache:rebuild` —è —Å–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–≥—Ä–µ–≤–∞–ª —è–¥—Ä–æ, –ø—É—Ç—ë–º –æ—Ç–∫—Ä—ã—Ç–∏—è –ª—é–±–æ–π
–¥—Ä—É–≥–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã, –∫–æ—Ç–æ—Ä–∞—è –Ω–µ —Ç–µ—Å—Ç–∏—Ä—É–µ—Ç—Å—è –≤ –ø—Ä–∏–º–µ—Ä–µ. –≠—Ç–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –¥–ª—è –±–æ–ª–µ–µ
—Ä–µ–∞–ª—å–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π. –ù–∞–ø—Ä–∏–º–µ—Ä, –Ω–∞ —Ç–µ—Å—Ç–∏—Ä—É–µ–º–æ–º —Å–∞–π—Ç–µ –æ—Ç–∫—Ä—ã—Ç–∏–µ –≥–ª–∞–≤–Ω–æ–π –ø–æ—Å–ª–µ —Å–±—Ä–æ—Å–∞
–∫–µ—à–∞ –∑–∞–Ω–∏–º–∞–µ—Ç 2.44 —Å–µ–∫—É–Ω–¥—ã, –æ—Ç–∫—Ä—ã—Ç–∏–µ –≥–ª–∞–≤–Ω–æ–π –Ω–∞ —Ö–æ–ª–æ–¥–Ω—ã–π –∫–µ—à —Å –ø—Ä–æ–≥—Ä–µ—Ç—ã–º
Kernel - 0.68 —Å–µ–∫—É–Ω–¥—ã, –∞ –Ω–∞ –≥–æ—Ä—è—á–∏–π –∫–µ—à 0.02 —Å–µ–∫—É–Ω–¥—ã. –¢–æ –µ—Å—Ç—å, –ø—Ä–æ–≥—Ä–µ–≤ Kernel
–∑–∞–Ω–∏–º–∞–µ—Ç –ø–æ—Ä—è–¥–∫–∞ 1.76 —Å–µ–∫, —ç—Ç–æ —Ä–∞–∑–æ–≤—ã–π –ª–∞–≥ –ø–æ—Å–ª–µ —Å–±—Ä–æ—Å–∞ –∏ —á—Ç–æ–±—ã –Ω–µ –¥–µ—Ä–∂–∞—Ç—å –µ–≥–æ –≤
—É–º–µ –¥–∞–ª–µ–µ, –º—ã –µ–≥–æ –∏—Å–∫–ª—é—á–∞–µ–º –∏ —Å–≤–µ—Ä—è–µ–º —Å —Ä–µ–∞–ª—å–Ω—ã–º —Ö–æ–ª–æ–¥–Ω—ã–º –∫–µ—à–µ–º —Å—Ç—Ä–∞–Ω–∏—Ü—ã.

–ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ –Ω–∞—à–∏ –ø–ª–∞–≥–∏–Ω—ã –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç –æ—á–µ—Ä–µ–¥—å (–Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é):

```shell
$ drush warmer:enqueue example_catalog
> [success] 50 items enqueued for cache warming.
$ drush warmer:enqueue example_product
> [success] 280 items enqueued for cache warming.
```

–ò–∑ –¥–∞–Ω–Ω—ã—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —Å–ª–µ–¥—É–µ—Ç:

* –î–æ–±–∞–≤–ª–µ–Ω–æ 50 URL-–∞–¥—Ä–µ—Å–æ–≤ –¥–ª—è –ø—Ä–æ–≥—Ä–µ–≤–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–π. –¢—É—Ç –ª–µ–≥–∫–æ —Å–≤–µ—Ä–∏—Ç—å. 10
  –∫–∞—Ç–µ–≥–æ—Ä–∏–π, –ø—Ä–æ–≥—Ä–µ–≤–∞—é—Ç—Å—è –ø–µ—Ä–≤—ã–µ 3 –∏ –ø–æ—Å–ª–µ–¥–Ω—è—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞, –∏ –≤ –∫–∞–∂–¥–æ–π –∏–∑ –Ω–∏—Ö
  –±–æ–ª—å—à–µ 4 —Å—Ç—Ä–∞–Ω–∏—Ü. –ò –Ω–µ –∑–∞–±—ã–≤–∞–µ–º –ø—Ä–æ `?page=0`.
* –î–æ–±–∞–≤–ª–µ–Ω–æ 280 URL-–∞–¥—Ä–µ—Å–æ–≤ –¥–ª—è –ø—Ä–æ–≥—Ä–µ–≤–∞ —Ç–æ–≤–∞—Ä–æ–≤ —Å —ç—Ç–∏—Ö —Å—Ç—Ä–∞–Ω–∏—Ü –∫–∞—Ç–µ–≥–æ—Ä–∏–π. –¢—É—Ç
  —É–∂ –¥–æ–≤–µ—Ä–∏–º—Å—è —á—Ç–æ –∫–æ–¥ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤–µ—Ä–Ω–æ, –∏–±–æ –≤—Å—ë —ç—Ç–æ –ø—Ä–æ—Å—Ç–∞–≤–ª–µ–Ω–æ —Ä–∞–Ω–¥–æ–º–Ω–æ. –¢–∞–∫–æ–µ
  –Ω–µ–±–æ–ª—å—à–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –æ–±—É—Å–ª–æ–≤–ª–µ–Ω–æ —Ç–µ–º, —á—Ç–æ —Å–ª–æ–≤–∞—Ä—å –¥—Ä–µ–≤–æ–≤–∏–¥–Ω—ã–π –∏ –≤—ã–≤–æ–¥–∏—Ç—Å—è –ø–æ 10
  —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É ‚Äî —Ç–æ–≤–∞—Ä—ã –ø–µ—Ä–µ—Å–µ–∫–∞—é—Ç—Å—è –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º.

–ù–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–∞—Å –º–∞–ª–æ –∏–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç, –≤–µ–¥—å –Ω–∞–º –≤–∞–∂–Ω–µ–µ –≤—Å–µ–≥–æ –ø—Ä–æ–≥—Ä–µ–≤–∞—Ç—å —ç—Ç–∏ URL'—ã.

–ü—Ä–æ–≤–µ—Ä—è–µ–º –æ—Ç–≤–µ—Ç—ã –Ω–∞ —Ö–æ–ª–æ–¥–Ω—ã–π –∫–µ—à:

```bash
$ drush cache:rebuild
$ curl http://video-examples.localhost/taxonomy/term/1 -s -o /dev/null -w %{time_starttransfer}
> 0.701627
$ curl http://video-examples.localhost/node/49589 -s -o /dev/null -w %{time_starttransfer}
> 0.201568
```

–ö–∞–∫ –≤–∏–¥–Ω–æ –∏–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤, —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –Ω–∞ —Ö–æ–ª–æ–¥–Ω—ã–π –∫–µ—à –æ—Ç–≤–µ—Ç–∏–ª–∞ –∑–∞ 701 –º—Å,
–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Ç–æ–≤–∞—Ä–∞ –∑–∞ 201 –º—Å.

–¢–µ–ø–µ—Ä—å, –ø–æ—Å–ª–µ —Å–±—Ä–æ—Å–∞ –∫–µ—à–∞ –º—ã –ø—Ä–æ–≥—Ä–µ–µ–º –µ–≥–æ –Ω–∞—à–∏–º–∏ –ø–ª–∞–≥–∏–Ω–∞–º–∏. –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –º—ã
–ø—Ä–æ–≤–µ—Ä–∏–º —Å—Ç—Ä–∞–Ω–∏—Ü—É —Ç–æ–≤–∞—Ä–∞ (`http://video-examples.localhost/node/13184`) –∫–æ—Ç–æ—Ä–∞—è
–Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –ª–∏—Å—Ç–∏–Ω–≥–µ –Ω–∞ 20 (–∏–∑ 480) —Å—Ç—Ä–∞–Ω–∏—Ü–µ –∏ –Ω–µ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –ø—Ä–æ–≥—Ä–µ—Ç–∞. –û—Ç –Ω–µ—ë
–º—ã –æ–∂–∏–¥–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∑–∞–≤–µ–¥–æ–º–æ –∏ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ –±–æ–ª—å—à–µ (–º–µ–¥–ª–µ–Ω–Ω–µ–µ) —á–µ–º –æ—Ç –ø—Ä–æ–≥—Ä–µ—Ç—ã—Ö.

```bash
$ drush cache:rebuild
$ drush warmer:enqueue example_catalog --run-queue
> [success] Processed 1 items from the warmer queue in 8.6 sec.
$ drush warmer:enqueue example_product --run-queue
> [success] Processed 6 items from the warmer queue in 6.31 sec.
$ curl http://video-examples.localhost/taxonomy/term/1 -s -o /dev/null -w %{time_starttransfer}
> 0.011202
$ curl http://video-examples.localhost/node/49589 -s -o /dev/null -w %{time_starttransfer}
> 0.011774
$ curl http://video-examples.localhost/node/13184 -s -o /dev/null -w %{time_starttransfer}
> 0.142558
$ curl http://video-examples.localhost/node/13184 -s -o /dev/null -w %{time_starttransfer}
> 0.009897
```

–ò—Ç–æ–≥–æ:

* –°—Ç—Ä–∞–Ω–∏—Ü—ã –∫–∞—Ç–µ–≥–æ—Ä–∏–π –±—ã–ª–∏ –ø—Ä–æ–≥—Ä–µ—Ç—ã –∑–∞ 9 —Å–µ–∫—É–Ω–¥.
* –¢–æ–≤–∞—Ä—ã –±—ã–ª–∏ –ø—Ä–æ–≥—Ä–µ—Ç—ã –∑–∞ 7 —Å–µ–∫—É–Ω–¥.
* –°—Ç—Ä–∞–Ω–∏—Ü–∞ –ø—Ä–æ–≥—Ä–µ—Ç–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –æ—Ç–≤–µ—Ç–∏–ª–∞ –∑–∞ 11–º—Å, –ø—Ä–æ—Ç–∏–≤ 701 –Ω–∞ —Ö–æ–ª–æ–¥–Ω—ã–π –∫–µ—à.
* –°—Ç—Ä–∞–Ω–∏—Ü–∞ –ø—Ä–æ–≥—Ä–µ—Ç–æ–≥–æ —Ç–æ–≤–∞—Ä–∞ –æ—Ç–≤–µ—Ç–∏–ª–∞ –∑–∞ 11–º—Å, –ø—Ä–æ—Ç–∏–≤ 201–º—Å –Ω–∞ —Ö–æ–ª–æ–¥–Ω—ã–π –∫–µ—à.
* –°—Ç—Ä–∞–Ω–∏—Ü–∞ —Ç–æ–≤–∞—Ä–∞, –∫–æ—Ç–æ—Ä–∞—è –Ω–µ –ø–æ–ø–∞–¥–∞–µ—Ç –ø–æ–¥ –ø—Ä–æ–≥—Ä–µ–≤ –ø–ª–∞–≥–∏–Ω–æ–≤ –æ—Ç–≤–µ—Ç–∏–ª–∞ –∑–∞ 142–º—Å.
  –ü–æ–≤—Ç–æ—Ä–Ω—ã–º –≤—ã–∑–æ–≤–æ–º –º—ã —É–±–µ–∂–¥–∞–µ–º—Å—è, —á—Ç–æ —ç—Ç–æ –±—ã–ª –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ —Ö–æ–ª–æ–¥–Ω—ã–π –∫–µ—à, –≤–µ–¥—å
  –Ω–∞ –≤—Ç–æ—Ä–æ–π —Ä–∞–∑ –æ–Ω–∞ –æ—Ç–≤–µ—Ç–∏–ª–∞ —É–∂–µ –∑–∞ 9–º—Å.

–ò–∑ —á–µ–≥–æ –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –≤—ã–≤–æ–¥, —á—Ç–æ –Ω–∞—à–∏ –ø–ª–∞–≥–∏–Ω—ã —Ä–∞–±–æ—Ç–∞—é—Ç –∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –ø—Ä–æ–≥—Ä–µ–≤–∞—é—Ç—Å—è
–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ. –ê –≥–ª–∞–≤–Ω–æ–µ, —ç—Ç–æ –¥–∞—ë—Ç —Å—É—â–µ—Å—Ç–≤–µ–Ω–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ –ø–æ–ª–Ω–æ—Å—Ç—å—é –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–º
—Ä–µ–∂–∏–º–µ!

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

üí° –ù–µ –∑–∞–±—ã–≤–∞–π—Ç–µ –ø—Ä–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –ø–ª–∞–≥–∏–Ω—ã, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç —Å–¥–µ–ª–∞—Ç—å –∞–Ω–∞–ª–æ–≥–∏—á–Ω—ã–π
–ø—Ä–æ–≥—Ä–µ–≤ –±–µ–∑ –µ–¥–∏–Ω–æ–π —Å—Ç—Ä–æ—á–∫–∏ –∫–æ–¥–∞. –í–æ–∑–º–æ–∂–Ω–æ –æ–Ω–∏ —Å–º–æ–≥—É—Ç –ø–æ–∫—Ä—ã—Ç—å –≤—Å–µ –≤–∞—à–∏
–ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç–∏ –∏–ª–∏ —Å—Ç–∞—Ç—å –¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ–º –∫ –≤–∞—à–∏–º —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–º –ø–ª–∞–≥–∏–Ω–∞–º. –ö–æ–Ω–µ—á–Ω–æ,
–ø—Ä–æ–≥—Ä–µ–≤–∞—Ç—å —Å–∞–π—Ç –∏–∑ –ø—Ä–∏–º–µ—Ä–∞ –ø—Ä–∏ –ø–æ–º–æ—â–∏ `cdn` –ø–ª–∞–≥–∏–Ω–∞ —Ä–∞–≤–Ω–æ—Å–∏–ª—å–Ω–æ —Å—Ç—Ä–µ–ª—å–±–µ —Å–µ–±–µ –ø–æ
–∫–æ–ª–µ–Ω—è–º, –Ω–æ –∏ –Ω–µ –∫–∞–∂–¥—ã–π —Å–∞–π—Ç –∏–º–µ–µ—Ç —Ç–∞–∫–∏–µ –æ–±—ä—ë–º—ã –¥–∞–Ω–Ω—ã—Ö –∏ —É—Å–ª–æ–≤–∏—è –≥–¥–µ –º–æ–∂–Ω–æ
–ø—Ä–æ–≥—Ä–µ–≤–∞—Ç—å –ª–∏—à—å –º–∞–ª—É—é —á–∞—Å—Ç—å.

## –°—Å—ã–ª–∫–∏

* [–ú–æ–¥—É–ª—å Warmer](https://www.drupal.org/project/warmer), drupal.org
* [–ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ –ø—Ä–∏–º–µ—Ä–∞](https://github.com/Niklan/niklan.net-examples/tree/master/blog/216),
  GitHub

[drupal-8-how-to-create-custom-plugin-type]: ../../../../2016/09/17/drupal-8-how-to-create-custom-plugin-type/index.ru.md
[drupal-8-queue-api]: ../../../../2015/11/12/drupal-8-queue-api/index.ru.md
[drupal-8-batch-api]: ../../../../2018/09/11/drupal-8-batch-api/index.ru.md
[drupal-8-queue-worker-plugin]: ../../../../2019/04/21/drupal-8-queue-worker-plugin/index.ru.md
